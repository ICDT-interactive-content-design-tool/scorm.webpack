/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t,e,n={914:(t,e,n)=>{t.exports=function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return o(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var r=void 0,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,i){(function(t){"use strict";var n,i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var r=0,a=new o(d),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=r=++r%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){d(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(d,0)};else{var l=new t.MessageChannel;l.port1.onmessage=d,n=function(){l.port2.postMessage(0)}}var u=[];function d(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}e.exports=function(t){1!==u.push(t)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var i=t(1);function o(){}var r={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==o&&f(this,t)}function d(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function c(t,e,n){i((function(){var i;try{i=e(n)}catch(e){return r.reject(t,e)}i===t?r.reject(t,new TypeError("Cannot resolve promise with itself")):r.resolve(t,i)}))}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function i(e){n||(n=!0,r.reject(t,e))}function o(e){n||(n=!0,r.resolve(t,e))}var a=v((function(){e(o,i)}));"error"===a.status&&i(a.value)}function v(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(o);return this.state!==l?c(n,this.state===s?t:e,this.outcome):this.queue.push(new d(n,t,e)),n},d.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){r.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},r.resolve=function(t,e){var n=v(h,e);if("error"===n.status)return r.reject(t,n.value);var i=n.value;if(i)f(t,i);else{t.state=s,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},r.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:r.resolve(new this(o),t)},u.reject=function(t){var e=new this(o);return r.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(o);++l<n;)d(t[l],l);return u;function d(t,o){e.resolve(t).then((function(t){a[o]=t,++s!==n||i||(i=!0,r.resolve(u,a))}),(function(t){i||(i=!0,r.reject(u,t))}))}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n,i=t.length,a=!1;if(!i)return this.resolve([]);for(var s=-1,l=new this(o);++s<i;)n=t[s],e.resolve(n).then((function(t){a||(a=!0,r.resolve(l,t))}),(function(t){a||(a=!0,r.reject(l,t))}));return l}},{1:1}],3:[function(t,e,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function r(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function u(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var c="local-forage-detect-blob-support",h=void 0,f={},v=Object.prototype.toString,p="readonly",y="readwrite";function g(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),o=0;o<e;o++)i[o]=t.charCodeAt(o);return n}function m(t){return"boolean"==typeof h?a.resolve(h):function(t){return new a((function(e){var n=t.transaction(c,y),i=r([""]);n.objectStore(c).put(i,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return h=t}))}function b(t){var e=f[t.name],n={};n.promise=new a((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function w(t){var e=f[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function _(t,e){var n=f[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function x(t,e){return new a((function(n,i){if(f[t.name]=f[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);b(t),t.db.close()}var r=[t.name];e&&r.push(t.version);var a=o.open.apply(o,r);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(c)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),a.onerror=function(t){t.preventDefault(),i(a.error)},a.onsuccess=function(){var e=a.result;e.onversionchange=function(t){t.target.close()},n(e),w(t)}}))}function S(t){return x(t,!1)}function k(t){return x(t,!0)}function E(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,o=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var r=t.db.version+1;r>t.version&&(t.version=r)}return!0}return!1}function O(t){return r([g(atob(t.data))],{type:t.type})}function j(t){return t&&t.__local_forage_encoded_blob}function z(t){var e=this,n=e._initReady().then((function(){var t=f[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(n,t,t),n}function I(t,e,n,i){void 0===i&&(i=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(i>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)})).then((function(){return function(t){b(t);for(var e=f[t.name],n=e.forages,i=0;i<n.length;i++){var o=n[i];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,S(t).then((function(e){return t.db=e,E(t)?k(t):e})).then((function(i){t.db=e.db=i;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=i})).catch((function(e){throw _(t,e),e}))}(t).then((function(){I(t,e,n,i-1)}))})).catch(n);n(o)}}var N={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]=t[i];var o=f[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},f[n.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=z);var r=[];function s(){return a.resolve()}for(var l=0;l<o.forages.length;l++){var u=o.forages[l];u!==e&&r.push(u._initReady().catch(s))}var d=o.forages.slice(0);return a.all(r).then((function(){return n.db=o.db,S(n)})).then((function(t){return n.db=t,E(n,e._defaultConfig.version)?k(n):t})).then((function(t){n.db=o.db=t,e._dbInfo=n;for(var i=0;i<d.length;i++){var r=d[i];r!==e&&(r._dbInfo.db=n.db,r._dbInfo.version=n.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){I(n._dbInfo,p,(function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var i=n.value;j(i)&&(i=O(i));var o=t(i,n.key,s++);void 0!==o?e(o):n.continue()}else e()},a.onerror=function(){i(a.error)}}catch(t){i(t)}}))})).catch(i)}));return s(i,e),i},getItem:function(t,e){var n=this;t=u(t);var i=new a((function(e,i){n.ready().then((function(){I(n._dbInfo,p,(function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),j(t)&&(t=O(t)),e(t)},a.onerror=function(){i(a.error)}}catch(t){i(t)}}))})).catch(i)}));return s(i,e),i},setItem:function(t,e,n){var i=this;t=u(t);var o=new a((function(n,o){var r;i.ready().then((function(){return r=i._dbInfo,"[object Blob]"===v.call(e)?m(r.db).then((function(t){return t?e:(n=e,new a((function(t,e){var i=new FileReader;i.onerror=e,i.onloadend=function(e){var i=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)})));var n})):e})).then((function(e){I(i._dbInfo,y,(function(r,a){if(r)return o(r);try{var s=a.objectStore(i._dbInfo.storeName);null===e&&(e=void 0);var l=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=l.error?l.error:l.transaction.error;o(t)}}catch(t){o(t)}}))})).catch(o)}));return s(o,n),o},removeItem:function(t,e){var n=this;t=u(t);var i=new a((function(e,i){n.ready().then((function(){I(n._dbInfo,y,(function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName).delete(t);r.oncomplete=function(){e()},r.onerror=function(){i(a.error)},r.onabort=function(){var t=a.error?a.error:a.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return s(i,e),i},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){I(e._dbInfo,y,(function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=r.error?r.error:r.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){I(e._dbInfo,p,(function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName).count();r.onsuccess=function(){t(r.result)},r.onerror=function(){n(r.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,i=new a((function(e,i){t<0?e(null):n.ready().then((function(){I(n._dbInfo,p,(function(o,r){if(o)return i(o);try{var a=r.objectStore(n._dbInfo.storeName),s=!1,l=a.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===t||s?e(n.key):(s=!0,n.advance(t)):e(null)},l.onerror=function(){i(l.error)}}catch(t){i(t)}}))})).catch(i)}));return s(i,e),i},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){I(e._dbInfo,p,(function(i,o){if(i)return n(i);try{var r=o.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];r.onsuccess=function(){var e=r.result;e?(a.push(e.key),e.continue()):t(a)},r.onerror=function(){n(r.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=d.apply(this,arguments);var n,i=this.config();if((t="function"!=typeof t&&t||{}).name||(t.name=t.name||i.name,t.storeName=t.storeName||i.storeName),t.name){var r=t.name===i.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):S(t).then((function(e){var n=f[t.name],i=n.forages;n.db=e;for(var o=0;o<i.length;o++)i[o]._dbInfo.db=e;return e}));n=t.storeName?r.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;b(t);var i=f[t.name],r=i.forages;e.close();for(var s=0;s<r.length;s++){var l=r[s];l._dbInfo.db=null,l._dbInfo.version=n}var u=new a((function(e,i){var r=o.open(t.name,n);r.onerror=function(t){r.result.close(),i(t)},r.onupgradeneeded=function(){r.result.deleteObjectStore(t.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}}));return u.then((function(t){i.db=t;for(var e=0;e<r.length;e++){var n=r[e];n._dbInfo.db=t,w(n._dbInfo)}})).catch((function(e){throw(_(t,e)||a.resolve()).catch((function(){})),e}))}})):r.then((function(e){b(t);var n=f[t.name],i=n.forages;e.close();for(var r=0;r<i.length;r++)i[r]._dbInfo.db=null;var s=new a((function(e,n){var i=o.deleteDatabase(t.name);i.onerror=function(){var t=i.result;t&&t.close(),n(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}}));return s.then((function(t){n.db=t;for(var e=0;e<i.length;e++)w(i[e]._dbInfo)})).catch((function(e){throw(_(t,e)||a.resolve()).catch((function(){})),e}))}))}else n=a.reject("Invalid arguments");return s(n,e),n}};var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",C="arbf",P="blob",R="si08",B="ui08",L="uic8",F="si16",K="si32",D="ur16",Q="ui32",$="fl32",G="fl64",U=Object.prototype.toString;function W(t){var e,n,i,o,r,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(e=0;e<s;e+=4)n=T.indexOf(t[e]),i=T.indexOf(t[e+1]),o=T.indexOf(t[e+2]),r=T.indexOf(t[e+3]),d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|o>>2,d[l++]=(3&o)<<6|63&r;return u}function V(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=T[n[e]>>2],i+=T[(3&n[e])<<4|n[e+1]>>4],i+=T[(15&n[e+1])<<2|n[e+2]>>6],i+=T[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var q={serialize:function(t,e){var n="";if(t&&(n=U.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===U.call(t.buffer))){var i,o=A;t instanceof ArrayBuffer?(i=t,o+=C):(i=t.buffer,"[object Int8Array]"===n?o+=R:"[object Uint8Array]"===n?o+=B:"[object Uint8ClampedArray]"===n?o+=L:"[object Int16Array]"===n?o+=F:"[object Uint16Array]"===n?o+=D:"[object Int32Array]"===n?o+=K:"[object Uint32Array]"===n?o+=Q:"[object Float32Array]"===n?o+=$:"[object Float64Array]"===n?o+=G:e(new Error("Failed to get type for BinaryArray"))),e(o+V(i))}else if("[object Blob]"===n){var r=new FileReader;r.onload=function(){var n="~~local_forage_type~"+t.type+"~"+V(this.result);e(A+P+n)},r.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,9)!==A)return JSON.parse(t);var e,n=t.substring(13),i=t.substring(9,13);if(i===P&&M.test(n)){var o=n.match(M);e=o[1],n=n.substring(o[0].length)}var a=W(n);switch(i){case C:return a;case P:return r([a],{type:e});case R:return new Int8Array(a);case B:return new Uint8Array(a);case L:return new Uint8ClampedArray(a);case F:return new Int16Array(a);case D:return new Uint16Array(a);case K:return new Int32Array(a);case Q:return new Uint32Array(a);case $:return new Float32Array(a);case G:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}},stringToBuffer:W,bufferToString:V};function X(t,e,n,i){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,i)}function H(t,e,n,i,o,r){t.executeSql(n,i,o,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?r(t,a):X(t,e,(function(){t.executeSql(n,i,o,r)}),r)}),r):r(t,a)}),r)}function J(t,e,n,i){var o=this;t=u(t);var r=new a((function(r,a){o.ready().then((function(){void 0===e&&(e=null);var s=e,l=o._dbInfo;l.serializer.serialize(e,(function(e,u){u?a(u):l.db.transaction((function(n){H(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){r(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(i>0)return void r(J.apply(o,[t,s,n,i-1]));a(e)}}))}))})).catch(a)}));return s(r,n),r}var Y={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var o=new a((function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction((function(o){X(o,n,(function(){e._dbInfo=n,t()}),(function(t,e){i(e)}))}),i)}));return n.serializer=q,o},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){H(n,o,"SELECT * FROM "+o.storeName,[],(function(n,i){for(var r=i.rows,a=r.length,s=0;s<a;s++){var l=r.item(s),u=l.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},getItem:function(t,e){var n=this;t=u(t);var i=new a((function(e,i){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){H(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=o.serializer.deserialize(i)),e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},setItem:function(t,e,n){return J.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=u(t);var i=new a((function(e,i){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){H(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){H(e,i,"DELETE FROM "+i.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){H(e,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(e,n){var i=n.rows.item(0).c;t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){H(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){H(e,i,"SELECT key FROM "+i.storeName,[],(function(e,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).key);t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var i,o=this;return s(i=t.name?new a((function(e){var i;i=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:i,storeNames:[t.storeName]}):e(function(t){return new a((function(e,n){t.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,i){for(var o=[],r=0;r<i.rows.length;r++)o.push(i.rows.item(r).name);e({db:t,storeNames:o})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}(i))})).then((function(t){return new a((function(e,n){t.db.transaction((function(i){function o(t){return new a((function(e,n){i.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var r=[],s=0,l=t.storeNames.length;s<l;s++)r.push(o(t.storeNames[s]));a.all(r).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):a.reject("Invalid arguments"),e),i}};function Z(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function tt(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||localStorage.length>0}var et={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=Z(t,this._defaultConfig),tt()?(this._dbInfo=e,e.serializer=q,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,i=n.ready().then((function(){for(var e=n._dbInfo,i=e.keyPrefix,o=i.length,r=localStorage.length,a=1,s=0;s<r;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(o),a++)))return u}}}));return s(i,e),i},getItem:function(t,e){var n=this;t=u(t);var i=n.ready().then((function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i}));return s(i,e),i},setItem:function(t,e,n){var i=this;t=u(t);var o=i.ready().then((function(){void 0===e&&(e=null);var n=e;return new a((function(o,r){var a=i._dbInfo;a.serializer.serialize(e,(function(e,i){if(i)r(i);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}}))}))}));return s(o,n),o},removeItem:function(t,e){var n=this;t=u(t);var i=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(i,e),i},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,i=n.ready().then((function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e}));return s(i,e),i},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,i=[],o=0;o<n;o++){var r=localStorage.key(o);0===r.indexOf(t.keyPrefix)&&i.push(r.substring(t.keyPrefix.length))}return i}));return s(n,t),n},dropInstance:function(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var i,o=this;return i=t.name?new a((function(e){t.storeName?e(Z(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),s(i,e),i}},nt=function(t,e){for(var n=t.length,i=0;i<n;){if((o=t[i])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;i++}var o,r;return!1},it=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ot={},rt={},at={INDEXEDDB:N,WEBSQL:Y,LOCALSTORAGE:et},st=[at.INDEXEDDB._driver,at.WEBSQL._driver,at.LOCALSTORAGE._driver],lt=["dropInstance"],ut=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(lt),dt={description:"",driver:st.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ct(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function ht(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(it(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var ft=function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),at)if(at.hasOwnProperty(n)){var i=at[n],o=i._driver;this[n]=o,ot[o]||this.defineDriver(i)}this._defaultConfig=ht({},dt),this._config=ht({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":i(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new a((function(e,n){try{var i=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var r=ut.concat("_initStorage"),l=0,u=r.length;l<u;l++){var d=r[l];if((!nt(lt,d)||t[d])&&"function"!=typeof t[d])return void n(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=a.reject(e);return s(n,arguments[arguments.length-1]),n}},n=0,i=lt.length;n<i;n++){var o=lt[n];t[o]||(t[o]=e(o))}}();var c=function(n){ot[i]&&console.info("Redefining LocalForage driver: "+i),ot[i]=t,rt[i]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(c,n):c(!!t._support):c(!0)}catch(t){n(t)}}));return l(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=ot[t]?a.resolve(ot[t]):a.reject(new Error("Driver not found."));return l(i,e,n),i},t.prototype.getSerializer=function(t){var e=a.resolve(q);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var i=this;it(t)||(t=[t]);var o=this._getSupportedDrivers(t);function r(){i._config.driver=i.driver()}function s(t){return i._extend(t),r(),i._ready=i._initStorage(i._config),i._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var t=o[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then((function(t){i._driver=t._driver,r(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var o=t[e];return e++,i._dbInfo=null,i._ready=null,i.getDriver(o).then(s).catch(n)}r();var l=new Error("No available storage method found.");return i._driverSet=a.reject(l),i._driverSet}()}}(o)}))})).catch((function(){r();var t=new Error("No available storage method found.");return i._driverSet=a.reject(t),i._driverSet})),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!rt[t]},t.prototype._extend=function(t){ht(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ut.length;t<e;t++)ct(this,ut[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),vt=new ft;e.exports=vt},{3:3}]},{},[4])(4)},160:(t,e,n)=>{"use strict";n.r(e),n.d(e,{icdt:()=>yr,icdt_Init:()=>er,icdt_Run:()=>Ui,syncSvg:()=>Wi});var i=n(914),o=n.t(i,2);function r(){}function a(t){return null==t?r:function(){return this.querySelector(t)}}function s(){return[]}function l(t){return null==t?s:function(){return this.querySelectorAll(t)}}function u(t){return function(){return this.matches(t)}}function d(t){return function(e){return e.matches(t)}}var c=Array.prototype.find;function h(){return this.firstElementChild}var f=Array.prototype.filter;function v(){return Array.from(this.children)}function p(t){return new Array(t.length)}function y(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function g(t,e,n,i,o,r){for(var a,s=0,l=e.length,u=r.length;s<u;++s)(a=e[s])?(a.__data__=r[s],i[s]=a):n[s]=new y(t,r[s]);for(;s<l;++s)(a=e[s])&&(o[s]=a)}function m(t,e,n,i,o,r,a){var s,l,u,d=new Map,c=e.length,h=r.length,f=new Array(c);for(s=0;s<c;++s)(l=e[s])&&(f[s]=u=a.call(l,l.__data__,s,e)+"",d.has(u)?o[s]=l:d.set(u,l));for(s=0;s<h;++s)u=a.call(t,r[s],s,r)+"",(l=d.get(u))?(i[s]=l,l.__data__=r[s],d.delete(u)):n[s]=new y(t,r[s]);for(s=0;s<c;++s)(l=e[s])&&d.get(f[s])===l&&(o[s]=l)}function b(t){return t.__data__}function w(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function _(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}y.prototype={constructor:y,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var x="http://www.w3.org/1999/xhtml";const S={svg:"http://www.w3.org/2000/svg",xhtml:x,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),S.hasOwnProperty(e)?{space:S[e],local:t}:t}function E(t){return function(){this.removeAttribute(t)}}function O(t){return function(){this.removeAttributeNS(t.space,t.local)}}function j(t,e){return function(){this.setAttribute(t,e)}}function z(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function I(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function N(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function T(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M(t){return function(){this.style.removeProperty(t)}}function A(t,e,n){return function(){this.style.setProperty(t,e,n)}}function C(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function P(t,e){return t.style.getPropertyValue(e)||T(t).getComputedStyle(t,null).getPropertyValue(e)}function R(t){return function(){delete this[t]}}function B(t,e){return function(){this[t]=e}}function L(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function F(t){return t.trim().split(/^|\s+/)}function K(t){return t.classList||new D(t)}function D(t){this._node=t,this._names=F(t.getAttribute("class")||"")}function Q(t,e){for(var n=K(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function G(t,e){for(var n=K(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function U(t){return function(){Q(this,t)}}function W(t){return function(){G(this,t)}}function V(t,e){return function(){(e.apply(this,arguments)?Q:G)(this,t)}}function q(){this.textContent=""}function X(t){return function(){this.textContent=t}}function H(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function J(){this.innerHTML=""}function Y(t){return function(){this.innerHTML=t}}function Z(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function tt(){this.nextSibling&&this.parentNode.appendChild(this)}function et(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===x&&e.documentElement.namespaceURI===x?e.createElement(t):e.createElementNS(n,t)}}function it(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ot(t){var e=k(t);return(e.local?it:nt)(e)}function rt(){return null}function at(){var t=this.parentNode;t&&t.removeChild(this)}function st(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ut(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?e.length=o:delete this.__on}}}function dt(t,e,n){return function(){var i,o=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),void(i.value=e);this.addEventListener(t.type,r,n),i={type:t.type,name:t.name,value:e,listener:r,options:n},o?o.push(i):this.__on=[i]}}function ct(t,e,n){var i=T(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function ht(t,e){return function(){return ct(this,t,e)}}function ft(t,e){return function(){return ct(this,t,e.apply(this,arguments))}}D.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var vt=[null];function pt(t,e){this._groups=t,this._parents=e}function yt(){return new pt([[document.documentElement]],vt)}pt.prototype=yt.prototype={constructor:pt,select:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s,l=e[o],u=l.length,d=i[o]=new Array(u),c=0;c<u;++c)(r=l[c])&&(s=t.call(r,r.__data__,c,l))&&("__data__"in r&&(s.__data__=r.__data__),d[c]=s);return new pt(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):l(t);for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var a,s=e[r],u=s.length,d=0;d<u;++d)(a=s[d])&&(i.push(t.call(a,a.__data__,d,s)),o.push(a));return new pt(i,o)},selectChild:function(t){return this.select(null==t?h:function(t){return function(){return c.call(this.children,t)}}("function"==typeof t?t:d(t)))},selectChildren:function(t){return this.selectAll(null==t?v:function(t){return function(){return f.call(this.children,t)}}("function"==typeof t?t:d(t)))},filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a=e[o],s=a.length,l=i[o]=[],d=0;d<s;++d)(r=a[d])&&t.call(r,r.__data__,d,a)&&l.push(r);return new pt(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,b);var n,i=e?m:g,o=this._parents,r=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=r.length,s=new Array(a),l=new Array(a),u=new Array(a),d=0;d<a;++d){var c=o[d],h=r[d],f=h.length,v=w(t.call(c,c&&c.__data__,d,o)),p=v.length,y=l[d]=new Array(p),_=s[d]=new Array(p);i(c,h,y,_,u[d]=new Array(f),v,e);for(var x,S,k=0,E=0;k<p;++k)if(x=y[k]){for(k>=E&&(E=k+1);!(S=_[E])&&++E<p;);x._next=S||null}}return(s=new pt(s,o))._enter=l,s._exit=u,s},enter:function(){return new pt(this._enter||this._groups.map(p),this._parents)},exit:function(){return new pt(this._exit||this._groups.map(p),this._parents)},join:function(t,e,n){var i=this.enter(),o=this,r=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==n?r.remove():n(r),i&&o?i.merge(o).order():o},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,r=i.length,a=Math.min(o,r),s=new Array(o),l=0;l<a;++l)for(var u,d=n[l],c=i[l],h=d.length,f=s[l]=new Array(h),v=0;v<h;++v)(u=d[v]||c[v])&&(f[v]=u);for(;l<o;++l)s[l]=n[l];return new pt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,a=o[r];--r>=0;)(i=o[r])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=_);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var a,s=n[r],l=s.length,u=o[r]=new Array(l),d=0;d<l;++d)(a=s[d])&&(u[d]=a);u.sort(e)}return new pt(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],a=0,s=r.length;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this},attr:function(t,e){var n=k(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?O:E:"function"==typeof e?n.local?N:I:n.local?z:j)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?M:"function"==typeof e?C:A)(t,e,null==n?"":n)):P(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?R:"function"==typeof e?L:B)(t,e)):this.node()[t]},classed:function(t,e){var n=F(t+"");if(arguments.length<2){for(var i=K(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?V:e?U:W)(n,e))},text:function(t){return arguments.length?this.each(null==t?q:("function"==typeof t?H:X)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?Z:Y)(t)):this.node().innerHTML},raise:function(){return this.each(tt)},lower:function(){return this.each(et)},append:function(t){var e="function"==typeof t?t:ot(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ot(t),i=null==e?rt:"function"==typeof e?e:a(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(at)},clone:function(t){return this.select(t?lt:st)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,o,r=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=r.length;if(!(arguments.length<2)){for(s=e?dt:ut,i=0;i<a;++i)this.each(s(r[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,d=s.length;u<d;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?ft:ht)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,o=t[e],r=0,a=o.length;r<a;++r)(i=o[r])&&(yield i)}};const gt=yt;var mt={value:()=>{}};function bt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new wt(i)}function wt(t){this._=t}function _t(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function xt(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=mt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}wt.prototype=bt.prototype={constructor:wt,on:function(t,e){var n,i,o=this._,r=(i=o,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=r[a]).type)o[n]=xt(o[n],t.name,e);else if(null==e)for(n in o)o[n]=xt(o[n],t.name,null);return this}for(;++a<s;)if((n=(t=r[a]).type)&&(n=_t(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new wt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};const St=bt;var kt,Et,Ot=0,jt=0,zt=0,It=1e3,Nt=0,Tt=0,Mt=0,At="object"==typeof performance&&performance.now?performance:Date,Ct="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pt(){return Tt||(Ct(Rt),Tt=At.now()+Mt)}function Rt(){Tt=0}function Bt(){this._call=this._time=this._next=null}function Lt(t,e,n){var i=new Bt;return i.restart(t,e,n),i}function Ft(){Tt=(Nt=At.now())+Mt,Ot=jt=0;try{!function(){Pt(),++Ot;for(var t,e=kt;e;)(t=Tt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ot}()}finally{Ot=0,function(){for(var t,e,n=kt,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:kt=e);Et=t,Dt(i)}(),Tt=0}}function Kt(){var t=At.now(),e=t-Nt;e>It&&(Mt-=e,Nt=t)}function Dt(t){Ot||(jt&&(jt=clearTimeout(jt)),t-Tt>24?(t<1/0&&(jt=setTimeout(Ft,t-At.now()-Mt)),zt&&(zt=clearInterval(zt))):(zt||(Nt=At.now(),zt=setInterval(Kt,It)),Ot=1,Ct(Ft)))}function Qt(t,e,n){var i=new Bt;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}Bt.prototype=Lt.prototype={constructor:Bt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Pt():+n)+(null==e?0:+e),this._next||Et===this||(Et?Et._next=this:kt=this,Et=this),this._call=t,this._time=n,Dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dt())}};var $t=St("start","end","cancel","interrupt"),Gt=[],Ut=0,Wt=3;function Vt(t,e,n,i,o,r){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,o=t.__transition;function r(l){var u,d,c,h;if(1!==n.state)return s();for(u in o)if((h=o[u]).name===n.name){if(h.state===Wt)return Qt(r);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[u]):+u<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[u])}if(Qt((function(){n.state===Wt&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=Wt,i=new Array(c=n.tween.length),u=0,d=-1;u<c;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),r=-1,a=i.length;++r<a;)i[r].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=Lt((function(t){n.state=1,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:o,on:$t,tween:Gt,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Ut})}function qt(t,e){var n=Ht(t,e);if(n.state>Ut)throw new Error("too late; already scheduled");return n}function Xt(t,e){var n=Ht(t,e);if(n.state>Wt)throw new Error("too late; already running");return n}function Ht(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Jt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Yt,Zt=180/Math.PI,te={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ee(t,e,n,i,o,r){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Zt,skewX:Math.atan(l)*Zt,scaleX:a,scaleY:s}}function ne(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}return function(r,a){var s=[],l=[];return r=t(r),a=t(a),function(t,i,o,r,a,s){if(t!==o||i!==r){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:Jt(t,o)},{i:l-2,x:Jt(i,r)})}else(o||r)&&a.push("translate("+o+e+r+n)}(r.translateX,r.translateY,a.translateX,a.translateY,s,l),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Jt(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}(r.rotate,a.rotate,s,l),function(t,e,n,r){t!==e?r.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Jt(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}(r.skewX,a.skewX,s,l),function(t,e,n,i,r,a){if(t!==n||e!==i){var s=r.push(o(r)+"scale(",null,",",null,")");a.push({i:s-4,x:Jt(t,n)},{i:s-2,x:Jt(e,i)})}else 1===n&&1===i||r.push(o(r)+"scale("+n+","+i+")")}(r.scaleX,r.scaleY,a.scaleX,a.scaleY,s,l),r=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var ie=ne((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?te:ee(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),oe=ne((function(t){return null==t?te:(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",t),(t=Yt.transform.baseVal.consolidate())?ee((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):te)}),", ",")",")");function re(t,e){var n,i;return function(){var o=Xt(this,t),r=o.tween;if(r!==n)for(var a=0,s=(i=n=r).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}o.tween=i}}function ae(t,e,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var r=Xt(this,t),a=r.tween;if(a!==i){o=(i=a).slice();for(var s={name:e,value:n},l=0,u=o.length;l<u;++l)if(o[l].name===e){o[l]=s;break}l===u&&o.push(s)}r.tween=o}}function se(t,e,n){var i=t._id;return t.each((function(){var t=Xt(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ht(t,i).value[e]}}function le(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ue(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function de(){}var ce=.7,he=1/ce,fe="\\s*([+-]?\\d+)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ye=/^#([0-9a-f]{3,8})$/,ge=new RegExp(`^rgb\\(${fe},${fe},${fe}\\)$`),me=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),be=new RegExp(`^rgba\\(${fe},${fe},${fe},${ve}\\)$`),we=new RegExp(`^rgba\\(${pe},${pe},${pe},${ve}\\)$`),_e=new RegExp(`^hsl\\(${ve},${pe},${pe}\\)$`),xe=new RegExp(`^hsla\\(${ve},${pe},${pe},${ve}\\)$`),Se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ke(){return this.rgb().formatHex()}function Ee(){return this.rgb().formatRgb()}function Oe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ye.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?je(e):3===n?new Ne(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ze(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ze(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ge.exec(t))?new Ne(e[1],e[2],e[3],1):(e=me.exec(t))?new Ne(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=be.exec(t))?ze(e[1],e[2],e[3],e[4]):(e=we.exec(t))?ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_e.exec(t))?Re(e[1],e[2]/100,e[3]/100,1):(e=xe.exec(t))?Re(e[1],e[2]/100,e[3]/100,e[4]):Se.hasOwnProperty(t)?je(Se[t]):"transparent"===t?new Ne(NaN,NaN,NaN,0):null}function je(t){return new Ne(t>>16&255,t>>8&255,255&t,1)}function ze(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ne(t,e,n,i)}function Ie(t,e,n,i){return 1===arguments.length?((o=t)instanceof de||(o=Oe(o)),o?new Ne((o=o.rgb()).r,o.g,o.b,o.opacity):new Ne):new Ne(t,e,n,null==i?1:i);var o}function Ne(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Te(){return`#${Pe(this.r)}${Pe(this.g)}${Pe(this.b)}`}function Me(){const t=Ae(this.opacity);return`${1===t?"rgb(":"rgba("}${Ce(this.r)}, ${Ce(this.g)}, ${Ce(this.b)}${1===t?")":`, ${t})`}`}function Ae(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ce(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pe(t){return((t=Ce(t))<16?"0":"")+t.toString(16)}function Re(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Le(t,e,n,i)}function Be(t){if(t instanceof Le)return new Le(t.h,t.s,t.l,t.opacity);if(t instanceof de||(t=Oe(t)),!t)return new Le;if(t instanceof Le)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),r=Math.max(e,n,i),a=NaN,s=r-o,l=(r+o)/2;return s?(a=e===r?(n-i)/s+6*(n<i):n===r?(i-e)/s+2:(e-n)/s+4,s/=l<.5?r+o:2-r-o,a*=60):s=l>0&&l<1?0:a,new Le(a,s,l,t.opacity)}function Le(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Fe(t){return(t=(t||0)%360)<0?t+360:t}function Ke(t){return Math.max(0,Math.min(1,t||0))}function De(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Qe(t,e,n,i,o){var r=t*t,a=r*t;return((1-3*t+3*r-a)*e+(4-6*r+3*a)*n+(1+3*t+3*r-3*a)*i+a*o)/6}le(de,Oe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ke,formatHex:ke,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Be(this).formatHsl()},formatRgb:Ee,toString:Ee}),le(Ne,Ie,ue(de,{brighter(t){return t=null==t?he:Math.pow(he,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ce:Math.pow(ce,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ne(Ce(this.r),Ce(this.g),Ce(this.b),Ae(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Te,formatHex:Te,formatHex8:function(){return`#${Pe(this.r)}${Pe(this.g)}${Pe(this.b)}${Pe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Me,toString:Me})),le(Le,(function(t,e,n,i){return 1===arguments.length?Be(t):new Le(t,e,n,null==i?1:i)}),ue(de,{brighter(t){return t=null==t?he:Math.pow(he,t),new Le(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ce:Math.pow(ce,t),new Le(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Ne(De(t>=240?t-240:t+120,o,i),De(t,o,i),De(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new Le(Fe(this.h),Ke(this.s),Ke(this.l),Ae(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ae(this.opacity);return`${1===t?"hsl(":"hsla("}${Fe(this.h)}, ${100*Ke(this.s)}%, ${100*Ke(this.l)}%${1===t?")":`, ${t})`}`}}));const $e=t=>()=>t;function Ge(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):$e(isNaN(t)?e:t)}const Ue=function t(e){var n=function(t){return 1==(t=+t)?Ge:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):$e(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=Ie(t)).r,(e=Ie(e)).r),o=n(t.g,e.g),r=n(t.b,e.b),a=Ge(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=r(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function We(t){return function(e){var n,i,o=e.length,r=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)i=Ie(e[n]),r[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return r=t(r),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=r(t),i.g=a(t),i.b=s(t),i+""}}}We((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],r=t[i+1],a=i>0?t[i-1]:2*o-r,s=i<e-1?t[i+2]:2*r-o;return Qe((n-i/e)*e,a,o,r,s)}})),We((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],r=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return Qe((n-i/e)*e,o,r,a,s)}}));var Ve=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qe=new RegExp(Ve.source,"g");function Xe(t,e){var n,i,o,r=Ve.lastIndex=qe.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Ve.exec(t))&&(i=qe.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Jt(n,i)})),r=qe.lastIndex;return r<e.length&&(o=e.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function He(t,e){var n;return("number"==typeof e?Jt:e instanceof Oe?Ue:(n=Oe(e))?(e=n,Ue):Xe)(t,e)}function Je(t){return function(){this.removeAttribute(t)}}function Ye(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ze(t,e,n){var i,o,r=n+"";return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function tn(t,e,n){var i,o,r=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function en(t,e,n){var i,o,r;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===i&&s===o?r:(o=s,r=e(i=a,l));this.removeAttribute(t)}}function nn(t,e,n){var i,o,r;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===i&&s===o?r:(o=s,r=e(i=a,l));this.removeAttributeNS(t.space,t.local)}}function on(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,o)),n}return o._value=e,o}function rn(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,o)),n}return o._value=e,o}function an(t,e){return function(){qt(this,t).delay=+e.apply(this,arguments)}}function sn(t,e){return e=+e,function(){qt(this,t).delay=e}}function ln(t,e){return function(){Xt(this,t).duration=+e.apply(this,arguments)}}function un(t,e){return e=+e,function(){Xt(this,t).duration=e}}var dn=gt.prototype.constructor;function cn(t){return function(){this.style.removeProperty(t)}}var hn=0;function fn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function vn(){return++hn}var pn=gt.prototype;fn.prototype=function(t){return gt().transition(t)}.prototype={constructor:fn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=a(t));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var l,u,d=i[s],c=d.length,h=r[s]=new Array(c),f=0;f<c;++f)(l=d[f])&&(u=t.call(l,l.__data__,f,d))&&("__data__"in l&&(u.__data__=l.__data__),h[f]=u,Vt(h[f],e,n,f,h,Ht(l,n)));return new fn(r,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=l(t));for(var i=this._groups,o=i.length,r=[],a=[],s=0;s<o;++s)for(var u,d=i[s],c=d.length,h=0;h<c;++h)if(u=d[h]){for(var f,v=t.call(u,u.__data__,h,d),p=Ht(u,n),y=0,g=v.length;y<g;++y)(f=v[y])&&Vt(f,e,n,y,v,p);r.push(v),a.push(u)}return new fn(r,a,e,n)},selectChild:pn.selectChild,selectChildren:pn.selectChildren,filter:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a=e[o],s=a.length,l=i[o]=[],d=0;d<s;++d)(r=a[d])&&t.call(r,r.__data__,d,a)&&l.push(r);return new fn(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),a=new Array(i),s=0;s<r;++s)for(var l,u=e[s],d=n[s],c=u.length,h=a[s]=new Array(c),f=0;f<c;++f)(l=u[f]||d[f])&&(h[f]=l);for(;s<i;++s)a[s]=e[s];return new fn(a,this._parents,this._name,this._id)},selection:function(){return new dn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=vn(),i=this._groups,o=i.length,r=0;r<o;++r)for(var a,s=i[r],l=s.length,u=0;u<l;++u)if(a=s[u]){var d=Ht(a,e);Vt(a,t,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new fn(i,this._parents,t,n)},call:pn.call,nodes:pn.nodes,node:pn.node,size:pn.size,empty:pn.empty,each:pn.each,on:function(t,e){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(t):this.each(function(t,e,n){var i,o,r=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?qt:Xt;return function(){var a=r(this,t),s=a.on;s!==i&&(o=(i=s).copy()).on(e,n),a.on=o}}(n,t,e))},attr:function(t,e){var n=k(t),i="transform"===n?oe:He;return this.attrTween(t,"function"==typeof e?(n.local?nn:en)(n,i,se(this,"attr."+t,e)):null==e?(n.local?Ye:Je)(n):(n.local?tn:Ze)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=k(t);return this.tween(n,(i.local?on:rn)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?ie:He;return null==e?this.styleTween(t,function(t,e){var n,i,o;return function(){var r=P(this,t),a=(this.style.removeProperty(t),P(this,t));return r===a?null:r===n&&a===i?o:o=e(n=r,i=a)}}(t,i)).on("end.style."+t,cn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,o,r;return function(){var a=P(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=P(this,t)),a===l?null:a===i&&l===o?r:(o=l,r=e(i=a,s))}}(t,i,se(this,"style."+t,e))).each(function(t,e){var n,i,o,r,a="style."+e,s="end."+a;return function(){var l=Xt(this,t),u=l.on,d=null==l.value[a]?r||(r=cn(e)):void 0;u===n&&o===d||(i=(n=u).copy()).on(s,o=d),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,o,r=n+"";return function(){var a=P(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,o;function r(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,r,n)),i}return r._value=e,r}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(se(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,o=Ht(this.node(),n).tween,r=0,a=o.length;r<a;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((null==e?re:ae)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?an:sn)(e,t)):Ht(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ln:un)(e,t)):Ht(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Xt(this,t).ease=e}}(e,t)):Ht(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Xt(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,o=n.size();return new Promise((function(r,a){var s={value:a},l={value:function(){0==--o&&r()}};n.each((function(){var n=Xt(this,i),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===o&&r()}))},[Symbol.iterator]:pn[Symbol.iterator]};var yn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function gn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}gt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,o,r=t.__transition,a=!0;if(r){for(o in e=null==e?null:e+"",r)(n=r[o]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]):a=!1;a&&delete t.__transition}}(this,t)}))},gt.prototype.transition=function(t){var e,n;t instanceof fn?(e=t._id,t=t._name):(e=vn(),(n=yn).time=Pt(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var a,s=i[r],l=s.length,u=0;u<l;++u)(a=s[u])&&Vt(a,t,e,u,s,n||gn(a,e));return new fn(i,this._parents,t,e)};const{abs:mn,max:bn,min:wn}=Math;function _n(t){return{type:t}}function xn(t){return function(){return t}}function Sn(t){this._context=t}function kn(t){return new Sn(t)}["w","e"].map(_n),["n","s"].map(_n),["n","w","e","s","nw","ne","sw","se"].map(_n),Array.prototype.slice,Sn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const En=Math.PI,On=2*En,jn=1e-6,zn=On-jn;function In(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Nn{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?In:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return In;const n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,o,r){this._append`C${+t},${+e},${+n},${+i},${this._x1=+o},${this._y1=+r}`}arcTo(t,e,n,i,o){if(t=+t,e=+e,n=+n,i=+i,(o=+o)<0)throw new Error(`negative radius: ${o}`);let r=this._x1,a=this._y1,s=n-t,l=i-e,u=r-t,d=a-e,c=u*u+d*d;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(c>jn)if(Math.abs(d*s-l*u)>jn&&o){let h=n-r,f=i-a,v=s*s+l*l,p=h*h+f*f,y=Math.sqrt(v),g=Math.sqrt(c),m=o*Math.tan((En-Math.acos((v+c-p)/(2*y*g)))/2),b=m/g,w=m/y;Math.abs(b-1)>jn&&this._append`L${t+b*u},${e+b*d}`,this._append`A${o},${o},0,0,${+(d*h>u*f)},${this._x1=t+w*s},${this._y1=e+w*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,i,o,r){if(t=+t,e=+e,r=!!r,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),s=n*Math.sin(i),l=t+a,u=e+s,d=1^r,c=r?i-o:o-i;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>jn||Math.abs(this._y1-u)>jn)&&this._append`L${l},${u}`,n&&(c<0&&(c=c%On+On),c>zn?this._append`A${n},${n},0,1,${d},${t-a},${e-s}A${n},${n},0,1,${d},${this._x1=l},${this._y1=u}`:c>jn&&this._append`A${n},${n},0,${+(c>=En)},${d},${this._x1=t+n*Math.cos(o)},${this._y1=e+n*Math.sin(o)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Tn(t){return t[0]}function Mn(t){return t[1]}function An(t,e){var n=xn(!0),i=null,o=kn,r=null,a=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Nn(e)}(s);function s(s){var l,u,d,c=(s=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(s)).length,h=!1;for(null==i&&(r=o(d=a())),l=0;l<=c;++l)!(l<c&&n(u=s[l],l,s))===h&&((h=!h)?r.lineStart():r.lineEnd()),h&&r.point(+t(u,l,s),+e(u,l,s));if(d)return r=null,d+""||null}return t="function"==typeof t?t:void 0===t?Tn:xn(t),e="function"==typeof e?e:void 0===e?Mn:xn(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:xn(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:xn(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:xn(!!t),s):n},s.curve=function(t){return arguments.length?(o=t,null!=i&&(r=o(i)),s):o},s.context=function(t){return arguments.length?(null==t?i=r=null:r=o(i=t),s):i},s}function Cn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Pn(t){this._context=t}function Rn(t){return new Pn(t)}function Bn(t,e,n){this.k=t,this.x=e,this.y=n}Pn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Bn.prototype={constructor:Bn,scale:function(t){return 1===t?this:new Bn(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Bn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Bn(1,0,0),Bn.prototype;var Ln={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8},Fn=10,Kn={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"},Dn=/^#?[a-fA-F0-9]+$/,Qn=function(t,e){if("none"==(t=null!=t?t:""))return"none";if("transparent"==t)return"rgba(0,0,0,0)";if(t.includes("rgba("))return t;if(t.includes("rgb(")&&(t=function(t){if(!t)return"";var e=t.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),n=(e&&e[4]||"").trim(),i=e?(256|e[1]).toString(16).slice(1)+(256|e[2]).toString(16).slice(1)+(256|e[3]).toString(16).slice(1):t;return"0"==n?"transparent":"#".concat(i)}(t)),!(t=t.replace(/[^0-9a-fA-F]/g,"")))return"";if(!Dn.test(t))return console.error("hex2rgba -> ".concat(t,": first argument has invalid hexadecimal characters")),"";if("#"===t[0]&&(t=t.slice(1)),3===t.length){var n=t.split("");n.splice(2,0,t[2]),n.splice(1,0,t[1]),n.splice(0,0,t[0]),t=n.join("")}if(6!==t.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var i=[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)];return(e="number"==typeof e?e:parseFloat(e))>=0&&e<=1?i.push(e):i.push(1),"rgba("+i.join(",")+")"},$n=function(t){var e,n,i,o,r;switch(null==t?void 0:t.type){case 901:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+t.readfileuploadurl+t.path;case 902:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+t.readfileuploadurl+t.path;case 903:return"assets/iframe/lib/mk-video-player/player.html?url="+t.readfileuploadurl+t.path;case 908:return"https://view.officeapps.live.com/op/view.aspx?src="+t.readfileuploadurl+t.path;case 909:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+t.readfileuploadurl+t.path;case 906:case 911:case 910:return""+t.readfileuploadurl+t.path;case 905:case 912:return"imsmanifest.xml"==(null===(n=null===(e=t.path)||void 0===e?void 0:e.split("/"))||void 0===n?void 0:n.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+t.readfileuploadurl+t.path:""+t.readfileuploadurl+t.path;case 907:case 900:return""+t.readfileuploadurl+t.path;case 904:switch(t.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+t.url;case 1002:return null!==(i=Gn(t.url))&&void 0!==i?i:"";case 1005:return null!==(o=t.url)&&void 0!==o?o:"";default:return null!==(r=t.url)&&void 0!==r?r:""}default:return""+t.readfileuploadurl+t.path}},Gn=function(t){var e=Un(t);return e?"https://www.youtube.com/embed/"+e+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},Un=function(t){var e=null==t?void 0:t.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return e&&e.length>=2?e[1]:null},Wn={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"square",strokeDasharrays:[2,5]},Vn="#FFFFFF",qn="#0D99FF",Xn="transparent",Hn="transparent",Jn=function(t,e){return e=null!=e?e:100,Math.round((t+Number.EPSILON)*e)/e},Yn=function(t){return Jn(t/yr.screen.scale)},Zn=function(t){var e;return null===(e=t.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===e?void 0:e.map((function(t){var e,n={type:t.substring(0,1)},i=(e=t.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?e.split(/\s/).map((function(t){return Jn(parseFloat(t),1e6)})):[];return i.length&&(n.points=i),n}))},ti=function(t){var e=[],n=[],i=[],o=[];return t.forEach((function(t){var r,a,s,l,u,d,c,h;switch(["M","L","C","S","Q","T"].includes(t.type)&&t.points&&t.points.forEach((function(t,i){i%2==0?e.push(t):n.push(t)})),t.type){case"A":7==(null===(r=t.points)||void 0===r?void 0:r.length)&&(i.push(t.points[5]),o.push(t.points[6]));break;case"H":(null===(a=t.points)||void 0===a?void 0:a.length)&&(e.push(t.points[0]),i.push(t.points[0]));break;case"V":(null===(s=t.points)||void 0===s?void 0:s.length)&&(n.push(t.points[0]),o.push(t.points[0]));break;case"a":if(7==(null===(l=t.points)||void 0===l?void 0:l.length)){var f=e[e.length-1];e.push(f+t.points[5]),i.push(f+t.points[5]);var v=n[n.length-1];n.push(v+t.points[6]),o.push(v+t.points[6])}break;case"h":if(null===(u=t.points)||void 0===u?void 0:u.length){var p=e[e.length-1];e.push(p+t.points[0]),i.push(p+t.points[0])}break;case"v":(null===(d=t.points)||void 0===d?void 0:d.length)&&(p=n[n.length-1],n.push(p+t.points[0]),o.push(p+t.points[0]));break;case"M":case"L":case"C":case"S":case"Q":case"T":null===(c=t.points)||void 0===c||c.forEach((function(t,e){e%2==0?i.push(t):o.push(t)}));break;case"m":case"l":case"c":case"s":case"q":case"t":null===(h=t.points)||void 0===h||h.forEach((function(t,r){if(r%2==0){var a=e[e.length-1];e.push(a+t),i.push(a+t)}else a=n[n.length-1],n.push(a+t),o.push(a+t)}))}})),{minX:Math.min.apply(null,i),minY:Math.min.apply(null,o),maxX:Math.max.apply(null,i),maxY:Math.max.apply(null,o)}},ei=function(t,e){return e.map((function(e){var n,i,o,r,a,s,l,u,d=[];switch(e.type){case"a":7==(null===(n=e.points)||void 0===n?void 0:n.length)&&d.push([Jn(e.points[0]/t.width,1e6),Jn(e.points[1]/t.height,1e6),e.points[2],e.points[3],e.points[4],Jn(e.points[5]/t.width,1e6),Jn(e.points[6]/t.height,1e6)]);break;case"A":7==(null===(i=e.points)||void 0===i?void 0:i.length)&&d.push([Jn(e.points[0]/t.width,1e6),Jn(e.points[1]/t.height,1e6),e.points[2],e.points[3],e.points[4],Jn((e.points[5]-t.x)/t.width,1e6),Jn((e.points[6]-t.y)/t.height,1e6)]);break;case"h":(null===(o=e.points)||void 0===o?void 0:o.length)&&d.push([Jn(e.points[0]/t.width,1e6)]);break;case"H":(null===(r=e.points)||void 0===r?void 0:r.length)&&d.push([Jn((e.points[0]-t.x)/t.width,1e6)]);break;case"v":(null===(a=e.points)||void 0===a?void 0:a.length)&&d.push([Jn(e.points[0]/t.height,1e6)]);break;case"V":(null===(s=e.points)||void 0===s?void 0:s.length)&&d.push([Jn((e.points[0]-t.y)/t.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":if(null===(l=e.points)||void 0===l?void 0:l.length)for(var c=0,h=e.points.length-1;c<h;c+=2)d.push([Jn((e.points[c]-t.x)/t.width,1e6),Jn((e.points[c+1]-t.y)/t.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":if(null===(u=e.points)||void 0===u?void 0:u.length)for(c=0,h=e.points.length-1;c<h;c+=2)d.push([Jn(e.points[c]/t.width,1e6),Jn(e.points[c+1]/t.height,1e6)])}return d.length?{type:e.type,ratios:d}:{type:e.type}}))},ni=function(t,e){return e.map((function(e){var n,i,o,r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w,_,x,S,k,E,O,j,z,I;switch(e.type){case"a":return"".concat(e.type).concat(null!==(r=null===(o=null===(i=null===(n=e.ratios)||void 0===n?void 0:n.map((function(e){var n,i,o,r,a,s,l;return[Jn(t.width*(null!==(n=e[0])&&void 0!==n?n:0),1e6),Jn(t.height*(null!==(i=e[1])&&void 0!==i?i:0),1e6),null!==(o=e[2])&&void 0!==o?o:0,null!==(r=e[3])&&void 0!==r?r:0,null!==(a=e[4])&&void 0!==a?a:0,Jn(t.width*(null!==(s=e[5])&&void 0!==s?s:0),1e6),Jn(t.height*(null!==(l=e[6])&&void 0!==l?l:0),1e6)]})))||void 0===i?void 0:i.map((function(t){return t.join(" ")})))||void 0===o?void 0:o.join(" "))&&void 0!==r?r:"");case"A":return"".concat(e.type).concat(null!==(u=null===(l=null===(s=null===(a=e.ratios)||void 0===a?void 0:a.map((function(e){var n,i,o,r,a,s,l;return[Jn(t.width*(null!==(n=e[0])&&void 0!==n?n:0),1e6),Jn(t.height*(null!==(i=e[1])&&void 0!==i?i:0),1e6),null!==(o=e[2])&&void 0!==o?o:0,null!==(r=e[3])&&void 0!==r?r:0,null!==(a=e[4])&&void 0!==a?a:0,Jn(t.x+t.width*(null!==(s=e[5])&&void 0!==s?s:0),1e6),Jn(t.y+t.height*(null!==(l=e[6])&&void 0!==l?l:0),1e6)]})))||void 0===s?void 0:s.map((function(t){return t.join(" ")})))||void 0===l?void 0:l.join(" "))&&void 0!==u?u:"");case"h":return"".concat(e.type).concat(null!==(h=null===(c=null===(d=e.ratios)||void 0===d?void 0:d.map((function(e){var n;return Jn(t.width*(null!==(n=e[0])&&void 0!==n?n:0),1e6)})))||void 0===c?void 0:c.join(" "))&&void 0!==h?h:"");case"H":return"".concat(e.type).concat(null!==(p=null===(v=null===(f=e.ratios)||void 0===f?void 0:f.map((function(e){var n;return Jn(t.x+t.width*(null!==(n=e[0])&&void 0!==n?n:0),1e6)})))||void 0===v?void 0:v.join(" "))&&void 0!==p?p:"");case"v":return"".concat(e.type).concat(null!==(m=null===(g=null===(y=e.ratios)||void 0===y?void 0:y.map((function(e){var n;return Jn(t.height*(null!==(n=e[0])&&void 0!==n?n:0),1e6)})))||void 0===g?void 0:g.join(" "))&&void 0!==m?m:"");case"V":return"".concat(e.type).concat(null!==(_=null===(w=null===(b=e.ratios)||void 0===b?void 0:b.map((function(e){var n;return Jn(t.y+t.height*(null!==(n=e[0])&&void 0!==n?n:0),1e6)})))||void 0===w?void 0:w.join(" "))&&void 0!==_?_:"");case"z":case"Z":return e.type;case"M":case"L":case"C":case"S":case"Q":case"T":return"".concat(e.type).concat(null!==(E=null===(k=null===(S=null===(x=e.ratios)||void 0===x?void 0:x.map((function(e){var n,i;return[Jn(t.x+t.width*(null!==(n=e[0])&&void 0!==n?n:0),1e6),Jn(t.y+t.height*(null!==(i=e[1])&&void 0!==i?i:0),1e6)]})))||void 0===S?void 0:S.map((function(t){return t.join(" ")})))||void 0===k?void 0:k.join(" "))&&void 0!==E?E:"");case"m":case"l":case"c":case"s":case"q":case"t":return"".concat(e.type).concat(null!==(I=null===(z=null===(j=null===(O=e.ratios)||void 0===O?void 0:O.map((function(e){var n,i;return[Jn(t.width*(null!==(n=e[0])&&void 0!==n?n:0),1e6),Jn(t.height*(null!==(i=e[1])&&void 0!==i?i:0),1e6)]})))||void 0===j?void 0:j.map((function(t){return t.join(" ")})))||void 0===z?void 0:z.join(" "))&&void 0!==I?I:"");default:return""}})).join("")},ii=function(t,e){return e.map((function(e){return[Jn(t.x+t.width*e[0],1e6),Jn(t.y+t.height*e[1],1e6)]})).map((function(t){return t.join(" ")})).join(" ")},oi=function(t,e,n,i,o){var r={x:Math.min(t,n),y:Math.min(e,i),width:Math.abs(n-t)||1,height:Math.abs(i-e)||1};return(null==o?void 0:o.ratio)&&(r.width<=r.height?r.height=r.width*(null==o?void 0:o.ratio):r.width=r.height/(null==o?void 0:o.ratio)),Object.assign(r,{ratios:(null==o?void 0:o.ratios)||[[(t-r.x)/(r.width||1),(e-r.y)/(r.height||1)],[(n-r.x)/(r.width||1),(i-r.y)/(r.height||1)]]}),(null==o?void 0:o.points)&&(r.points=null==o?void 0:o.points),r},ri=function(t,e,n){var i,o=function(){var i,o,r,a,s,l;switch(t){case 1:return{cx:e.x+e.width/2,cy:e.y+e.height/2,r:Math.min(e.width/2,e.height/2)};case 2:return{cx:e.x+e.width/2,cy:e.y+e.height/2,rx:e.width/2,ry:e.height/2};case 5:var u={};return null===(i=e.ratios)||void 0===i||i.forEach((function(t,n){u["x".concat(n+1)]=e.x+e.width*t[0],u["y".concat(n+1)]=e.y+e.height*t[1]})),u;case 3:case 6:case 9:return{x:e.x,y:e.y,width:e.width,height:e.height};case 7:case Fn:return{x:e.x,y:e.y+(n.alignmentBaseline||n.dominantBaseline?0:null!==(o=n.fontSize)&&void 0!==o?o:16)};case 4:case 11:if(null===(r=e.ratios)||void 0===r?void 0:r.length)return{points:ii(e,e.ratios)};break;case 8:if(null===(a=e.ratioMaps)||void 0===a?void 0:a.length)return{d:ni(e,e.ratioMaps)};if(null===(s=e.points)||void 0===s?void 0:s.length)return l=e.points,{d:"M ".concat(l[0][0]," ").concat(l[0][1]," L ").concat((l.map((function(t){return[t[0],t[1]]}))||[]).map((function(t){return t.join(" ")})).join(" "))}}return{}}();return e.rotate?(o.transform="rotate(".concat(e.rotate,")"),o.transformOrigin="".concat(e.x+e.width/2," ").concat(e.y+e.height/2)):(null===(i=n.transform)||void 0===i?void 0:i.match(/^rotate/))&&(n.transform=null,n.transformOrigin=null),o},ai=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.fill,stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth};return Object.assign(o,ri(3,i,o)),{nodeId:t,element:Xi(t,3,"rect",{size:i,attribute:o},n),size:i,attribute:o}},si=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{preserveAspectRatio:"none"};Object.assign(o,ri(9,i,o));var r=(null==e?void 0:e.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:t,element:Xi(t,9,"image",{size:i,attribute:o,source:r},n),size:i,attribute:o,source:r}},li=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.fill,stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth};return Object.assign(o,ri(1,i,o)),{nodeId:t,element:Xi(t,1,"circle",{size:i,attribute:o},n),size:i,attribute:o}},ui=function(t,e,n){var i;if(e.value){var o=jQuery("#"+t).parents("g");if(o.length){var r=e.node.size;o.css("transform-origin","".concat(r.x+r.width/2,"px ").concat(r.y+r.height/2,"px"));var a,s,l,u=null!==(i=e.iteration)&&void 0!==i?i:0,d=[];(e.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?d.push(e.value):e.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(e.value)?(d.push("animation"),d.push("animation-".concat(e.value))):(d.push("animate__animated"),d.push("animate__".concat(e.value))):(d.push("animation"),d.push("animation-fadein")),u<0?(d.push("animation-iteration-infinite"),n(),n=function(){}):u>0&&d.push("animation-iteration-"+(u+1)),a=d.join(" "),s=function(){var i;di(t),(u>0||u<0)&&o.one("animationiteration",(function(){e.slideStatus===Ui.slideStatus||(o.data("animate-running",!1),di(t),e.slideStatus===Ui.slideStatus&&n())})),o.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){var i;switch(o.data("animate-running",!1),di(t),e.finish){default:case 0:case 1:break;case 2:ui(t,{node:e.node,value:null===(i=e.node.animate)||void 0===i?void 0:i.out,nodeStatus:e.nodeStatus,slideStatus:e.slideStatus},(function(){o.addClass("hide")}))}e.slideStatus===Ui.slideStatus&&n()})),o.attr("data-class",null!==(i=o.attr("class"))&&void 0!==i?i:""),o.addClass(a),o.data("animate-running",!0)},l=function(){o.data("animate-running")?o.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){o.data("animate-running",!1),setTimeout((function(){s()}),100)})):s()},o.hasClass("animation")?setTimeout((function(){l()})):l()}else n()}else n()},di=function(t){var e,n,i=jQuery("#"+t).parents("g"),o=null===(e=i.attr("class"))||void 0===e?void 0:e.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),r=null===(n=i.attr("class"))||void 0===n?void 0:n.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);o&&o.forEach((function(t){jQuery(i).removeClass(t)})),r&&r.forEach((function(t){jQuery(i).removeClass(t)}));var a=i.attr("data-class");a&&(i.attr("class",a),i.removeAttr("data-class")),jQuery(i).data("animation-running",!1)},ci=function(t,e,n){var i;if(e.value){var o=jQuery("#"+t).parents("g");if(o.length){var r=e.node.size;o.css("transform-origin","".concat(r.x+r.width/2,"px ").concat(r.y+r.height/2,"px"));var a,s,l,u=null!==(i=e.iteration)&&void 0!==i?i:0,d=[];(e.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?d.push(e.value):(d.push("animation"),e.value?d.push("animation-"+e.value):d.push("animation-fadein")),u<0?(d.push("animation-iteration-infinite"),n(),n=function(){}):u>0&&d.push("animation-iteration-"+(u+1)),a=d.join(" "),s=function(){var i;hi(t),(u>0||u<0)&&o.one("animationiteration",(function(){e.slideStatus===Ui.slideStatus||(o.data("animate-running",!1),hi(t),e.slideStatus===Ui.slideStatus&&n())})),o.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){var i;switch(o.data("animate-running",!1),hi(t),e.finish){default:case 0:case 1:break;case 2:ui(t,{node:e.node,value:null===(i=e.node.animate)||void 0===i?void 0:i.out,nodeStatus:e.nodeStatus,slideStatus:e.slideStatus},(function(){o.addClass("hide")}))}e.slideStatus===Ui.slideStatus&&n()})),o.attr("data-class",null!==(i=o.attr("class"))&&void 0!==i?i:""),o.addClass(a),o.data("animate-running",!0)},l=function(){o.data("animate-running")?o.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){o.data("animate-running",!1),setTimeout((function(){s()}),100)})):s()},o.hasClass("animation")?setTimeout((function(){l()})):l()}else n()}else n()},hi=function(t){var e,n=jQuery("#"+t).parents("g"),i=null===(e=n.attr("class"))||void 0===e?void 0:e.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);i&&i.forEach((function(t){jQuery(n).removeClass(t)}));var o=n.attr("data-class");o&&(n.attr("class",o),n.removeAttr("data-class")),jQuery(n).data("animation-running",!1)};function fi(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))}function vi(t,e){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function pi(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var yi=function(t,e,n){var i;if(e.points&&e.points.length){var o=jQuery("#"+t),r=function(t){var e=[];2===t.length&&t.splice(1,0,[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]);for(var n,i,o,r=1,a=t.length;r<a;){if(n=t[r-1],i=t[r],o=t[r+1],(Math.abs(n[0]-i[0])>=15||Math.abs(n[1]-i[1])>=15)&&Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2)>=Math.pow(15,2)&&o&&(Math.abs(n[0]-o[0])<=20||Math.abs(n[1]-o[1])<=20)&&Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)<=Math.pow(20,2))e.push(i);else for(var s=i[0]-n[0],l=i[1]-n[1],u=Math.max(Math.abs(s),Math.abs(l)),d=0;d<u;d+=15)e.push([n[0]+s*d/u,n[1]+l*d/u]);r++}return a>0&&(e.splice(0,0,t[0]),e.push(t[a-1])),e}(function(t){if(1==t.length){var n=e.node.size;return pi([[n.x+n.width/2,n.y+n.height/2]],t,!0)}return pi([],t,!0)}(e.points||[])),a=null!==(i=e.iteration)&&void 0!==i?i:0;if(a<0&&(n(),n=function(){}),!(o.data("work-running")&&a<0)){o.data("work-running",!0);var s,l=r.length,u=Math.max(20,1e3*(e.time||3)/l),d=Ui.findNode(t),c=d.id,h=d.type,f=d.size,v=d.attribute,p=function(t){var i;if(e.slideStatus!==Ui.slideStatus)return o.data("work-running",!1),void(e.slideStatus===Ui.slideStatus&&n());if(t<l){var d=r[t];d&&(s=Object.assign({},f,{x:d[0]-f.width/2,y:d[1]-f.height/2}),Object.assign(v,ri(h,s,v)),Hi(window.document.getElementById(c),v),setTimeout((function(){p(++t)}),u))}else if(a>0)a--,p(1);else if(a<0)p(1);else switch(o.data("work-running",!1),e.slideStatus===Ui.slideStatus&&n(),e.finish){default:case 0:break;case 1:Object.assign(v,ri(h,f,v)),Hi(window.document.getElementById(c),v);break;case 2:ui(e.node.id,{node:e.node,value:null===(i=e.node.animate)||void 0===i?void 0:i.out,nodeStatus:e.nodeStatus,slideStatus:e.slideStatus},(function(){o.addClass("hide")}))}};p(1)}}else n()},gi=function(t,e,n,i,o){var r,a,s,l,u,d,c;if(i.slideStatus!=Ui.slideStatus)return e.async&&"change-slide"!=e.async?void 0:void o();if(i.nodeStatus==Ui.nodeStatus||e.async&&"change-node"!=e.async){if(!(null===(r=e.source)||void 0===r?void 0:r.path)&&!(null===(a=e.source)||void 0===a?void 0:a.url))return console.warn("".concat(t," -> audio no source!")),o(),void(o=function(){});var h=jQuery("#"+t),f=null!==(s=e.iteration)&&void 0!==s?s:0;if(f<0&&(o(),o=function(){}),!(h.data("audio-running")&&f<0)){h.data("audio-running",!0);var v=function(t){t.pause(),t.remove(),h.data("audio-running",!1)},p=new Audio;return p.autoplay=!0,p.loop=0!=f,p.preload="auto",p.controls=!0,p.setAttributeNode(document.createAttribute("playsinline")),p.addEventListener("canplay",(function(){var t=p.play();t&&t.then((function(t){var n;h.data("audio-running",!0),"time"==e.async?setTimeout((function(){i.slideStatus===Ui.slideStatus&&(v(p),o(),o=function(){})}),1e3*(null!==(n=e.time)&&void 0!==n?n:1)):"non-stop"==e.async&&(o(),o=function(){})})).catch((function(t){h.data("audio-running",!1),i.slideStatus===Ui.slideStatus&&(o(),o=function(){})}))})),p.addEventListener("timeupdate",(function(){switch(e.async){case"time":case"change-slide":i.slideStatus!==Ui.slideStatus&&(v(this),o(),o=function(){});break;case"finish-action":n.total>=2&&n.total-n.counter==1&&(v(this),o(),o=function(){});break;default:case"change-node":i.nodeStatus!==Ui.nodeStatus&&(v(this),o(),o=function(){});case"non-stop":}})),p.addEventListener("canplaythrough",(function(){this.loop&&(f>0?f--:0==f&&(this.loop=!1))})),p.addEventListener("play",(function(){})),p.addEventListener("pause",(function(){})),p.addEventListener("ended",(function(){this.remove(),h.data("audio-running",!1),i.slideStatus===Ui.slideStatus&&(o(),o=function(){})})),p.onerror=function(){this.remove(),h.data("audio-running",!1),i.slideStatus===Ui.slideStatus&&(o(),o=function(){})},p.src=((null===(l=e.source)||void 0===l?void 0:l.path)?(null===(u=yr.config)||void 0===u?void 0:u.readfileuploadurl)+(null===(d=e.source)||void 0===d?void 0:d.path):null===(c=e.source)||void 0===c?void 0:c.url)||"",p}}else o()},mi=function(t){t.id?jQuery("#"+t.id).removeClass("hide"):t.ids&&t.ids.forEach((function(t){jQuery("#"+t).removeClass("hide")}))},bi=function(t){t.id?(jQuery("#"+t.id).removeClass("hide"),_i(Ui.findNode(t.id),t.nodeStatus,t.slideStatus)):t.ids&&t.ids.forEach((function(e){jQuery("#"+e).removeClass("hide"),_i(Ui.findNode(e),t.nodeStatus,t.slideStatus)}))},wi=function(t){var e;if(t.id){var n=Ui.findNode(t.id);ui(t.id,{node:n,value:null===(e=n.animate)||void 0===e?void 0:e.out,nodeStatus:t.nodeStatus,slideStatus:t.slideStatus},(function(){jQuery("#"+t.id).addClass("hide")}))}else t.ids&&t.ids.forEach((function(e){var n,i=Ui.findNode(e);ui(e,{node:i,value:null===(n=i.animate)||void 0===n?void 0:n.out,nodeStatus:t.nodeStatus,slideStatus:t.slideStatus},(function(){jQuery("#"+e).addClass("hide")}))}))},_i=function(t,e,n,i){var o,r,a,s,l,u,d={total:0,counter:0},c=null!==(r=null===(o=t.interactive)||void 0===o?void 0:o.click)&&void 0!==r?r:{},h=c.triggershow,f=c.triggerrun,v=c.triggerhide,p=c.action,y=c.audio,g=c.slide,m=c.media;if(console.log("node(".concat(t.id,") | nodeStatus(").concat(e,") | slideStatus(").concat(n,") | click")),h){var b=h.id,w=h.ids,_=h.time;"asynctrue"==(k=h.async)?mi({id:b,ids:w,nodeStatus:e,slideStatus:n}):"time"==k&&setTimeout((function(){mi({id:b,ids:w,nodeStatus:e,slideStatus:n})}),1e3*(null!=_?_:0))}if(f){var x=f.id,S=f.ids;_=f.time,"asynctrue"==(k=f.async)?bi({id:x,ids:S,nodeStatus:e,slideStatus:n}):"time"==k&&setTimeout((function(){bi({id:x,ids:S,nodeStatus:e,slideStatus:n})}),1e3*(null!=_?_:0))}if(v){var k,E=v.id,O=v.ids;_=v.time,"asynctrue"==(k=v.async)?wi({id:E,ids:O,nodeStatus:e,slideStatus:n}):"time"==k&&setTimeout((function(){wi({id:E,ids:O,nodeStatus:e,slideStatus:n})}),1e3*(null!=_?_:0))}var j=function(){setTimeout((function(){if(d.counter>=d.total){if(h){var t=h.id,i=h.ids;(o=h.async)&&"asyncfalse"!=o||mi({id:t,ids:i,nodeStatus:e,slideStatus:n})}var o;if(f&&(t=f.id,i=f.ids,(o=f.async)&&"asyncfalse"!=o||bi({id:t,ids:i,nodeStatus:e,slideStatus:n})),v)t=v.id,i=v.ids,(o=v.async)&&"asyncfalse"!=o||wi({id:t,ids:i,nodeStatus:e,slideStatus:n})}}))};if(null==p?void 0:p.value){d.total+=1;var z=function(){d.counter+=1,j()};switch(null==p?void 0:p.value){case"hide":ui(t.id,{node:t,value:null===(a=t.animate)||void 0===a?void 0:a.out,nodeStatus:e,slideStatus:n},(function(){jQuery("#"+t.id).addClass("hide"),z()}));break;case"points":var I=p.points,N=(_=p.time,p.iteration),T=p.finish;I&&yi(t.id,{node:t,points:I,time:_,iteration:N,finish:T,nodeStatus:e,slideStatus:n},z);break;default:var M=p.value;_=p.time,N=p.iteration,T=p.finish,ci(t.id,{node:t,value:M,time:_,iteration:N,finish:T,nodeStatus:e,slideStatus:n},z)}}if((null===(s=null==y?void 0:y.source)||void 0===s?void 0:s.path)&&(d.total+=1,gi(t.id,y,d,{nodeStatus:e,slideStatus:n},(function(){d.counter+=1,j()}))),d.total||j(),null==g?void 0:g.id)switch(g.id){case-1:Ui.runSlide(Ui.slideIdx-1);break;case-2:Ui.runSlide(Ui.slideIdx+1);break;default:Ui.runSlide(void 0,g.id,null===(l=g.code)||void 0===l?void 0:l.toString())}if(null==m?void 0:m.type){var A=$n({readfileuploadurl:null===(u=yr.config)||void 0===u?void 0:u.readfileuploadurl,type:null==m?void 0:m.type,oss:null==m?void 0:m.oss,path:null==m?void 0:m.path,url:null==m?void 0:m.url}),C='<div class="popup-media-viewer"><iframe src="'.concat(A,'" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>'),P=jQuery(C).appendTo(window.document.body);P.find(".btn-close").click((function(t){t.preventDefault(),P.remove()}))}},xi=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:320,height:80},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.stroke,fontFamily:yr.attribute.fontFamily,fontSize:yr.attribute.fontSize,textLength:yr.attribute.textLength};Object.assign(o,ri(7,i,o));var r=(null==e?void 0:e.source)||{type:"text",text:{textContent:""}};return{nodeId:t,element:Xi(t,7,"text",{size:i,attribute:o,source:r},n),size:i,attribute:o,source:r}},Si=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{};return Object.assign(o,ri(0,i,o)),{nodeId:t,element:Xi(t,0,"g",{size:i,attribute:o},n),size:i,attribute:o}},ki=function(t,e,n){var i,o,r,a,s=1,l=new Image;l.onload=function(){var t,i,o,r,a,u,d,c,h,f,v,p,y,g,m=0,b=0;(s=Jn(l.naturalWidth/l.naturalHeight,100))>=1?b=(m=Math.min(l.naturalWidth,null!==(o=null===(i=null===(t=Ui.slide.svg)||void 0===t?void 0:t.viewBox)||void 0===i?void 0:i.width)&&void 0!==o?o:0))/s:m=(b=Math.min(l.naturalHeight,null!==(u=null===(a=null===(r=Ui.slide.svg)||void 0===r?void 0:r.viewBox)||void 0===a?void 0:a.height)&&void 0!==u?u:0))/s,y=((null!==(h=null===(c=null===(d=Ui.slide.svg)||void 0===d?void 0:d.viewBox)||void 0===c?void 0:c.width)&&void 0!==h?h:0)-m)/2,g=((null!==(p=null===(v=null===(f=Ui.slide.svg)||void 0===f?void 0:f.viewBox)||void 0===v?void 0:v.height)&&void 0!==p?p:0)-b)/2,e.size={x:y,y:g,width:m,height:b},Ei(e,n)},l.onerror=function(t){console.error("ImgSrc load failed -> ".concat(JSON.stringify(e.source)),t)},l.src=((null===(i=e.source)||void 0===i?void 0:i.path)?(null===(o=yr.config)||void 0===o?void 0:o.readfileuploadurl)+(null===(r=e.source)||void 0===r?void 0:r.path):null===(a=e.source)||void 0===a?void 0:a.url)||""},Ei=function(t,e){if(t.slideStatus==Ui.slideStatus){var n=si(Math.ceil(1e9*Math.random()),{size:t.size,source:{type:"image",image:null==t?void 0:t.source}}).element;setTimeout((function(){null==n||n.remove(),e()}),3e3)}else e()},Oi=function(t,e,n){var i,o,r,a,s=new Image;s.onload=function(){ji(t,{width:s.naturalWidth,height:s.naturalHeight},e,n)},s.onerror=function(t){console.error("ImgSrc load failed -> ".concat(JSON.stringify(e.source)),t),n()},s.src=((null===(i=e.source)||void 0===i?void 0:i.path)?(null===(o=yr.config)||void 0===o?void 0:o.readfileuploadurl)+(null===(r=e.source)||void 0===r?void 0:r.path):null===(a=e.source)||void 0===a?void 0:a.url)||""},ji=function(t,e,n,i){if(n.slideStatus==Ui.slideStatus){var o,r,a=Jn(e.width/e.height,100),s=0,l=0;a>=1?(s=e.width,s=Math.max(s,40),l=(s=Math.min(s,40))/a):(l=e.height,l=Math.max(l,40),s=(l=Math.min(l,40))/a);var u=t.size;o=u.x+u.width-s/2,r=u.y-l/2;var d=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);si("icon-".concat(t.id),{size:{x:o,y:r,width:s,height:l},source:{type:"image",image:null==n?void 0:n.source}},d).element,setTimeout((function(){i()}),3e3)}else i()},zi=function(t,e,n){var i,o,r,a,s,l,u;if(e.slideStatus==Ui.slideStatus){if(!(null===(i=e.source)||void 0===i?void 0:i.path)&&!(null===(o=e.source)||void 0===o?void 0:o.url))return console.warn("".concat(t.id," -> audio no source!")),void n();var d=jQuery("#"+t.id),c=null!==(r=e.iteration)&&void 0!==r?r:0;if(c<0&&(n(),n=function(){}),!(d.data("audio-running")&&c<0)){d.data("audio-running",!0);var h=new Audio;return h.autoplay=!0,h.loop=0!=c,h.preload="auto",h.controls=!0,h.setAttributeNode(document.createAttribute("playsinline")),h.addEventListener("canplay",(function(){var t=h.play();t&&t.then((function(t){d.data("audio-running",!0)})).catch((function(t){d.data("audio-running",!1),e.slideStatus===Ui.slideStatus&&n()}))})),h.addEventListener("timeupdate",(function(){e.slideStatus!==Ui.slideStatus&&function(t){t.pause(),t.remove(),d.data("audio-running",!1)}(this)})),h.addEventListener("canplaythrough",(function(){this.loop&&(c>0?c--:0==c&&(this.loop=!1))})),h.addEventListener("play",(function(){})),h.addEventListener("pause",(function(){})),h.addEventListener("ended",(function(){this.remove(),d.data("audio-running",!1),e.slideStatus===Ui.slideStatus&&n()})),h.onerror=function(){this.remove(),d.data("audio-running",!1),e.slideStatus===Ui.slideStatus&&n()},h.src=((null===(a=e.source)||void 0===a?void 0:a.path)?(null===(s=yr.config)||void 0===s?void 0:s.readfileuploadurl)+(null===(l=e.source)||void 0===l?void 0:l.path):null===(u=e.source)||void 0===u?void 0:u.url)||"",h}}else n()},Ii=function(t){return Ni(null==t?void 0:t.url,null==t?void 0:t.path,null==t?void 0:t.src,null==t?void 0:t.name)},Ni=function(t,e,n,i){var o,r,a,s,l;return t&&(a=t.replace(/\\/g,"/")),e&&(s=e.replace(/\\/g,"/")),n&&(l=n.replace(/\\/g,"/")),s&&!a&&(a=(null===(o=yr.config)||void 0===o?void 0:o.readfileuploadurl)+s),!l||s||a||(s=l.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),a=(null===(r=yr.config)||void 0===r?void 0:r.readfileuploadurl)+s),{url:a,path:s,name:i||(null!=a?a:"").split("/").pop()||(null!=s?s:"").split("/").pop()||""}},Ti=function(t,e){var n,i,o;null===(o=null===(i=null===(n=e.test)||void 0===n?void 0:n.answer)||void 0===i?void 0:i.matching)||void 0===o||o.filter((function(e){return e.id==t.id})).forEach((function(t){return t.value=""})),jQuery("#node-".concat(t.id)).remove()},Mi=function(t,e,n,i,o,r){var a,s,l,u,d,c,h,f,v,p,y,g;o.iscorrect?((null===(s=null===(a=e.test)||void 0===a?void 0:a.audiotrue)||void 0===s?void 0:s.path)&&zi(t,{source:Ii(null===(l=e.test)||void 0===l?void 0:l.audiotrue),iteration:0,nodeStatus:n,slideStatus:i},r),(null===(d=null===(u=e.test)||void 0===u?void 0:u.effecttrue)||void 0===d?void 0:d.path)&&ki(0,{source:Ii(null===(c=e.test)||void 0===c?void 0:c.effecttrue),iteration:0,nodeStatus:n,slideStatus:i},r)):((null===(f=null===(h=e.test)||void 0===h?void 0:h.audiofalse)||void 0===f?void 0:f.path)&&zi(t,{source:Ii(null===(v=e.test)||void 0===v?void 0:v.audiofalse),iteration:0,nodeStatus:n,slideStatus:i},r),(null===(y=null===(p=e.test)||void 0===p?void 0:p.effectfalse)||void 0===y?void 0:y.path)&&ki(0,{source:Ii(null===(g=e.test)||void 0===g?void 0:g.effectfalse),iteration:0,nodeStatus:n,slideStatus:i},r)),Ai(e,n,i,r)},Ai=function(t,e,n,i){var o,r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w,_,x,S,k,E,O,j,z,I,N,T;switch(null===(o=t.test)||void 0===o?void 0:o.type){case"truefalse":var M=null!==(s=null===(a=null===(r=null==t?void 0:t.test)||void 0===r?void 0:r.answer)||void 0===a?void 0:a.truefalse)&&void 0!==s?s:{},A=M.value,C=M.iscorrect;if(A){var P=Ui.findNode(A);C?(null===(u=null===(l=t.test)||void 0===l?void 0:l.icontrue)||void 0===u?void 0:u.path)&&Oi(P,{source:Ii(null===(d=t.test)||void 0===d?void 0:d.icontrue),iteration:0,nodeStatus:e,slideStatus:n},i):(null===(h=null===(c=t.test)||void 0===c?void 0:c.iconfalse)||void 0===h?void 0:h.path)&&Oi(P,{source:Ii(null===(f=t.test)||void 0===f?void 0:f.iconfalse),iteration:0,nodeStatus:e,slideStatus:n},i)}break;case"singlechoice":var R=null!==(y=null===(p=null===(v=null==t?void 0:t.test)||void 0===v?void 0:v.answer)||void 0===p?void 0:p.singlechoice)&&void 0!==y?y:{};A=R.value,C=R.iscorrect,A&&(P=Ui.findNode(A),C?(null===(m=null===(g=t.test)||void 0===g?void 0:g.icontrue)||void 0===m?void 0:m.path)&&Oi(P,{source:Ii(null===(b=t.test)||void 0===b?void 0:b.icontrue),iteration:0,nodeStatus:e,slideStatus:n},i):(null===(_=null===(w=t.test)||void 0===w?void 0:w.iconfalse)||void 0===_?void 0:_.path)&&Oi(P,{source:Ii(null===(x=t.test)||void 0===x?void 0:x.iconfalse),iteration:0,nodeStatus:e,slideStatus:n},i));break;case"multichoice":null===(E=null===(k=null===(S=null==t?void 0:t.test)||void 0===S?void 0:S.answer)||void 0===k?void 0:k.multichoice)||void 0===E||E.forEach((function(o){var r,a,s,l,u,d,c=o.value,h=o.iscorrect;if(c){var f=Ui.findNode(c);h?(null===(a=null===(r=t.test)||void 0===r?void 0:r.icontrue)||void 0===a?void 0:a.path)&&Oi(f,{source:Ii(null===(s=t.test)||void 0===s?void 0:s.icontrue),iteration:0,nodeStatus:e,slideStatus:n},i):(null===(u=null===(l=t.test)||void 0===l?void 0:l.iconfalse)||void 0===u?void 0:u.path)&&Oi(f,{source:Ii(null===(d=t.test)||void 0===d?void 0:d.iconfalse),iteration:0,nodeStatus:e,slideStatus:n},i)}}));break;case"fill":null===(z=null===(j=null===(O=null==t?void 0:t.test)||void 0===O?void 0:O.answer)||void 0===j?void 0:j.fill)||void 0===z||z.forEach((function(o){var r,a,s,l,u,d,c=o.id;o.key;var h=o.value,f=o.iscorrect;if(h){var v=Ui.findNode(c);f?(null===(a=null===(r=t.test)||void 0===r?void 0:r.icontrue)||void 0===a?void 0:a.path)&&Oi(v,{source:Ii(null===(s=t.test)||void 0===s?void 0:s.icontrue),iteration:0,nodeStatus:e,slideStatus:n},i):(null===(u=null===(l=t.test)||void 0===l?void 0:l.iconfalse)||void 0===u?void 0:u.path)&&Oi(v,{source:Ii(null===(d=t.test)||void 0===d?void 0:d.iconfalse),iteration:0,nodeStatus:e,slideStatus:n},i)}}));break;case"matching":null===(T=null===(N=null===(I=null==t?void 0:t.test)||void 0===I?void 0:I.answer)||void 0===N?void 0:N.matching)||void 0===T||T.forEach((function(o){var r,a,s,l,u,d,c=o.id,h=o.key,f=o.value;if(f){var v=Ui.findNode(c);h==f?(null===(a=null===(r=t.test)||void 0===r?void 0:r.icontrue)||void 0===a?void 0:a.path)&&Oi(v,{source:Ii(null===(s=t.test)||void 0===s?void 0:s.icontrue),iteration:0,nodeStatus:e,slideStatus:n},i):(null===(u=null===(l=t.test)||void 0===l?void 0:l.iconfalse)||void 0===u?void 0:u.path)&&Oi(v,{source:Ii(null===(d=t.test)||void 0===d?void 0:d.iconfalse),iteration:0,nodeStatus:e,slideStatus:n},i)}}))}},Ci=function(t,e,n,i){var o,r,a,s,l,u,d,c,h,f;(null===(o=e.animate)||void 0===o?void 0:o.value)&&function(t,e,n){var i,o=(null!==(i=t.animate)&&void 0!==i?i:{}).value;ui(t.id,{node:t,value:o,nodeStatus:e,slideStatus:n},(function(){}))}(e,n.nodeStatus,n.slideStatus),(null===(r=e.interactive)||void 0===r?void 0:r.show)?(console.log("node(".concat(e.id,") | nodeStatus(").concat(n.nodeStatus,") | slideStatus(").concat(n.slideStatus,") | show")),function(t,e,n,i){var o,r,a,s={total:0,counter:0},l=null!==(r=null===(o=t.interactive)||void 0===o?void 0:o.show)&&void 0!==r?r:{},u=l.triggershow,d=l.triggerrun,c=l.triggerhide,h=l.action,f=l.audio;if(console.log("node(".concat(t.id,") | nodeStatus(").concat(e,") | slideStatus(").concat(n,") | show")),u){var v=u.id,p=u.ids,y=u.time;"asynctrue"==(b=u.async)?setTimeout((function(){mi({id:v,ids:p,nodeStatus:e,slideStatus:n})})):"time"==b&&setTimeout((function(){mi({id:v,ids:p,nodeStatus:e,slideStatus:n})}),1e3*(null!=y?y:0))}if(d){var g=d.id,m=d.ids;y=d.time,"asynctrue"==(b=d.async)?setTimeout((function(){bi({id:g,ids:m,nodeStatus:e,slideStatus:n})})):"time"==b&&setTimeout((function(){bi({id:g,ids:m,nodeStatus:e,slideStatus:n})}),1e3*(null!=y?y:0))}if(c){var b,w=c.id,_=c.ids;y=c.time,"asynctrue"==(b=c.async)?setTimeout((function(){wi({id:w,ids:_,nodeStatus:e,slideStatus:n})})):"time"==b&&setTimeout((function(){wi({id:w,ids:_,nodeStatus:e,slideStatus:n})}),1e3*(null!=y?y:0))}var x=function(){setTimeout((function(){if(s.counter>=s.total){if(i&&i(),u){var t=u.id,o=u.ids;(r=u.async)&&"asyncfalse"!=r||mi({id:t,ids:o,nodeStatus:e,slideStatus:n})}var r;d&&(t=d.id,o=d.ids,(r=d.async)&&"asyncfalse"!=r||bi({id:t,ids:o,nodeStatus:e,slideStatus:n})),c&&(t=c.id,o=c.ids,(r=c.async)&&"asyncfalse"!=r||wi({id:t,ids:o,nodeStatus:e,slideStatus:n}))}}))};if(null==h?void 0:h.value){s.total+=1;var S=function(){s.counter+=1,x()};switch(null==h?void 0:h.value){case"hide":jQuery("#"+t.id).addClass("hide"),S();break;case"points":var k=h.points,E=(y=h.time,h.iteration),O=h.finish;yi(t.id,{node:t,points:k,time:y,iteration:E,finish:O,nodeStatus:e,slideStatus:n},S);break;default:var j=h.value;y=h.time,E=h.iteration,O=h.finish,ci(t.id,{node:t,value:j,time:y,iteration:E,finish:O,nodeStatus:e,slideStatus:n},S)}}if(null===(a=null==f?void 0:f.source)||void 0===a?void 0:a.path){s.total+=1;var z=gi(t.id,f,s,{nodeStatus:e,slideStatus:n},(function(){s.counter+=1,x()}));-1==(null==f?void 0:f.iteration)&&jQuery("#"+t.id).click((function(t){t.preventDefault(),z&&(z.volume>=1?z.volume=0:z.volume=z.volume+.25),console.log(null==z?void 0:z.volume)}))}s.total||x()}(e,n.nodeStatus,n.slideStatus,i)):i&&i(),(null===(a=e.interactive)||void 0===a?void 0:a.click)&&(f=null===(s=e.interactive)||void 0===s?void 0:s.click,Object.keys(null!=f?f:{}).map((function(t){return f[t]?1:0})).includes(1)&&jQuery("#"+e.id).addClass("interactive-click"),jQuery("#"+e.id).click((function(t){t.preventDefault(),n.nodeStatus=Ui.refreshNodeStatus(),console.log("node(".concat(e.id,") | nodeStatus(").concat(n.nodeStatus,") | slideStatus(").concat(n.slideStatus,") | click")),_i(e,n.nodeStatus,n.slideStatus)}))),(null===(l=e.variable)||void 0===l?void 0:l.input)&&jQuery("#"+e.id).on("change","input,textarea",(function(n){n.preventDefault(),function(t,e,n){var i,o,r;yr.variable.setValue(null!==(r=null===(o=null===(i=e.variable)||void 0===i?void 0:i.input)||void 0===o?void 0:o.variable)&&void 0!==r?r:"",t),function(t){var e,n=function(t,e){null==t||t.forEach((function(t){switch(t.type){case 0:Si(t.id,{},e?window.document.getElementById(e):null),n(t.nodes,t.id);break;case 4:break;case 7:xi(t.id,{size:t.size,attribute:t.attribute,source:t.source},e?window.document.getElementById(e):null)}}))};n(null===(e=t.svg)||void 0===e?void 0:e.nodes)}(n)}(n.target.value,e,t)})),(null===(u=e.variable)||void 0===u?void 0:u.click)&&((null===(c=null===(d=e.variable)||void 0===d?void 0:d.click)||void 0===c?void 0:c.variable)&&jQuery("#"+e.id).addClass("variable-click"),jQuery("#"+e.id).click((function(n){n.preventDefault(),function(t,e){var n;yr.variable.setValueOperator(null===(n=t.variable)||void 0===n?void 0:n.click),function(t){var e,n=function(t,e){null==t||t.forEach((function(t){switch(t.type){case 0:Si(t.id,{},e?window.document.getElementById(e):null),n(t.nodes,t.id);break;case 4:break;case 7:xi(t.id,{size:t.size,attribute:t.attribute,source:t.source},e?window.document.getElementById(e):null)}}))};n(null===(e=t.svg)||void 0===e?void 0:e.nodes)}(e)}(e,t)}))),"test"==(null===(h=e.source)||void 0===h?void 0:h.type)&&function(t,e){var n,i,o,r=function(){};switch(null===(i=null===(n=t.source)||void 0===n?void 0:n.test)||void 0===i?void 0:i.type){case"truefalse":jQuery("#"+t.id).click((function(n){n.preventDefault();var i=Ui.nodeStatus,o=Ui.slideStatus;!function(t,e,n,i,o){var r,a,s,l,u=null===(s=null===(a=null===(r=t.source)||void 0===r?void 0:r.test)||void 0===a?void 0:a.truefalse)||void 0===s?void 0:s.iscorrect;e.test?e.test.answer?e.test.answer.truefalse={value:t.id,iscorrect:u}:e.test.answer={truefalse:{value:t.id,iscorrect:u}}:e.test={answer:{truefalse:{value:t.id,iscorrect:u}}},(null===(l=e.svg)||void 0===l?void 0:l.nodes.find((function(t){var e,n;return"submit"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||Mi(t,e,n,i,{iscorrect:u},o);var d=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(d,e,t)}(t,e,i,o,r)}));var a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(a,e,t);break;case"singlechoice":jQuery("#"+t.id).click((function(n){n.preventDefault();var i=Ui.nodeStatus,o=Ui.slideStatus;!function(t,e,n,i,o){var r,a,s,l,u=null===(s=null===(a=null===(r=t.source)||void 0===r?void 0:r.test)||void 0===a?void 0:a.singlechoice)||void 0===s?void 0:s.iscorrect;e.test?e.test.answer?e.test.answer.singlechoice={value:t.id,iscorrect:u}:e.test.answer={singlechoice:{value:t.id,iscorrect:u}}:e.test={answer:{singlechoice:{value:t.id,iscorrect:u}}},(null===(l=e.svg)||void 0===l?void 0:l.nodes.find((function(t){var e,n;return"submit"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||Mi(t,e,n,i,{iscorrect:u},o);var d=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(d,e,t)}(t,e,i,o,r)})),a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target),ao(a,e,t);break;case"multichoice":jQuery("#"+t.id).click((function(n){n.preventDefault();var i=Ui.nodeStatus,o=Ui.slideStatus;!function(t,e,n,i,o){var r,a,s,l,u=null===(s=null===(a=null===(r=t.source)||void 0===r?void 0:r.test)||void 0===a?void 0:a.multichoice)||void 0===s?void 0:s.iscorrect;e.test?e.test.answer?e.test.answer.multichoice?e.test.answer.multichoice.find((function(e){return e.value==t.id}))?e.test.answer.multichoice=e.test.answer.multichoice.filter((function(e){return e.value!=t.id})):e.test.answer.multichoice.push({value:t.id,iscorrect:u}):e.test.answer.multichoice=[{value:t.id,iscorrect:u}]:e.test.answer={multichoice:[{value:t.id,iscorrect:u}]}:e.test={answer:{multichoice:[{value:t.id,iscorrect:u}]}},(null===(l=e.svg)||void 0===l?void 0:l.nodes.find((function(t){var e,n;return"submit"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||Mi(t,e,n,i,{iscorrect:u},o);var d=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(d,e,t)}(t,e,i,o,r)})),a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target),ao(a,e,t);break;case"fill":jQuery("#"+t.id).on("keyup",'input[type="text"]',(function(t){var e,n=jQuery("<div/>").css({"font-size":jQuery(t.target).css("font-size"),visibility:"hidden",float:"left"}).text(t.target.value).appendTo(window.document.body);jQuery(t.target).css({width:(null!==(e=n.width())&&void 0!==e?e:0)+30})})).on("keypress",'input[type="text"]',(function(t){13===(t.keyCode||t.charCode||t.which)&&(t.preventDefault(),t.stopPropagation(),jQuery(t.target).blur())})).on("change",'input[type="text"]',(function(n){var i,o,a,s=null===(i=n.target)||void 0===i?void 0:i.getAttribute("data-key"),l=null===(a=null===(o=n.target)||void 0===o?void 0:o.value)||void 0===a?void 0:a.trim();jQuery("#"+t.id).find('input[type="text"][data-key="'.concat(s,'"]')).val(l);var u=Ui.nodeStatus,d=Ui.slideStatus;!function(t,e,n,i,o,r){var a,s,l,u,d,c,h=(null!==(u=null===(l=null===(s=null===(a=t.source)||void 0===a?void 0:a.test)||void 0===s?void 0:s.fill)||void 0===l?void 0:l.find((function(t){return t.key=="[[".concat(o.key,"]]")})))&&void 0!==u?u:{}).value,f=h&&h.map((function(t){return null==t?void 0:t.toLocaleLowerCase()})).includes(null===(d=o.value)||void 0===d?void 0:d.toLocaleLowerCase());o.iscorrect=f,e.test?e.test.answer?e.test.answer.fill?e.test.answer.fill.find((function(t){return t.key==o.key}))?e.test.answer.fill.filter((function(t){return t.key==o.key})).forEach((function(t){t.value=o.value,t.iscorrect=o.iscorrect})):e.test.answer.fill.push(o):e.test.answer.fill=[o]:e.test.answer={fill:[o]}:e.test={answer:{fill:[o]}};var v=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(v,e,t),(null===(c=e.svg)||void 0===c?void 0:c.nodes.find((function(t){var e,n;return"submit"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||Mi(t,e,n,i,{iscorrect:f},r)}(t,e,u,d,{id:t.id,key:s,value:l},r)})),(null===(o=e.test)||void 0===o?void 0:o.showselection)||jQuery("#"+t.id).addClass("hide-selection"),a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target),ao(a,e,t);break;case"matching-empty":jQuery("#"+t.id).on("touchmove",".ondrag-item",(function(t){t.preventDefault()})).kendoDraggable({filter:".ondrag-item",hint:function(e){var n=t.size.height/t.size.width;return'<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:'.concat(64,"px;height:").concat(64*n,'px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">').concat(e.prop("outerHTML"),"</div>").replace(/\s+/g," ")},dragstart:function(n){var i;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),(null===(i=e.test)||void 0===i?void 0:i.showselection)||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),Ti(t,e)},drag:function(t){},dragend:function(t){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery("#".concat(t.id," .ondrop-here")).kendoDropTarget({dragenter:function(t){t.dropTarget.hasClass("actived")&&t.dropTarget.addClass("focused")},dragleave:function(t){t.dropTarget.hasClass("actived")&&t.dropTarget.removeClass("focused")},drop:function(n){if(n.dropTarget.hasClass("actived")){n.dropTarget.removeClass("focused");var i=n.dropTarget,o=n.draggable.currentTarget;i.is(":empty")||i.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),o.appendTo(i);var a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(a,e,t);var s=Ui.nodeStatus,l=Ui.slideStatus;!function(t,e,n,i,o,r){var a,s,l,u,d=(null!==(l=null===(s=null===(a=t.source)||void 0===a?void 0:a.test)||void 0===s?void 0:s.matching)&&void 0!==l?l:{key:"KIEN"}).key,c=o.key==d;Ti(t,e);var h={id:t.id,key:null!=d?d:"",value:o.key};e.test?e.test.answer?e.test.answer.matching?e.test.answer.matching.find((function(t){return t.id==h.id}))?e.test.answer.matching.filter((function(t){return t.id==h.id})).forEach((function(t){t.key=h.key,t.value=h.value})):e.test.answer.matching.push(h):e.test.answer.matching=[h]:e.test.answer={matching:[h]}:e.test={answer:{matching:[h]}},(null===(u=e.svg)||void 0===u?void 0:u.nodes.find((function(t){var e,n;return"submit"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||Mi(t,e,n,i,{iscorrect:c},r)}(t,e,s,l,{key:o.data("key")},r)}}}),a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target),ao(a,e,t);break;case"matching-content":jQuery("#"+t.id).on("touchmove",".ondrag-item",(function(t){t.preventDefault()})).kendoDraggable({filter:".ondrag-item",hint:function(e){var n=t.size.height/t.size.width;return'<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:'.concat(64,"px;height:").concat(64*n,'px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">').concat(e.prop("outerHTML"),"</div>").replace(/\s+/g," ")},dragstart:function(t){var n;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),(null===(n=e.test)||void 0===n?void 0:n.showselection)||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(t){},dragend:function(t){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery("#".concat(t.id," .ondrop-here")).kendoDropTarget({dragenter:function(t){t.dropTarget.hasClass("actived")&&t.dropTarget.addClass("focused")},dragleave:function(t){t.dropTarget.hasClass("actived")&&t.dropTarget.removeClass("focused")},drop:function(n){if(n.dropTarget.hasClass("actived")){n.dropTarget.removeClass("focused");var i=Zi(Kn.TEST_GROUP,"g",void 0,yr.target);ao(i,e,t);var o=n.dropTarget;n.draggable.currentTarget.appendTo(o);var a=Ui.nodeStatus,s=Ui.slideStatus;Ai(e,a,s,r)}}}),a=Zi(Kn.TEST_GROUP,"g",void 0,yr.target),ao(a,e,t);break;case"speech":break;case"submit":jQuery("#"+t.id).click((function(n){n.preventDefault();var i=Ui.nodeStatus,o=Ui.slideStatus;!function(t,e,n,i,o){var r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w,_,x,S,k,E,O,j,z,I,N,T,M,A,C,P,R,B,L,F,K,D,Q,$;(null===(a=null===(r=null==e?void 0:e.test)||void 0===r?void 0:r.answer)||void 0===a?void 0:a.truefalse)?$=null===(u=null===(l=null===(s=null==e?void 0:e.test)||void 0===s?void 0:s.answer)||void 0===l?void 0:l.truefalse)||void 0===u?void 0:u.iscorrect:(null===(c=null===(d=null==e?void 0:e.test)||void 0===d?void 0:d.answer)||void 0===c?void 0:c.singlechoice)?$=null===(v=null===(f=null===(h=null==e?void 0:e.test)||void 0===h?void 0:h.answer)||void 0===f?void 0:f.singlechoice)||void 0===v?void 0:v.iscorrect:(null===(y=null===(p=null==e?void 0:e.test)||void 0===p?void 0:p.answer)||void 0===y?void 0:y.multichoice)?$=1==[null===(b=null===(m=null===(g=null==e?void 0:e.test)||void 0===g?void 0:g.answer)||void 0===m?void 0:m.multichoice)||void 0===b?void 0:b.length,null===(S=null===(x=null===(_=null===(w=null==e?void 0:e.test)||void 0===w?void 0:w.answer)||void 0===_?void 0:_.multichoice)||void 0===x?void 0:x.map((function(t){return t.iscorrect?1:0})))||void 0===S?void 0:S.reduce((function(t,e){return t+e})),null===(O=null===(E=null===(k=null==e?void 0:e.svg)||void 0===k?void 0:k.nodes)||void 0===E?void 0:E.filter((function(t){var e,n,i,o,r;return"multichoice"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)&&(null===(r=null===(o=null===(i=t.source)||void 0===i?void 0:i.test)||void 0===o?void 0:o.multichoice)||void 0===r?void 0:r.iscorrect)})))||void 0===O?void 0:O.length].filter((function(t,e,n){return n.indexOf(t)==e})).length:(null===(z=null===(j=null==e?void 0:e.test)||void 0===j?void 0:j.answer)||void 0===z?void 0:z.fill)?$=(null===(M=null===(T=null===(N=null===(I=null==e?void 0:e.test)||void 0===I?void 0:I.answer)||void 0===N?void 0:N.fill)||void 0===T?void 0:T.map((function(t){return t.iscorrect?1:0})))||void 0===M?void 0:M.reduce((function(t,e){return t+e})))==(null===(P=null===(C=null===(A=e.svg)||void 0===A?void 0:A.nodes)||void 0===C?void 0:C.filter((function(t){var e,n;return"fill"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||void 0===P?void 0:P.length):(null===(B=null===(R=null==e?void 0:e.test)||void 0===R?void 0:R.answer)||void 0===B?void 0:B.matching)&&($=(null===(K=null===(F=null===(L=e.svg)||void 0===L?void 0:L.nodes)||void 0===F?void 0:F.filter((function(t){var e,n;return"matching-empty"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)})))||void 0===K?void 0:K.length)==((null===(Q=null===(D=null==e?void 0:e.test)||void 0===D?void 0:D.answer)||void 0===Q?void 0:Q.matching)||[]).map((function(t){return t.key==t.value?1:0})).reduce((function(t,e){return t+e}))),Mi(t,e,n,i,{iscorrect:$},o)}(t,e,i,o,r)}))}}(e,t)},Pi=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.fill,stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth};return Object.assign(o,ri(2,i,o)),{nodeId:t,element:Xi(t,2,"ellipse",{size:i,attribute:o},n),size:i,attribute:o}},Ri=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth,strokeLinecap:yr.attribute.strokeLinecap};return Object.assign(o,ri(5,i,o)),{nodeId:t,element:Xi(t,5,"line",{size:i,attribute:o},n),size:i,attribute:o}},Bi=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.fill,stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth};return Object.assign(o,ri(4,i,o)),{nodeId:t,element:Xi(t,4,"polygon",{size:i,attribute:o},n),size:i,attribute:o}},Li=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:320,height:80},o=(null==e?void 0:e.attribute)||{};Object.assign(o,ri(6,i,o));var r=(null==e?void 0:e.source)||{type:"html",html:{htmlContent:""}},a=(null==e?void 0:e.style)||{};return{nodeId:t,element:Xi(t,6,"foreignObject",{size:i,attribute:o,style:a,source:r},n),size:i,attribute:o,style:a,source:r}},Fi=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth};return Object.assign(o,ri(8,i,o)),{nodeId:t,element:Xi(t,8,"path",{size:i,attribute:o},n),size:i,attribute:o}},Ki=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:10,height:10},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.fill,stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth};return Object.assign(o,ri(11,i,o)),{nodeId:t,element:Xi(t,11,"polyline",{size:i,attribute:o},n),size:i,attribute:o}},Di=function(t,e,n){var i=(null==e?void 0:e.size)||{x:0,y:0,width:320,height:80},o=(null==e?void 0:e.attribute)||{fill:yr.attribute.stroke,fontFamily:yr.attribute.fontFamily,fontSize:yr.attribute.fontSize,textLength:yr.attribute.textLength};Object.assign(o,ri(Fn,i,o));var r=(null==e?void 0:e.source)||{type:"text",text:{textContent:""}};return{nodeId:t,element:Xi(t,Fn,"tspan",{size:i,attribute:o,source:r},n),size:i,attribute:o,source:r}},Qi=function(t,e,n){if(n.slideStatus==Ui.slideStatus&&e.length){var i=e.shift(),o=t.filter((function(t){var e;return(null!==(e=t.idx)&&void 0!==e?e:0)==i}));if(o.length){var r=Math.max.apply(null,o.map((function(t){var e;return null!==(e=t.time)&&void 0!==e?e:0}))),a=!1,s=r<.5?0:setTimeout((function(){a||(a=!0,Qi(t,e,n))}),1e3*r);$i(t,e,o,0,n,{idx:i,total:o.length,counter:0,isRecursive:a,timeoutRecursive:s,maxTimeCoundown:r,uid:Math.floor(1e9*Math.random())})}}},$i=function(t,e,n,i,o,r){if(o.slideStatus==Ui.slideStatus){var a=n[i];if(a){switch(a.type){case 0:break;case 1:li(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null);break;case 2:Pi(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null);break;case 5:Ri(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null);break;case 3:ai(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null);break;case 4:Bi(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null);break;case 11:Ki(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null);break;case 6:Li(a.id,{size:a.size,attribute:a.attribute,style:a.style,source:a.source},a.pid?window.document.getElementById(a.pid):null);break;case 9:si(a.id,{size:a.size,attribute:a.attribute,source:a.source},a.pid?window.document.getElementById(a.pid):null);break;case 7:xi(a.id,{size:a.size,attribute:a.attribute,source:a.source},a.pid?window.document.getElementById(a.pid):null);break;case Fn:Di(a.id,{size:a.size,attribute:a.attribute,source:a.source},a.pid?window.document.getElementById(a.pid):null);break;case 8:Fi(a.id,{size:a.size,attribute:a.attribute},a.pid?window.document.getElementById(a.pid):null)}Ci(o.slide,a,o,(function(){r.counter+=1,r.maxTimeCoundown<.5&&r.counter>=r.total&&(r.total=r.counter=0,r.isRecursive||(clearTimeout(r.timeoutRecursive),r.isRecursive=!0,setTimeout((function(){Qi(t,e,o)}),250)))})),$i(t,e,n,++i,o,r)}}},Gi=function(){function t(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}return Object.defineProperty(t.prototype,"data",{set:function(t){this._dataSource=t.data||{},yr.variable.set=t.variable||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodeStatus",{get:function(){return this._nodeStatus},enumerable:!1,configurable:!0}),t.prototype.refreshNodeStatus=function(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus},Object.defineProperty(t.prototype,"slideStatus",{get:function(){return this._slideStatus},enumerable:!1,configurable:!0}),t.prototype.refreshSlideStatus=function(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus},Object.defineProperty(t.prototype,"slideIdx",{get:function(){return this._slideIdx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slideTotal",{get:function(){var t,e,n;return null!==(n=null===(e=null===(t=this._dataSource)||void 0===t?void 0:t.slides)||void 0===e?void 0:e.length)&&void 0!==n?n:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slides",{get:function(){var t;return(null===(t=this._dataSource)||void 0===t?void 0:t.slides)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slide",{get:function(){var t;return((null===(t=this._dataSource)||void 0===t?void 0:t.slides)||[])[this._slideIdx]||{}},enumerable:!1,configurable:!0}),t.prototype.findNode=function(t){var e,n,i,o,r,a,s,l=this,u=null===(n=null===(e=this._dataSource)||void 0===e?void 0:e.slides)||void 0===n?void 0:n.find((function(t,e){return e==l._slideIdx})),d=null==u?void 0:u.svg,c=function(e,n){var i=null==e?void 0:e.find((function(e){return e.id==t}));if(i)return i.pid=n,i;for(var o=0,r=e.length||0;o<r&&!i&&!(i=c(e[o].nodes||[],e[o].id));)o++;return i},h=c((null==d?void 0:d.nodes)||[]);return h?(h.style=null!==(i=h.style)&&void 0!==i?i:{},h.source=null!==(o=h.source)&&void 0!==o?o:{},h.animate=null!==(r=h.animate)&&void 0!==r?r:{},h.interactive=null!==(a=h.interactive)&&void 0!==a?a:{},h.variable=null!==(s=h.variable)&&void 0!==s?s:{},h):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}},t.prototype.runSlide=function(t,e,n){var i,o,r,a,s,l,u,d,c,h,f;if(this.refreshNodeStatus(),this.refreshSlideStatus(),n?(f=null===(o=null===(i=this._dataSource)||void 0===i?void 0:i.slides)||void 0===o?void 0:o.find((function(t){return t.code==n||t.id==n})))&&(this._slideIdx=(null===(a=null===(r=this._dataSource)||void 0===r?void 0:r.slides)||void 0===a?void 0:a.indexOf(f))||0):e?(f=null===(l=null===(s=this._dataSource)||void 0===s?void 0:s.slides)||void 0===l?void 0:l.find((function(t){return t.id==e})))&&(this._slideIdx=(null===(d=null===(u=this._dataSource)||void 0===u?void 0:u.slides)||void 0===d?void 0:d.indexOf(f))||0):(this._slideIdx=Math.min(Math.max(t||0,0),this.slideTotal-1),f=this.slide),f){Wi(yr.container,yr.svg,f,!0),null===(c=jQuery(yr.svg).find("#"+Kn.BACKGROUND_GROUP))||void 0===c||c.empty();var v=Zi(Kn.BACKGROUND_GROUP,"g",void 0,yr.svg);ro(v,f),function(t){var e,n,i,o,r;t.test&&(t.test.answer=void 0);var a=Ui.nodeStatus,s=Ui.slideStatus;null===(e=t.svg)||void 0===e||e.nodes.forEach((function(t){t.pid=Math.ceil(1e9*Math.random()),Si(t.pid)}));var l=null===(i=null===(n=t.svg)||void 0===n?void 0:n.nodes)||void 0===i?void 0:i.map((function(t){var e;return null!==(e=t.idx)&&void 0!==e?e:0})).filter((function(t,e,n){return n.indexOf(t)==e})).sort((function(t,e){return(null!=t?t:0)-(null!=e?e:0)}));Qi(null!==(r=null===(o=t.svg)||void 0===o?void 0:o.nodes)&&void 0!==r?r:[],null!=l?l:[],{slide:t,nodeStatus:a,slideStatus:s})}(f)}this.changeSlide(this.slides,null===(h=this.slide)||void 0===h?void 0:h.id,this.slideIdx,this.slides.length,f)},Object.defineProperty(t.prototype,"onChangeSlide",{set:function(t){this._fnChangeSlides.push(t)},enumerable:!1,configurable:!0}),t.prototype.changeSlide=function(t,e,n,i,o){this._fnChangeSlides.forEach((function(r){return r(t,e,n,i,o)}))},t}(),Ui=new Gi,Wi=function(t,e,n,i){var o,r,a,s,l,u=window.document.querySelector(e);u||(u=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(o=window.document.querySelector(t))||void 0===o||o.appendChild(u)),i&&(u.textContent=null);var d=null!==(a=null===(r=null==n?void 0:n.svg)||void 0===r?void 0:r.viewBox)&&void 0!==a?a:yr.screen.frameSize,c=d.x,h=d.y,f=d.width,v=d.height;u.setAttributeNS(null,"viewBox",c+" "+h+" "+f+" "+v),u.setAttribute("id",e.replace("#",""));var p,y,g=null!==(s=jQuery(t).width())&&void 0!==s?s:1080,m=null!==(l=jQuery(t).height())&&void 0!==l?l:1080,b=f/v;b>=g/m?y=(p=g)/b:p=(y=m)*b,u.setAttributeNS(null,"width",p.toString()),u.setAttributeNS(null,"height",y.toString())},Vi=function(t,e){var n,i=window.document.querySelector(e);i||(i=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(n=window.document.querySelector(t))||void 0===n||n.appendChild(i));var o=yr.screen.init(),r=o.svgViewBox,a=o.svgSize;i.setAttributeNS(null,"viewBox","".concat(r.x," ").concat(r.y," ").concat(r.width," ").concat(r.height)),i.setAttribute("id",e.replace("#","")),i.style.display="block",i.style.width="".concat(a.width,"px"),i.style.height="".concat(a.height,"px"),i.style.backgroundColor="#fafafa",i.style.cursor="default"},qi=function(){jQuery(yr.target).find(">*:not(defs)").remove()},Xi=function(t,e,n,i,o){var r;return t?(r=jQuery(o||yr.target).find("#"+t).get(0))||((r=window.document.createElementNS("http://www.w3.org/2000/svg",n)).setAttribute("id",t),6==e&&r.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(r).appendTo(o||yr.target)):(r=window.document.createElementNS("http://www.w3.org/2000/svg",n),jQuery(r).appendTo(o||yr.target)),(null==i?void 0:i.attribute)&&Hi(r,null==i?void 0:i.attribute),(null==i?void 0:i.style)&&Ji(r,null==i?void 0:i.style),(null==i?void 0:i.source)&&Yi(r,e,null==i?void 0:i.source),r},Hi=function(t,e){var n,i,o,r;return jQuery(t).attr((n=Object.assign({},e||{}),null===(i=Object.keys(n))||void 0===i||i.forEach((function(t){var e,i,o,r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w;switch(t){case"fill":break;case"fillRule":Object.assign(n,{"fill-rule":null!==(e=n.fillRule)&&void 0!==e?e:null,fillRule:null});break;case"stroke":Object.assign(n,{"stroke-width":null!==(i=n.strokeWidth)&&void 0!==i?i:null,strokeWidth:null});break;case"strokeLinecap":Object.assign(n,{"stroke-linecap":null!==(o=n.strokeLinecap)&&void 0!==o?o:null,strokeLinecap:null});break;case"strokeLinejoin":Object.assign(n,{"stroke-linejoin":null!==(r=n.strokeLinejoin)&&void 0!==r?r:null,strokeLinejoin:null});break;case"strokeMiterlimit":Object.assign(n,{"stroke-miterlimit":null!==(a=n.strokeMiterlimit)&&void 0!==a?a:null,strokeMiterlimit:null});break;case"strokeDasharray":Object.assign(n,{"stroke-dasharray":null!==(s=n.strokeDasharray)&&void 0!==s?s:null,strokeDasharray:null});break;case"strokeDasharrays":Object.assign(n,{"stroke-dasharray":null!==(u=null===(l=n.strokeDasharrays)||void 0===l?void 0:l.join(" "))&&void 0!==u?u:null,strokeDasharrays:null});break;case"fontFamily":Object.assign(n,{"font-family":null!==(d=n.fontFamily)&&void 0!==d?d:null,fontFamily:null});break;case"fontWeight":Object.assign(n,{"font-weight":null!==(c=n.fontWeight)&&void 0!==c?c:null,fontWeight:null});break;case"fontStyle":Object.assign(n,{"font-style":null!==(h=n.fontStyle)&&void 0!==h?h:null,fontStyle:null});break;case"fontSize":Object.assign(n,{"font-size":null!==(f=n.fontSize)&&void 0!==f?f:null,fontSize:null});break;case"textLength":Object.assign(n,{textLength:n.textLength?"".concat(n.textLength,"px"):null});break;case"letterSpacing":Object.assign(n,{"letter-spacing":null!==(v=n.letterSpacing)&&void 0!==v?v:null,letterSpacing:null});break;case"wordSpacing":Object.assign(n,{"word-spacing":null!==(p=n.wordSpacing)&&void 0!==p?p:null,wordSpacing:null});break;case"alignmentBaseline":Object.assign(n,{"alignment-baseline":null!==(y=n.alignmentBaseline)&&void 0!==y?y:null,alignmentBaseline:null});break;case"dominantBaseline":Object.assign(n,{"dominant-baseline":null!==(g=n.dominantBaseline)&&void 0!==g?g:null,dominantBaseline:null});break;case"textAnchor":Object.assign(n,{"text-anchor":null!==(m=n.textAnchor)&&void 0!==m?m:null,textAnchor:null});break;case"textDecoration":Object.assign(n,{"text-decoration":null!==(b=n.textDecoration)&&void 0!==b?b:null,textDecoration:null});break;case"transformOrigin":Object.assign(n,{"transform-origin":null!==(w=n.transformOrigin)&&void 0!==w?w:null,transformOrigin:null})}})),Object.assign({},null!=n?n:{},{fill:(null==n?void 0:n.fill)?Qn(n.fill,null!==(o=null==n?void 0:n.fillOpacity)&&void 0!==o?o:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:(null==n?void 0:n.stroke)?Qn(n.stroke,null!==(r=null==n?void 0:n.strokeOpacity)&&void 0!==r?r:1):"rgba(0,0,0,0)",strokeOpacity:null}))),t},Ji=function(t,e){return jQuery(t).css((n=Object.assign({},e||{}),null===(i=Object.keys(n))||void 0===i||i.forEach((function(t){var e,i;switch(t){case"padding":Object.assign(n,{padding:n.padding?"".concat(n.padding,"px"):null});break;case"borderWidth":n.borderWidth&&n.borderColor?Object.assign(n,{"border-width":"".concat(n.borderWidth,"px"),"border-style":n.borderStyle||"solid","border-color":Qn(n.borderColor,null!==(e=n.borderOpacity)&&void 0!==e?e:1)}):Object.assign(n,{"border-width":"","border-style":"","border-color":""}),Object.assign(n,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(n,{"border-radius":n.borderRadius?"".concat(n.borderRadius,"px"):null,borderRadius:null});break;case"backgroundColor":n.backgroundColor?Object.assign(n,{"background-color":Qn(n.backgroundColor,null!==(i=n.backgroundOpacity)&&void 0!==i?i:1)}):Object.assign(n,{"background-color":""}),Object.assign(n,{backgroundColor:null,backgroundOpacity:null})}})),n)),t;var n,i},Yi=function(t,e,n){var i,o,r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w,_,x,S,k,E,O,j,z,I,N,T,M,A,C,P,R,B,L,F,K,D,Q,$,G,U,W,V,q,X,H,J,Y,Z,tt,et,nt,it,ot;switch(e){case 7:jQuery(t).text(null!==(o=null===(i=null==n?void 0:n.text)||void 0===i?void 0:i.textContent)&&void 0!==o?o:"");break;case Fn:jQuery(t).text(null!==(a=null===(r=null==n?void 0:n.text)||void 0===r?void 0:r.textContent)&&void 0!==a?a:"");break;case 9:jQuery(t).attr("href",(null===(s=null==n?void 0:n.image)||void 0===s?void 0:s.base64)||((null===(l=null==n?void 0:n.image)||void 0===l?void 0:l.path)?(null===(u=yr.config)||void 0===u?void 0:u.readfileuploadurl)+(null===(d=null==n?void 0:n.image)||void 0===d?void 0:d.path):null===(c=null==n?void 0:n.image)||void 0===c?void 0:c.url)||"");break;case 6:switch(null==n?void 0:n.type){case"text":if((null===(h=n.text)||void 0===h?void 0:h.variableKeywords)&&(null===(f=n.text)||void 0===f?void 0:f.variableKeywords.length)){var rt=yr.variable.getKeys(),at=(null===(v=n.text)||void 0===v?void 0:v.textContent)||"Hãy nhập nội dung của bạn!";n.text.variableKeywords.forEach((function(t){var e=t.replace(/[^a-zA-Z0-9_]/gm,"");if(rt.indexOf(e)>=0){var n=yr.variable.getValue(e);at=at.replace(t,n)}})),jQuery(t).text(at)}else jQuery(t).text((null===(p=n.text)||void 0===p?void 0:p.textContent)||"");break;case"html":var st=(null===(y=null==n?void 0:n.html)||void 0===y?void 0:y.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">Hãy nhập nội dung của bạn!</span>';if((null===(g=n.html)||void 0===g?void 0:g.variableKeywords)&&(null===(m=n.html)||void 0===m?void 0:m.variableKeywords.length)){var lt=yr.variable.getKeys();n.html.variableKeywords.forEach((function(t){var e=t.replace(/[^a-zA-Z0-9_]/gm,"");if(lt.indexOf(e)>=0){var n=yr.variable.getValue(e);st=st.replace(t,n)}}))}jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">'.concat(st,"</div>")).find("img[path],video[path],iframe[path]").each((function(t,e){var n,i;e.setAttribute("src",(null!==(i=null===(n=yr.config)||void 0===n?void 0:n.readfileuploadurl)&&void 0!==i?i:"")+e.getAttribute("path")),e.removeAttribute("path")}));break;case"input":(null===(b=n.input)||void 0===b?void 0:b.input)?jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="'.concat(null!==(_=null===(w=n.input)||void 0===w?void 0:w.placeholder)&&void 0!==_?_:"",'" maxlength="100" /></div>')):(null===(x=n.input)||void 0===x?void 0:x.textarea)&&jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="'.concat(null!==(k=null===(S=n.input)||void 0===S?void 0:S.placeholder)&&void 0!==k?k:"",'" maxlength="1000"></textarea></div>'));break;case"image":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="'.concat((null===(E=n.image)||void 0===E?void 0:E.base64)||((null===(O=n.image)||void 0===O?void 0:O.path)?(null===(j=yr.config)||void 0===j?void 0:j.readfileuploadurl)+(null===(z=n.image)||void 0===z?void 0:z.path):null===(I=n.image)||void 0===I?void 0:I.url)||"",'" style="width:100%;height:100%;display:block;"/></div>'));break;case"iframe":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="'.concat(((null===(N=n.iframe)||void 0===N?void 0:N.path)?(null===(T=yr.config)||void 0===T?void 0:T.readfileuploadurl)+(null===(M=n.iframe)||void 0===M?void 0:M.path):null===(A=n.iframe)||void 0===A?void 0:A.url)||"",'" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>'));break;case"embed":var ut=$n({readfileuploadurl:null===(C=yr.config)||void 0===C?void 0:C.readfileuploadurl,type:null===(P=n.embed)||void 0===P?void 0:P.type,oss:null===(R=n.embed)||void 0===R?void 0:R.oss,path:null===(B=n.embed)||void 0===B?void 0:B.path,url:null===(L=n.embed)||void 0===L?void 0:L.url});jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="'.concat(ut,'" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>'));break;case"svg":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">'.concat(null!==(K=null===(F=n.svg)||void 0===F?void 0:F.svgContent)&&void 0!==K?K:"","</div>"));break;case"test":var dt=(null===(D=null==n?void 0:n.html)||void 0===D?void 0:D.htmlContent)||"";if((null===(Q=n.html)||void 0===Q?void 0:Q.variableKeywords)&&(null===($=n.html)||void 0===$?void 0:$.variableKeywords.length)){var ct=yr.variable.getKeys();n.html.variableKeywords.forEach((function(t){var e=t.replace(/[^a-zA-Z0-9_]/gm,"");if(ct.indexOf(e)>=0){var n=yr.variable.getValue(e);dt=dt.replace(t,n)}}))}switch(null===(G=null==n?void 0:n.test)||void 0===G?void 0:G.type){case"truefalse":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="'.concat(null==n?void 0:n.test.type,'" data-correct="').concat((null===(U=null==n?void 0:n.test.truefalse)||void 0===U?void 0:U.iscorrect)?1:0,'"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">').concat(dt,"</div></div></div>"));break;case"singlechoice":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="'.concat(null==n?void 0:n.test.type,'" data-correct="').concat((null===(W=null==n?void 0:n.test.singlechoice)||void 0===W?void 0:W.iscorrect)?1:0,'"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">').concat(dt,"</div></div></div>"));break;case"multichoice":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="'.concat(null==n?void 0:n.test.type,'" data-correct="').concat((null===(V=null==n?void 0:n.test.multichoice)||void 0===V?void 0:V.iscorrect)?1:0,'"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">').concat(dt,"</div></div></div>"));break;case"matching-empty":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="'.concat(null===(q=null==n?void 0:n.test.matching)||void 0===q?void 0:q.key,'"></div>'));break;case"matching-content":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="'.concat(null===(X=null==n?void 0:n.test.matching)||void 0===X?void 0:X.key,'"><div class="ondrag-item" data-key="').concat(null!==(Y=null===(J=null===(H=null==n?void 0:n.test)||void 0===H?void 0:H.matching)||void 0===J?void 0:J.key)&&void 0!==Y?Y:"KIEN",'"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">').concat(dt,"</div></div></div></div>"));break;case"fill":((null===(Z=n.html)||void 0===Z?void 0:Z.fillKeywords)||[]).forEach((function(t){var e='<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="'.concat(t.replace(/[^a-zA-Z0-9]+/gm,""),'"/>');dt=dt.replace(new RegExp(t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),e)})),jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">'.concat(dt,"</div></div></div>"));break;case"speech":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":jQuery(t).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="'.concat(null!==(ot=(null===(tt=n.image)||void 0===tt?void 0:tt.path)?(null===(et=yr.config)||void 0===et?void 0:et.readfileuploadurl)+(null===(nt=n.image)||void 0===nt?void 0:nt.path):null===(it=n.image)||void 0===it?void 0:it.url)&&void 0!==ot?ot:"",'" style="width:100%;height:100%;display:block;"/></div>'))}jQuery(t).find("img[path],video[path],iframe[path]").each((function(t,e){var n,i;e.setAttribute("src",(null!==(i=null===(n=yr.config)||void 0===n?void 0:n.readfileuploadurl)&&void 0!==i?i:"")+e.getAttribute("path")),e.removeAttribute("path")}))}}},Zi=function(t,e,n,i){var o=jQuery(i||yr.target).find("#"+t).get(0);return o||((o=window.document.createElementNS("http://www.w3.org/2000/svg",e)).setAttribute("id",t),jQuery(o).appendTo(i||yr.target)),jQuery(o).attr((null==n?void 0:n.attribute)||{}),jQuery(o).css((null==n?void 0:n.style)||{}),o},to=function(t,e){var n=Yn(2),i={fill:"transparent",stroke:"#129bff","stroke-width":Yn(1)};return[{element:Zi("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:e.x-n,y:e.y-n,width:e.width+2*n,height:e.height+2*n},i)},t),posType:"rect-center"}]},eo=function(t,e){var n,i,o=[],r=e.size,a=Yn(1),s=Yn(2),l=Yn(3);Yn(5),Yn(7);var u=Yn(10),d={stroke:Wn.stroke,"stroke-width":Yn(Wn.strokeWidth),"stroke-linecap":Wn.strokeLinecap,"stroke-dasharray":Wn.strokeDasharrays.map((function(t){return Yn(t)})).join(" ")},c={fill:Xn,stroke:Hn,"stroke-width":Yn(1)},h={fill:Vn,stroke:qn,"stroke-width":Yn(1),width:Yn(7),height:Yn(7)},f={fill:Vn,stroke:qn,"stroke-width":Yn(1),width:Yn(7),height:Yn(7)},v=Zi("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:r.x,y:r.y,width:r.width,height:r.height},c),style:{cursor:"move"}},t);if(Zi("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:r.x-a,y1:r.y-a,x2:r.x-a,y2:r.y+r.height+a},d)},t),Zi("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:r.x-a,y1:r.y-a,x2:r.x+r.width+a,y2:r.y-a},d)},t),Zi("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:r.x+r.width+a,y1:r.y-a,x2:r.x+r.width+a,y2:r.y+r.height+a},d)},t),Zi("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:r.x-a,y1:r.y+r.height+a,x2:r.x+r.width+a,y2:r.y+r.height+a},d)},t),5==e.type){var p=e.size,y=[];return null===(n=p.ratios)||void 0===n||n.forEach((function(t){y.push([p.x+p.width*t[0],p.y+p.height*t[1]])})),y.forEach((function(e,n){o.push({posType:"point-".concat(n),element:Zi("icdt-temp-resize-point-".concat(n+1),"circle",{attribute:Object.assign(ri(1,{x:e[0]-s-a,y:e[1]-s-a,width:f.width,height:f.height},{}),f)},t)})})),o.concat([{element:v,posType:"rect-center"}])}if(4==e.type){var g=e.size,m=[];null===(i=g.ratios)||void 0===i||i.forEach((function(t){m.push([g.x+g.width*t[0],g.y+g.height*t[1]])})),m.forEach((function(e,n){o.push({posType:"point-".concat(n),element:Zi("icdt-temp-resize-point-".concat(n+1),"circle",{attribute:Object.assign(ri(1,{x:e[0]-s-a,y:e[1]-s-a,width:f.width,height:f.height},{}),f)},t)})}))}var b=Zi("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:r.x-u,y:r.y-u},h),style:{cursor:"nw-resize"}},t),w=Zi("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:r.x+r.width+l,y:r.y-u},h),style:{cursor:"ne-resize"}},t),_=Zi("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:r.x-u,y:r.y+r.height+l},h),style:{cursor:"sw-resize"}},t),x=Zi("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:r.x+r.width+l,y:r.y+r.height+l},h),style:{cursor:"se-resize"}},t),S=Zi("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:r.x-u,y:r.y+r.height/2-s-a},h),style:{cursor:"w-resize"}},t),k=Zi("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:r.x+r.width/2-s-a,y:r.y-u},h),style:{cursor:"n-resize"}},t),E=Zi("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:r.x+r.width+l,y:r.y+r.height/2-s-a},h),style:{cursor:"e-resize"}},t),O=Zi("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:r.x+r.width/2-s-a,y:r.y+r.height+l},h),style:{cursor:"s-resize"}},t);return o.concat([{element:v,posType:"rect-center"},{element:b,posType:"rect-top-left"},{element:w,posType:"rect-top-right"},{element:_,posType:"rect-bottom-left"},{element:x,posType:"rect-bottom-right"},{element:S,posType:"rect-left"},{element:k,posType:"rect-top"},{element:E,posType:"rect-right"},{element:O,posType:"rect-bottom"}])},no=function(t,e,n){var i=Yn(1),o=Yn(2),r=Yn(5),a={stroke:Wn.stroke,"stroke-width":Yn(Wn.strokeWidth),"stroke-linecap":Wn.strokeLinecap},s={fill:Xn,stroke:Hn,"stroke-width":Yn(1)},l={fill:Vn,stroke:qn,"stroke-width":Yn(1),width:Yn(7),height:Yn(7)},u={fill:"#0D99FF",rx:Yn(4)},d={fill:"#fff","alignment-baseline":"central","text-anchor":"middle","font-size":Yn(14)},c={fill:"none",stroke:"#2299F8","stroke-width":Yn(1)};Zi("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:n.x-i,y1:n.y-i,x2:n.x-i,y2:n.y+n.height+i},a)},t),Zi("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:n.x-i,y1:n.y-i,x2:n.x+n.width+i,y2:n.y-i},a)},t),Zi("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:n.x+n.width+i,y1:n.y-i,x2:n.x+n.width+i,y2:n.y+n.height+i},a)},t),Zi("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:n.x-i,y1:n.y+n.height+i,x2:n.x+n.width+i,y2:n.y+n.height+i},a)},t);var h=Zi("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:n.x,y:n.y,width:n.width,height:n.height},s)},t),f="".concat(n.width," x ").concat(n.height),v=8*f.length;return Zi("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:n.x+n.width/2-Yn(v/2),y:n.y+n.height+Yn(10),width:Yn(v),height:Yn(20)},u)},t),Zi("icdt-temp-select-text","text",{attribute:Object.assign({x:n.x+n.width/2,y:n.y+n.height+Yn(20)},d)},t).textContent=f,e.length>1&&e.forEach((function(e){var n=e.size;Zi("icdt-temp-select-rect-node-"+e.id,"rect",{attribute:Object.assign({x:n.x,y:n.y,width:n.width,height:n.height},c)},t)})),[{element:h,posType:"rect-center"},{element:Zi("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:n.x-r,y:n.y-r},l),style:{cursor:"nw-resize"}},t),posType:"rect-top-left"},{element:Zi("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:n.x+n.width-o,y:n.y-r},l),style:{cursor:"ne-resize"}},t),posType:"rect-top-right"},{element:Zi("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:n.x-r,y:n.y+n.height-o},l),style:{cursor:"sw-resize"}},t),posType:"rect-bottom-left"},{element:Zi("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:n.x+n.width-o,y:n.y+n.height-o},l),style:{cursor:"se-resize"}},t),posType:"rect-bottom-right"},{element:Zi("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:n.x-r,y:n.y+n.height/2-o-i},l),style:{cursor:"w-resize"}},t),posType:"rect-left"},{element:Zi("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:n.x+n.width/2-o-i,y:n.y-r},l),style:{cursor:"n-resize"}},t),posType:"rect-top"},{element:Zi("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:n.x+n.width-o,y:n.y+n.height/2-o-i},l),style:{cursor:"e-resize"}},t),posType:"rect-right"},{element:Zi("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:n.x+n.width/2-o-i,y:n.y+n.height-o},l),style:{cursor:"s-resize"}},t),posType:"rect-bottom"}]},io=function(t,e){var n=Yn(1),i={stroke:Wn.stroke,"stroke-width":Yn(Wn.strokeWidth),"stroke-linecap":Wn.strokeLinecap},o={fill:Xn,stroke:Hn,"stroke-width":Yn(1)};return Zi("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:e.x-n,y1:e.y,x2:e.x-n,y2:e.y+e.height},i)},t),Zi("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:e.x,y1:e.y-n,x2:e.x+e.width,y2:e.y-n},i)},t),Zi("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:e.x+e.width+n,y1:e.y,x2:e.x+e.width+n,y2:e.y+e.height},i)},t),Zi("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:e.x,y1:e.y+e.height+n,x2:e.x+e.width,y2:e.y+e.height+n},i)},t),[{element:Zi("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:e.x,y:e.y,width:e.width,height:e.height},o)},t),posType:"rect-center"}]},oo=function(t,e){var n={fill:"none",stroke:"#999","stroke-width":Yn(1),"stroke-dasharray":Yn(2)};jQuery(t).empty(),e.forEach((function(i){var o,r,a=i.size;if(i.idx){Zi("icdt-temp-index-rect-node-"+i.id,"rect",{attribute:Object.assign({x:a.x-5,y:a.y-5,width:a.width+10,height:a.height+10},n)},t);var s=Li(Math.ceil(1e9*Math.random()),{size:{x:a.x-76,y:a.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:'<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Thứ tự xuất hiện">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="'.concat(null!==(o=i.idx)&&void 0!==o?o:0,'" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Thời gian đợi(s), nếu giá trị = 0 sẽ chuyển sang đợi hoàn tất hoạt động và âm thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="').concat(null!==(r=i.time)&&void 0!==r?r:0,'" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Hủy thiết lập" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>')}}},t).element;s.classList.add("node-input"),jQuery(s).on("change",'input[name="idx"]',(function(t){var e;i.idx=parseInt(null!==(e=t.target.value)&&void 0!==e?e:"0")})).on("change",'input[name="time"]',(function(t){var e;i.time=parseFloat(null!==(e=t.target.value)&&void 0!==e?e:"0")})).on("click",'button[name="remove"]',(function(n){i.idx=0,i.time=null,oo(t,e)}))}}))},ro=function(t,e){var n,i,o,r,a,s,l=null!==(i=null===(n=null==e?void 0:e.svg)||void 0===n?void 0:n.background)&&void 0!==i?i:{},u=l.color,d=l.opacity,c=l.path,h=l.url,f=l.base64,v=null!==(r=null===(o=null==e?void 0:e.svg)||void 0===o?void 0:o.viewBox)&&void 0!==r?r:{x:0,y:0,width:0,height:0},p=v.x,y=v.y,g=v.width,m=v.height;xi(void 0,{size:{x:0,y:Yn(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:Yn(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(s=null!==(a=null==e?void 0:e.name)&&void 0!==a?a:null==e?void 0:e.code)&&void 0!==s?s:void 0}}},t),ai(void 0,{size:{x:p,y,width:g,height:m},attribute:{fill:"#fff",stroke:"#999",strokeWidth:Yn(1),strokeDasharray:Yn(10),class:"hide-on-viewer"}},t),u&&ai(void 0,{size:{x:p,y,width:g,height:m},attribute:{fill:u,fillOpacity:d}},t),c&&si(void 0,{size:{x:p,y,width:g,height:m},source:{type:"image",image:{path:c,url:h,base64:f}}},t)},ao=function(t,e,n){var i,o,r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w,_,x,S,k,E,O,j,z,I,N,T,M,A,C,P,R,B,L,F,K,D;switch(jQuery(t).empty(),null===(i=e.test)||void 0===i?void 0:i.type){case"truefalse":if(null===(o=e.test)||void 0===o?void 0:o.showselection){var Q=null===(s=null===(a=null===(r=null==e?void 0:e.test)||void 0===r?void 0:r.answer)||void 0===a?void 0:a.truefalse)||void 0===s?void 0:s.value;null===(l=e.svg)||void 0===l||l.nodes.filter((function(t){var e,n;return"truefalse"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)&&t.id!=Q})).forEach((function(e){var n,i=null!==(n=null==e?void 0:e.size)&&void 0!==n?n:{x:0,y:0,width:0,height:0},o=i.x,r=i.y,a=i.width,s=i.height;li(Math.ceil(1e9*Math.random()),{size:{x:o-.5,y:r-.5,width:a+1,height:s+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},t)})),(null===(d=null===(u=null==e?void 0:e.test)||void 0===u?void 0:u.answer)||void 0===d?void 0:d.truefalse)&&Q&&function(){var e,n=Ui.findNode(Q),i=null!==(e=null==n?void 0:n.size)&&void 0!==e?e:{x:0,y:0,width:0,height:0},o=i.x,r=i.y,a=i.width,s=i.height;li(Math.ceil(1e9*Math.random()),{size:{x:o-2,y:r-2,width:a+4,height:s+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},t)}()}break;case"singlechoice":if(null===(c=e.test)||void 0===c?void 0:c.showselection){var $=null===(v=null===(f=null===(h=null==e?void 0:e.test)||void 0===h?void 0:h.answer)||void 0===f?void 0:f.singlechoice)||void 0===v?void 0:v.value;null===(p=e.svg)||void 0===p||p.nodes.filter((function(t){var e,n;return"singlechoice"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)&&t.id!=$})).forEach((function(e){var n,i=null!==(n=null==e?void 0:e.size)&&void 0!==n?n:{x:0,y:0,width:0,height:0},o=i.x,r=i.y,a=i.width,s=i.height;li(Math.ceil(1e9*Math.random()),{size:{x:o-.5,y:r-.5,width:a+1,height:s+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},t)})),(null===(g=null===(y=null==e?void 0:e.test)||void 0===y?void 0:y.answer)||void 0===g?void 0:g.singlechoice)&&$&&function(){var e,n=Ui.findNode($),i=null!==(e=null==n?void 0:n.size)&&void 0!==e?e:{x:0,y:0,width:0,height:0},o=i.x,r=i.y,a=i.width,s=i.height;li(Math.ceil(1e9*Math.random()),{size:{x:o-2,y:r-2,width:a+4,height:s+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},t)}()}break;case"multichoice":if(null===(m=e.test)||void 0===m?void 0:m.showselection){var G=null!==(x=null===(_=null===(w=null===(b=null==e?void 0:e.test)||void 0===b?void 0:b.answer)||void 0===w?void 0:w.multichoice)||void 0===_?void 0:_.map((function(t){return t.value})))&&void 0!==x?x:[];null===(S=e.svg)||void 0===S||S.nodes.filter((function(t){var e,n;return"multichoice"==(null===(n=null===(e=t.source)||void 0===e?void 0:e.test)||void 0===n?void 0:n.type)&&!G.includes(t.id)})).forEach((function(e){var n,i=null!==(n=null==e?void 0:e.size)&&void 0!==n?n:{x:0,y:0,width:0,height:0},o=i.x,r=i.y,a=i.width,s=i.height;ai(Math.ceil(1e9*Math.random()),{size:{x:o-.5,y:r-.5,width:a+1,height:s+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},t)})),(null===(E=null===(k=null==e?void 0:e.test)||void 0===k?void 0:k.answer)||void 0===E?void 0:E.multichoice)&&G.length&&(null===(j=null===(O=null==e?void 0:e.test)||void 0===O?void 0:O.answer)||void 0===j||j.multichoice.forEach((function(e){var n,i=Ui.findNode(e.value),o=null!==(n=null==i?void 0:i.size)&&void 0!==n?n:{x:0,y:0,width:0,height:0},r=o.x,a=o.y,s=o.width,l=o.height;ai(Math.ceil(1e9*Math.random()),{size:{x:r-2,y:a-2,width:s+4,height:l+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},t)})))}break;case"fill":(null===(I=null===(z=null==e?void 0:e.test)||void 0===z?void 0:z.answer)||void 0===I?void 0:I.fill)&&(null===(T=null===(N=null==e?void 0:e.test)||void 0===N?void 0:N.answer)||void 0===T||T.fill.forEach((function(t){jQuery("#"+n.id).find('input[type="text"][data-key="'.concat(t.key,'"]')).val(t.value)})));break;case"matching":(null===(A=null===(M=null==e?void 0:e.test)||void 0===M?void 0:M.answer)||void 0===A?void 0:A.matching)&&("matching-empty"==(null===(P=null===(C=n.source)||void 0===C?void 0:C.test)||void 0===P?void 0:P.type)?null===(B=null===(R=null==e?void 0:e.test)||void 0===R?void 0:R.answer)||void 0===B||B.matching.filter((function(t){var e,i,o;return t.key==(null===(o=null===(i=null===(e=n.source)||void 0===e?void 0:e.test)||void 0===i?void 0:i.matching)||void 0===o?void 0:o.key)})).forEach((function(t){})):"matching-content"==(null===(F=null===(L=n.source)||void 0===L?void 0:L.test)||void 0===F?void 0:F.type)&&(null===(D=null===(K=null==e?void 0:e.test)||void 0===K?void 0:K.answer)||void 0===D||D.matching.filter((function(t){var e,i,o;return t.value==(null===(o=null===(i=null===(e=n.source)||void 0===e?void 0:e.test)||void 0===i?void 0:i.matching)||void 0===o?void 0:o.key)})).forEach((function(t){}))))}},so=function(){function t(t){this._points=[],this._options=t}return t.prototype.start=function(t){this._points.length=0,this._points.push([t.x,t.y]),this._options.start(t)},t.prototype.move=function(t,e){this._points.push([t.x,t.y]),this._options.move(t,this._points,e)},t.prototype.end=function(){this._options.end(this.offsetLast,this._points)},Object.defineProperty(t.prototype,"offsetFirst",{get:function(){return this._points.length>=1?{x:(t=this._points[0])[0],y:t[1]}:{x:0,y:0};var t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetLast",{get:function(){return this._points.length>=1?{x:(t=this._points[this._points.length-1])[0],y:t[1]}:{x:0,y:0};var t},enumerable:!1,configurable:!0}),t}(),lo=function(t,e,n,i){return t.x-=i.x,t.y-=i.y,t.x/=e,t.y/=e,t.x-=n.x,t.y-=n.y,t.x=Jn(t.x),t.y=Jn(t.y),t},uo=function(t,e,n,i,o){var r,a,s,l=null,u=0,d=0;t.mouseEvent?(l=t.mouseEvent.target,u=t.mouseEvent.offsetX,d=t.mouseEvent.offsetY):t.touchEvent&&(l=t.touchEvent.target,t.touchEvent.touches.length&&(u=t.touchEvent.touches[0].clientX,d=t.touchEvent.touches[0].clientY));var c=null!=n?n:yr.screen.scale,h=null!=i?i:yr.screen.dislocation,f=yr.screen.offset,v=function(){},p=new so({start:null!==(r=null==e?void 0:e.start)&&void 0!==r?r:v,move:null!==(a=null==e?void 0:e.move)&&void 0!==a?a:v,end:null!==(s=null==e?void 0:e.end)&&void 0!==s?s:v});t.mouseEvent?p.start(lo({x:u,y:d},c,h,{x:0,y:0})):t.touchEvent&&p.start(lo({x:u,y:d},c,h,f));var y=function(t){p.move(lo({x:t.clientX,y:t.clientY},c,h,f),{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})},g=function(t){p.end(),[Ln.SHAPE,Ln.FOREIGNOBJECT,Ln.IMAGE,Ln.TEXT].includes(yr.pointer.pointer_type)&&(t.shiftKey||(yr.pointer.pointer_type=Ln.POINTER))},m=function(t){t.touches.length&&y({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})},b=function(t){g({ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey}),window.removeEventListener("touchmove",m,!1),window.removeEventListener("touchend",b,!1)},w=function(t){0==t.button&&y({clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})},_=function(t){0==t.button&&(g({shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,altKey:t.altKey}),window.removeEventListener("mousemove",w,!1),window.removeEventListener("mouseup",_,!1))};t.mouseEvent?(window.addEventListener("mousemove",w,!1),window.addEventListener("mouseup",_,!1)):t.touchEvent&&(window.addEventListener("touchmove",m,!1),window.addEventListener("touchend",b,!1),null==l||l.addEventListener("touchmove",(function(t){t.preventDefault()})))},co=function(t,e,n,i,o){var r=n.x,a=n.y,s=n.width,l=n.height;0==s&&(s=1),0==l&&(l=1);var u=i.map((function(t){return Object.assign({},t.size)})),d=[],c=!1,h={start:function(t){i.forEach((function(t){var e=t.id,n=t.size,i=t.attribute;d.push({id:e,type:"size",from:JSON.parse(JSON.stringify({id:e,size:n,attribute:i}))})}))},move:function(t,d,h){!function(t,d,c,h,f){var v=c-t,p=h-d;!function(){var y,g=(s||1)/(l||1);switch(e){case"rect-center":y=(null==f?void 0:f.shiftKey)?Math.abs(c-t)>=Math.abs(h-d)?{x:r+c-t,y:a,width:s,height:l}:{x:r,y:a+h-d,width:s,height:l}:{x:r+c-t,y:a+h-d,width:s,height:l};break;case"rect-top-left":y=(null==f?void 0:f.shiftKey)&&(null==f?void 0:f.altKey)?g>=1?{x:r+(c-t),y:a+(c-t)/g,width:s-2*(c-t),height:l-2*(c-t)/g}:{x:r+(h-d)*g,y:a+(h-d),width:s-2*(h-d)*g,height:l-2*(h-d)}:(null==f?void 0:f.shiftKey)?g>=1?{x:r+(c-t),y:a+(c-t)/g,width:s-(c-t),height:l-(c-t)/g}:{x:r+(h-d)*g,y:a+(h-d),width:s-(h-d)*g,height:l-(h-d)}:(null==f?void 0:f.altKey)?{x:r+(c-t),y:a+(h-d),width:s-2*(c-t),height:l-2*(h-d)}:{x:r+(c-t),y:a+(h-d),width:s-(c-t),height:l-(h-d)};break;case"rect-top-right":y=(null==f?void 0:f.shiftKey)&&(null==f?void 0:f.altKey)?g>=1?{x:r-(c-t),y:a-(c-t)/g,width:s+2*(c-t),height:l+2*(c-t)/g}:{x:r+(h-d)*g,y:a+(h-d),width:s-2*(h-d)*g,height:l-2*(h-d)}:(null==f?void 0:f.shiftKey)?g>=1?{x:r,y:a-(c-t)/g,width:s+(c-t),height:l+(c-t)/g}:{x:r,y:a+(h-d),width:s-(h-d)*g,height:l-(h-d)}:(null==f?void 0:f.altKey)?{x:r-(c-t),y:a+(h-d),width:s+2*(c-t),height:l-2*(h-d)}:{x:r,y:a+(h-d),width:s+(c-t),height:l-(h-d)};break;case"rect-bottom-left":y=(null==f?void 0:f.shiftKey)&&(null==f?void 0:f.altKey)?g>=1?{x:r+(c-t),y:a+(c-t)/g,width:s-2*(c-t),height:l-2*(c-t)/g}:{x:r-(h-d)*g,y:a-(h-d),width:s+2*(h-d)*g,height:l+2*(h-d)}:(null==f?void 0:f.shiftKey)?g>=1?{x:r+(c-t),y:a,width:s-(c-t),height:l-(c-t)/g}:{x:r-(h-d)*g,y:a,width:s+(h-d)*g,height:l+(h-d)}:(null==f?void 0:f.altKey)?{x:r+(c-t),y:a-(h-d),width:s-2*(c-t),height:l+2*(h-d)}:{x:r+(c-t),y:a,width:s-(c-t),height:l+(h-d)};break;case"rect-bottom-right":y=(null==f?void 0:f.shiftKey)&&(null==f?void 0:f.altKey)?g>=1?{x:r-(c-t),y:a-(c-t)/g,width:s+2*(c-t),height:l+2*(c-t)/g}:{x:r-(h-d)*g,y:a-(h-d),width:s+2*(h-d)*g,height:l+2*(h-d)}:(null==f?void 0:f.shiftKey)?g>=1?{x:r,y:a,width:s+(c-t),height:l+(c-t)/g}:{x:r,y:a,width:s+(h-d)*g,height:l+(h-d)}:(null==f?void 0:f.altKey)?{x:r-(c-t),y:a-(h-d),width:s+2*(c-t),height:l+2*(h-d)}:{x:r,y:a,width:s+(c-t),height:l+(h-d)};break;case"rect-top":y=(null==f?void 0:f.shiftKey)?{x:r+p/2*g,y:a+p,width:s-p*g,height:l-p}:(null==f?void 0:f.altKey)?{x:r,y:a+p,width:s,height:l-2*p}:{x:r,y:a+p,width:s,height:l-p};break;case"rect-bottom":y=(null==f?void 0:f.shiftKey)?{x:r-p/2*g,y:a,width:s+p*g,height:l+p}:(null==f?void 0:f.altKey)?{x:r,y:a-p,width:s,height:l+2*p}:{x:r,y:a,width:s,height:l+p};break;case"rect-left":y=(null==f?void 0:f.shiftKey)?{x:r+v,y:a+v/2/g,width:s-v,height:l-v/g}:(null==f?void 0:f.altKey)?{x:r+v,y:a,width:s-2*v,height:l}:{x:r+v,y:a,width:s-v,height:l};break;case"rect-right":y=(null==f?void 0:f.shiftKey)?{x:r,y:a-v/2/g,width:s+v,height:l+v/g}:(null==f?void 0:f.altKey)?{x:r-v,y:a,width:s+2*v,height:l}:{x:r,y:a,width:s+v,height:l};break;default:y={x:r+c-t,y:a+h-d,width:s,height:l}}y.width<=0&&(y.width=1),y.height<=0&&(y.height=1),y.x=Jn(y.x,1),y.y=Jn(y.y,1),y.width=Jn(y.width,1),y.height=Jn(y.height,1),Object.assign(n,y),no(o,i,y),function(){var t=r-y.x,e=a-y.y,n=(y.width-s)/s,o=(y.height-l)/l;i.forEach((function(i,s){var l=u[s],d=r-l.x,c=a-l.y,h={x:Jn(l.x-(t+d*n),100),y:Jn(l.y-(e+c*o),100),width:Jn(l.width+l.width*n,100),height:Jn(l.height+l.height*o,100)},f=i.id,v=i.type,p=i.size,y=i.attribute;Object.assign(p,h),Object.assign(y,ri(v,p,y)),Hi(window.document.getElementById(f),y)}))}()}()}(d[0][0],d[0][1],t.x,t.y,h),c=!0},end:function(t,e){c&&(i.forEach((function(t){var e=t.id,n=t.size,i=t.attribute,o=d.find((function(t){return t.id==e}));o&&(o.to=JSON.parse(JSON.stringify({id:e,size:n,attribute:i})))})),yr.history.push(d))}};uo(t,h)},ho=function(t,e,n,i){var o,r=n.id,a=n.type,s=n.size,l=n.attribute,u=s.x,d=s.y,c=s.width,h=s.height,f=s.ratios,v=(c||1)/(h||1),p=null,y=!1;uo(t,{start:function(t){p=JSON.parse(JSON.stringify({id:r,size:s,attribute:l}))},move:function(t,p,g){!function(t,p,y,g,m){var b,w=y-t,_=g-p;switch(e){case"rect-center":o=(null==m?void 0:m.shiftKey)?Math.abs(w)>=Math.abs(_)?{x:u+w,y:d,width:c,height:h}:{x:u,y:d+_,width:c,height:h}:{x:u+w,y:d+_,width:c,height:h};break;case"rect-top-left":o=(null==m?void 0:m.shiftKey)&&(null==m?void 0:m.altKey)?v>=1?{x:u+w,y:d+w/v,width:c-2*w,height:h-2*w/v}:{x:u+_*v,y:d+_,width:c-2*_*v,height:h-2*_}:(null==m?void 0:m.shiftKey)?v>=1?{x:u+w,y:d+w/v,width:c-w,height:h-w/v}:{x:u+_*v,y:d+_,width:c-_*v,height:h-_}:(null==m?void 0:m.altKey)?{x:u+w,y:d+_,width:c-2*w,height:h-2*_}:{x:u+w,y:d+_,width:c-w,height:h-_};break;case"rect-top-right":o=(null==m?void 0:m.shiftKey)&&(null==m?void 0:m.altKey)?v>=1?{x:u-w,y:d-w/v,width:c+2*w,height:h+2*w/v}:{x:u+_*v,y:d+_,width:c-2*_*v,height:h-2*_}:(null==m?void 0:m.shiftKey)?v>=1?{x:u,y:d-w/v,width:c+w,height:h+w/v}:{x:u,y:d+_,width:c-_*v,height:h-_}:(null==m?void 0:m.altKey)?{x:u-w,y:d+_,width:c+2*w,height:h-2*_}:{x:u,y:d+_,width:c+w,height:h-_};break;case"rect-bottom-left":o=(null==m?void 0:m.shiftKey)&&(null==m?void 0:m.altKey)?v>=1?{x:u+w,y:d+w/v,width:c-2*w,height:h-2*w/v}:{x:u-_*v,y:d-_,width:c+2*_*v,height:h+2*_}:(null==m?void 0:m.shiftKey)?v>=1?{x:u+w,y:d,width:c-w,height:h-w/v}:{x:u-_*v,y:d,width:c+_*v,height:h+_}:(null==m?void 0:m.altKey)?{x:u+w,y:d-_,width:c-2*w,height:h+2*_}:{x:u+w,y:d,width:c-w,height:h+_};break;case"rect-bottom-right":o=(null==m?void 0:m.shiftKey)&&(null==m?void 0:m.altKey)?v>=1?{x:u-w,y:d-w/v,width:c+2*w,height:h+2*w/v}:{x:u-_*v,y:d-_,width:c+2*_*v,height:h+2*_}:(null==m?void 0:m.shiftKey)?v>=1?{x:u,y:d,width:c+w,height:h+w/v}:{x:u,y:d,width:c+_*v,height:h+_}:(null==m?void 0:m.altKey)?{x:u-w,y:d-_,width:c+2*w,height:h+2*_}:{x:u,y:d,width:c+w,height:h+_};break;case"rect-top":o=(null==m?void 0:m.shiftKey)?{x:u+_/2*v,y:d+_,width:c-_*v,height:h-_}:(null==m?void 0:m.altKey)?{x:u,y:d+_,width:c,height:h-2*_}:{x:u,y:d+_,width:c,height:h-_};break;case"rect-bottom":o=(null==m?void 0:m.shiftKey)?{x:u-_/2*v,y:d,width:c+_*v,height:h+_}:(null==m?void 0:m.altKey)?{x:u,y:d-_,width:c,height:h+2*_}:{x:u,y:d,width:c,height:h+_};break;case"rect-left":o=(null==m?void 0:m.shiftKey)?{x:u+w,y:d+w/2/v,width:c-w,height:h-w/v}:(null==m?void 0:m.altKey)?{x:u+w,y:d,width:c-2*w,height:h}:{x:u+w,y:d,width:c-w,height:h};break;case"rect-right":o=(null==m?void 0:m.shiftKey)?{x:u,y:d-w/2/v,width:c+w,height:h+w/v}:(null==m?void 0:m.altKey)?{x:u-w,y:d,width:c+2*w,height:h}:{x:u,y:d,width:c+w,height:h};break;default:var x=e.match(/^point-(\d+)/);o=x?{x:u,y:d,width:c,height:h}:{x:u+w,y:d+_,width:c,height:h}}o.width<=0&&(o.width=1),o.height<=0&&(o.height=1);var S=e.match(/^point-(\d+)/);if(S){var k=parseInt(S[1]);if("number"==typeof k){o.ratios=null==f?void 0:f.map((function(t,e){return e==k?[Jn(t[0]+(0==o.width?0:w/o.width),100),Jn(t[1]+(0==o.height?0:_/o.height),100)]:t}));var E=fo(o.x,o.y,o.width,o.height,null!==(b=o.ratios)&&void 0!==b?b:[]),O=po(E),j=vo(O.x,O.y,O.width,O.height,E);o={x:O.x,y:O.y,width:O.width,height:O.height,ratios:j}}}o.x=Jn(o.x,1),o.y=Jn(o.y,1),o.width=Jn(o.width,1),o.height=Jn(o.height,1),Object.assign(s,o),Object.assign(l,ri(a,s,l)),Hi(window.document.getElementById(r),l),eo(i,n)}(p[0][0],p[0][1],t.x,t.y,g),y=!0},end:function(t,e){y&&p&&yr.history.push([{type:"size",from:p,to:JSON.parse(JSON.stringify({id:r,size:s,attribute:l}))}])}})},fo=function(t,e,n,i,o){return o.map((function(o){return[t+n*o[0],e+i*o[1]]}))},vo=function(t,e,n,i,o){return o.map((function(o){return[0==n?0:Jn((o[0]-t)/n,100),0==i?0:Jn((o[1]-e)/i,100)]}))},po=function(t){var e=[],n=[];t.map((function(t){e.push(t[0]),n.push(t[1])}));var i=Math.min.apply(null,e),o=Math.min.apply(null,n);return{x:i,y:o,width:Math.max.apply(null,e)-i||1,height:Math.max.apply(null,n)-o||1}},yo=function(t){t.length>1?function(t){var e=999999,n=999999,i=-999999,o=-999999;t.forEach((function(t){e=Math.min(e,t.size.x),n=Math.min(n,t.size.y),i=Math.max(i,t.size.x+t.size.width),o=Math.max(o,t.size.y+t.size.height)}));var r=Zi(Kn.RESIZE_GROUP,"g"),a=oi(e,n,i,o);a.x=Jn(a.x,100),a.y=Jn(a.y,100),a.width=Jn(a.width,100),a.height=Jn(a.height,100),no(r,t,a).forEach((function(e){!function(t,e,n,i,o){var r=!1;null==t||t.addEventListener("touchstart",(function(t){r=!0,co({touchEvent:t},e,n,i,o)})),null==t||t.addEventListener("mousedown",(function(t){0==t.button&&(r?r=!1:co({mouseEvent:t},e,n,i,o))}))}(e.element,e.posType,a,t,r)}))}(t):1==t.length&&function(t){var e=Zi(Kn.RESIZE_GROUP,"g");if(t.length>0){var n=t[0];eo(e,n).forEach((function(t){!function(t,e,n,i){var o=!1;null==t||t.addEventListener("touchstart",(function(t){o=!0,ho({touchEvent:t},e,n,i)})),null==t||t.addEventListener("mousedown",(function(t){0==t.button&&(o?o=!1:ho({mouseEvent:t},e,n,i))}))}(t.element,t.posType,n,e)}))}}(t)},go=function(t){var e,n,i,o,r,a,s,l,u,d,c=(null===(e=t.mouseEvent)||void 0===e?void 0:e.target)||(null===(n=t.touchEvent)||void 0===n?void 0:n.target),h=(null==c?void 0:c.getAttribute("id"))||"",f=null==c?void 0:c.nodeName;yr.dataSelect.nodeName.includes(f)||(c=jQuery(c).parents("foreignObject").get(0))&&(h=c.getAttribute("id")||"",f=c.nodeName);var v=(null===(i=null==c?void 0:c.parentNode)||void 0===i?void 0:i.getAttribute("id"))||"";if([Kn.RESIZE_GROUP,Kn.SELECT_GROUP].includes(v))return null===(o=t.mouseEvent)||void 0===o||o.stopPropagation(),void(null===(r=t.mouseEvent)||void 0===r||r.preventDefault());if((null===(a=t.mouseEvent)||void 0===a?void 0:a.altKey)||(null===(s=t.touchEvent)||void 0===s?void 0:s.altKey)||!h||h.match(/[^0-9]/)||!yr.dataSelect.nodeName.includes(f))yr.dataSelect.ids.length&&(yr.dataSelect.ids=[]),(0==(null===(l=t.mouseEvent)||void 0===l?void 0:l.button)||t.touchEvent)&&function(t){var e=Zi(Kn.SCAN_GROUP,"g"),n=oi(0,0,1,1);io(e,n),function(t,e,n){uo(t,{start:function(t){},move:function(t,i){var o,r,a,s;o=i[0][0],r=i[0][1],a=t.x,s=t.y,e=oi(o,r,a,s),io(n,e)},end:function(t,e){null==n||n.remove(),yr.dataSelect.ids=yr.data.getNodeInArea(Math.min(e[0][0],t.x),Math.min(e[0][1],t.y),Math.max(e[0][0],t.x),Math.max(e[0][1],t.y)),yo(yr.dataSelect.nodes)}})}(t,n,e)}(t);else{var p=parseFloat(h||"0");(null===(u=t.mouseEvent)||void 0===u?void 0:u.shiftKey)||(null===(d=t.touchEvent)||void 0===d?void 0:d.shiftKey)?yr.dataSelect.ids=[p].concat(yr.dataSelect.ids).filter((function(t,e,n){return n.indexOf(t)==e})):yr.dataSelect.ids=[p],yo(yr.dataSelect.nodes)}},mo=function(){var t=yr.screen.dislocation,e=t.x,n=t.y,i=function(t,i,o,r){yr.screen.move({x:e,y:n},{x:o-t,y:r-i})};return{start:function(t){},move:function(t,e){i(e[0][0],e[0][1],t.x,t.y)},end:function(t,e){i(e[0][0],e[0][1],t.x,t.y)}}},bo=[{name:"tam giác vuông",type:3,ratios:[[0,0],[1,1],[0,1]]},{name:"tam giác cân",type:31,ratios:[[.5,0],[0,1],[1,1]]},{name:"hình chữ nhật",type:4,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"hình ngũ giác đều",type:5,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"hình lục giác đều",type:6,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung đánh dấu vị trí",type:101,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung đánh trò chuyện",type:102,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"hình chữ thập",type:104,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"hình mũi tên 1 chiều",type:201,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"hình mũi tên 2 chiều",type:202,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"hình ngôi sao 4 cánh",type:304,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"hình ngôi sao 5 cánh",type:305,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"hình ngôi sao 6 cánh",type:306,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}],wo=function(){var t=Zi(Kn.CREATE_GROUP,"g"),e=li(Math.ceil(1e9*Math.random())),n=e.nodeId,i=e.element,o=e.attribute,r=e.size,a=function(e,n,a,s){(r=oi(e,n,a,s,{ratio:1})).x=Jn(r.x),r.y=Jn(r.y),r.width=Jn(r.width),r.height=Jn(r.height),Object.assign(o,ri(1,r,o)),Hi(i,o),to(t,r)};return{start:function(t){a(t.x,t.y,t.x+r.width,t.y+r.height)},move:function(t,e){a(e[0][0],e[0][1],t.x,t.y)},end:function(e,a){(r.width<=8||r.height<=8)&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(o,ri(1,r,o)),Hi(i,o)),yr.data.node=Object.assign({id:n,type:1,name:"Circle"},{size:r,attribute:o}),null==t||t.remove()}}},_o=function(){var t=Zi(Kn.CREATE_GROUP,"g"),e=Pi(Math.ceil(1e9*Math.random())),n=e.nodeId,i=e.element,o=e.attribute,r=e.size,a=function(e,n,a,s){(r=oi(e,n,a,s)).x=Jn(r.x),r.y=Jn(r.y),r.width=Jn(r.width),r.height=Jn(r.height),Object.assign(o,ri(2,r,o)),Hi(i,o),to(t,r)};return{start:function(t){a(t.x,t.y,t.x+r.width,t.y+r.height)},move:function(t,e){a(e[0][0],e[0][1],t.x,t.y)},end:function(e,a){r.width<4&&(r.width=4),r.height<4&&(r.height=4),r.width+r.height<8&&(r.width=90,r.height=60,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(o,ri(2,r,o)),Hi(i,o)),yr.data.node=Object.assign({id:n,type:2,name:"Ellipse"},{size:r,attribute:o}),null==t||t.remove()}}},xo=function(){var t=Zi(Kn.CREATE_GROUP,"g"),e=ai(Math.ceil(1e9*Math.random())),n=e.nodeId,i=e.element,o=e.attribute,r=e.size,a=function(e,n,a,s){(r=oi(e,n,a,s)).x=Jn(r.x),r.y=Jn(r.y),r.width=Jn(r.width),r.height=Jn(r.height),Object.assign(o,ri(3,r,o)),Hi(i,o),to(t,r)};return{start:function(t){a(t.x,t.y,t.x+r.width,t.y+r.height)},move:function(t,e){a(e[0][0],e[0][1],t.x,t.y)},end:function(e,a){r.width<1&&(r.width=1),r.height<1&&(r.height=1),r.width+r.height<8&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(o,ri(3,r,o)),Hi(i,o)),yr.data.node=Object.assign({id:n,type:3,name:"Rect"},{size:r,attribute:o}),null==t||t.remove()}}},So=function(t){var e=Zi(Kn.CREATE_GROUP,"g"),n=t||[[0,0],[1,1],[0,1]],i=Bi(Math.ceil(1e9*Math.random())),o=i.nodeId,r=i.element,a=i.attribute,s=i.size;s.ratios=n;var l=function(t,i,o,l){(s=oi(t,i,o,l,{ratios:n})).x=Jn(s.x),s.y=Jn(s.y),s.width=Jn(s.width),s.height=Jn(s.height),Object.assign(a,ri(4,s,a)),Hi(r,a),to(e,s)};return{start:function(t){l(t.x,t.y,t.x+s.width,t.y+s.height)},move:function(t,e){l(e[0][0],e[0][1],t.x,t.y)},end:function(t,n){s.width<1&&(s.width=1),s.height<1&&(s.height=1),s.width+s.height<8&&(s.width=80,s.height=80,s.x=s.x-s.width/2,s.y=s.y-s.height/2,Object.assign(a,ri(4,s,a)),Hi(r,a)),yr.data.node=Object.assign({id:o,type:4,name:"Polygon"},{size:s,attribute:a}),null==e||e.remove()}}},ko=function(){var t=Zi(Kn.CREATE_GROUP,"g"),e=Ri(Math.ceil(1e9*Math.random())),n=e.nodeId,i=e.element,o=e.attribute,r=e.size;return{start:function(t){},move:function(e,n){var a,s,l,u;a=n[0][0],s=n[0][1],l=e.x,u=e.y,(r=oi(a,s,l,u)).x=Jn(r.x),r.y=Jn(r.y),r.width=Jn(r.width),r.height=Jn(r.height),Object.assign(o,ri(5,r,o)),Hi(i,o),to(t,r)},end:function(e,a){a.length>=2?(r.width<8&&(r.width=0),r.height<8&&(r.height=0),r.width+r.height<8&&(r.width=80,r.height=0,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(o,ri(5,r,o)),Hi(i,o)),yr.data.node=Object.assign({id:n,type:5,name:"Line"},{size:r,attribute:o})):null==i||i.remove(),null==t||t.remove()}}},Eo=function(){var t=Fi(Math.ceil(1e9*Math.random())),e=t.nodeId,n=t.element,i=t.attribute,o=t.size,r="";return{start:function(t){r="M ".concat(t.x," ").concat(t.y," L ").concat(t.x," ").concat(t.y)},move:function(t,e){var i,o;i=t.x,o=t.y,r+=" ".concat(i," ").concat(o),n.setAttribute("d",r)},end:function(t,n){var a=Zn(r),s=ti(a),l=s.minX,u=s.minY,d=s.maxX,c=s.maxY;o.x=l,o.y=u,o.width=d-l||1,o.height=c-u||1,o.ratioMaps=ei(o,a),yr.data.node=Object.assign({id:e,type:8,name:"Path"},{size:o,attribute:i})}}},Oo=function(){var t=Zi(Kn.CREATE_GROUP,"g"),e=Li(Math.ceil(1e9*Math.random())),n=e.nodeId,i=e.element,o=e.size,r=e.attribute,a=e.style,s=e.source,l=function(e,n,a,s){(o=oi(e,n,a,s)).x=Jn(o.x),o.y=Jn(o.y),o.width=Jn(o.width),o.height=Jn(o.height),Object.assign(r,ri(6,o,r)),Hi(i,r),to(t,o)};return{start:function(t){l(t.x,t.y,t.x+o.width,t.y+o.height)},move:function(t,e){l(e[0][0],e[0][1],t.x,t.y)},end:function(e,l){(o.width<=16||o.height<=16)&&(o.width=90,o.height=60,o.x=o.x-o.width/2,o.y=o.y-o.height/2,Object.assign(r,ri(6,o,r)),Hi(i,r)),yr.data.node=Object.assign({id:n,type:6,name:"ForeignObject"},{size:o,attribute:r,style:a,source:s}),null==t||t.remove()}}},jo=function(){var t,e,n=Zi(Kn.CREATE_GROUP,"g"),i=si(Math.ceil(1e9*Math.random())),o=i.nodeId,r=i.element,a=i.size,s=i.attribute,l=i.source,u=1;!function(t){if(t){var e=new Image;e.onload=function(){u=Jn(e.naturalWidth/e.naturalHeight,100)},e.onerror=function(e){console.error("ImgSrc load failed -> ".concat(t),e)},e.src=t}}(null!==(e=null===(t=l.image)||void 0===t?void 0:t.url)&&void 0!==e?e:"");var d=function(t,e,i,o){(a=oi(t,e,i,o,{ratio:u})).x=Jn(a.x),a.y=Jn(a.y),a.width=Jn(a.width),a.height=Jn(a.height),Object.assign(s,ri(9,a,s)),Hi(r,s),to(n,a)};return{start:function(t){d(t.x,t.y,t.x+a.width,t.y+a.height)},move:function(t,e){d(e[0][0],e[0][1],t.x,t.y)},end:function(t,e){(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(s,ri(9,a,s)),Hi(r,s)),yr.data.node=Object.assign({id:o,type:9,name:"Image"},{size:a,attribute:s,source:l}),null==n||n.remove()}}};i.config({driver:[i.INDEXEDDB,i.LOCALSTORAGE,i.WEBSQL],name:"_localDataDB",version:1});var zo=function(){return fi(void 0,void 0,void 0,(function(){return vi(this,(function(t){return[2,o]}))}))},Io=function(t){return fi(void 0,void 0,void 0,(function(){return vi(this,(function(e){return[2,i.getItem(t)]}))}))},No=function(t,e){return fi(void 0,void 0,void 0,(function(){return vi(this,(function(n){return[2,i.setItem(t,e)]}))}))},To=function(t,e,n){var i;if(!e||window.document.getElementById(e)){if(e){var o=window.document.getElementById(e);jQuery(o).find("#"+Kn.BACKGROUND_GROUP).empty();var r=Zi(Kn.BACKGROUND_GROUP,"g",void 0,o);ro(r,t)}else jQuery(yr.target).find("#"+Kn.BACKGROUND_GROUP).empty(),r=Zi(Kn.BACKGROUND_GROUP,"g",void 0,yr.target),ro(r,t);var a=function(t,n){n=e&&n?"".concat(e,"-").concat(n):null!=e?e:n,null==t||t.forEach((function(t){var i,o=e?"".concat(e,"-").concat(t.id):t.id;if(t.isdeleted)null===(i=window.document.getElementById(o))||void 0===i||i.remove();else switch(t.type){case 0:Si(o,{},n?window.document.getElementById(n):null),a(t.nodes,t.id);break;case 1:li(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null);break;case 2:Pi(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null);break;case 5:Ri(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null);break;case 3:ai(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null);break;case 4:Bi(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null);break;case 11:Ki(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null);break;case 6:Li(o,{size:t.size,attribute:t.attribute,style:t.style,source:t.source},n?window.document.getElementById(n):null);break;case 9:si(o,{size:t.size,attribute:t.attribute,source:t.source},n?window.document.getElementById(n):null);break;case 7:xi(o,{size:t.size,attribute:t.attribute,source:t.source},n?window.document.getElementById(n):null);break;case Fn:Di(o,{size:t.size,attribute:t.attribute,source:t.source},n?window.document.getElementById(n):null);break;case 8:Fi(o,{size:t.size,attribute:t.attribute},n?window.document.getElementById(n):null)}}))};a(null===(i=null==t?void 0:t.svg)||void 0===i?void 0:i.nodes)}},Mo=function(t,e){var n,i=function(t,n){n=n?"".concat(e,"-").concat(n):e,null==t||t.forEach((function(t){var e=t.id;jQuery("#"+e).appendTo(n?window.document.getElementById(n):yr.target),0==t.type&&i(t.nodes,t.id)}))};i(null===(n=null==t?void 0:t.svg)||void 0===n?void 0:n.nodes)},Ao=function(t,e){var n=t.id,i=t.type,o=t.size,r=t.attribute,a=JSON.parse(JSON.stringify({id:n,size:o,attribute:r}));o.x=Jn(e||0),Object.assign(r,ri(i,o,r)),Hi(window.document.getElementById(n),r),yr.history.push([{type:"size",from:a,to:JSON.parse(JSON.stringify({id:n,size:o,attribute:r}))}])},Co=function(t,e){var n=t.id,i=t.type,o=t.size,r=t.attribute,a=JSON.parse(JSON.stringify({id:n,size:o,attribute:r}));o.y=Jn(e||0),Object.assign(r,ri(i,o,r)),Hi(window.document.getElementById(n),r),yr.history.push([{type:"size",from:a,to:JSON.parse(JSON.stringify({id:n,size:o,attribute:r}))}])},Po=new(function(){function t(){this._fnChanges=[],this.onchange={type:"keydown",key:27,fn:function(){yr.dataSelect.ids.length&&(yr.dataSelect.ids=[])}},this.onchange={type:"keydown",key:46,fn:function(){yr.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:32,fn:function(){yr.pointer.pointer_type_temp=Ln.HAND}},this.onchange={type:"keyup",key:32,fn:function(){yr.pointer.pointer_type_temp=Ln.POINTER}},this.onchange={type:"keydown",key:37,fn:function(){yr.dataSelect.ids.length||yr.data.backSlide()}},this.onchange={type:"keydown",key:39,fn:function(){yr.dataSelect.ids.length||yr.data.nextSlide()}},this.onchange={type:"keydown",key:34,fn:function(){yr.dataSelect.ids.length||yr.data.backSlide()}},this.onchange={type:"keydown",key:33,fn:function(){yr.dataSelect.ids.length||yr.data.nextSlide()}},this.onchange={type:"keydown",key:37,fn:function(){yr.dataSelect.ids.length&&(yr.dataSelect.nodes.forEach((function(t){Ao(t,Jn(t.size.x-Yn(1)))})),yo(yr.dataSelect.nodes))}},this.onchange={type:"keydown",key:39,fn:function(){yr.dataSelect.ids.length&&(yr.dataSelect.nodes.forEach((function(t){Ao(t,Jn(t.size.x+Yn(1)))})),yo(yr.dataSelect.nodes))}},this.onchange={type:"keydown",key:38,fn:function(){yr.dataSelect.ids.length&&(yr.dataSelect.nodes.forEach((function(t){Co(t,Jn(t.size.y-Yn(1)))})),yo(yr.dataSelect.nodes))}},this.onchange={type:"keydown",key:40,fn:function(){yr.dataSelect.ids.length&&(yr.dataSelect.nodes.forEach((function(t){Co(t,Jn(t.size.y+Yn(1)))})),yo(yr.dataSelect.nodes))}},this.onchange={type:"keydown",key:49,fn:function(t){t.shiftKey&&(yr.reloadView(),yr.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:48,fn:function(t){t.ctrlKey&&(yr.screen.zoomTo=100)}},this.onchange={type:"keydown",key:187,fn:function(t){t.ctrlKey&&yr.screen.zoomIn()}},this.onchange={type:"keydown",key:189,fn:function(t){t.ctrlKey&&yr.screen.zoomOut()}},this.onchange={type:"keydown",key:65,fn:function(t){t.ctrlKey&&(yr.dataSelect.ids=yr.data.getNodeAll(),yo(yr.dataSelect.nodes))}},this.onchange={type:"keydown",key:67,fn:function(t){if(t.ctrlKey){var e=yr.dataSelect.nodes;e&&(n={params:{type:"nodes",nodes:e}},fi(void 0,void 0,void 0,(function(){var t;return vi(this,(function(e){switch(e.label){case 0:return[4,zo()];case 1:e.sent(),n.params=n.params||{},e.label=2;case 2:return e.trys.push([2,4,,5]),[4,No("icdt-clipboard",n.params)];case 3:return e.sent(),"function"==typeof n.callback&&n.callback(n.params),[3,5];case 4:return t=e.sent(),"function"==typeof n.callback&&n.callback(null),console.error(t),[3,5];case 5:return[2]}}))})))}var n}},this.onchange={type:"keydown",key:86,fn:function(t){var e;t.ctrlKey&&(e={callback:function(e){var n,i;"nodes"==(null==e?void 0:e.type)&&(null===(n=null==e?void 0:e.nodes)||void 0===n?void 0:n.length)&&(null===(i=null==e?void 0:e.nodes)||void 0===i||i.forEach((function(e){t.shiftKey||yr.data.findNode(e.id).id&&(e.size.x+=16,e.size.y+=16),e.id=Math.ceil(1e9*Math.random()),yr.data.node=e})),To(yr.data.slide))}},fi(void 0,void 0,void 0,(function(){var t,n;return vi(this,(function(i){switch(i.label){case 0:return[4,zo()];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,Io("icdt-clipboard")];case 3:return t=i.sent()||{},"function"==typeof e.callback&&e.callback(t),[3,5];case 4:return n=i.sent(),"function"==typeof e.callback&&e.callback(null),console.error(n),[3,5];case 5:return[2]}}))})))}},this.onchange={type:"keydown",key:90,fn:function(t){t.ctrlKey&&t.shiftKey?yr.history.redo():t.ctrlKey&&yr.history.undo()}},this.onchange={type:"keydown",key:219,fn:function(t){t.ctrlKey&&t.shiftKey?yr.data.sendToBack(yr.dataSelect.ids):t.ctrlKey?yr.data.sendToBackStep(yr.dataSelect.ids,-2):yr.data.sendToBackArea(yr.dataSelect.ids)}},this.onchange={type:"keydown",key:221,fn:function(t){t.ctrlKey&&t.shiftKey?yr.data.bringToFront(yr.dataSelect.ids):t.ctrlKey?yr.data.bringToFrontStep(yr.dataSelect.ids,1):yr.data.bringToFrontArea(yr.dataSelect.ids)}}}return Object.defineProperty(t.prototype,"onchange",{set:function(t){var e=this._fnChanges.find((function(e){return e.eventType==t.type&&e.eventKey==t.key}));e?e.fns.push(t.fn):this._fnChanges.push({eventType:t.type,eventKey:t.key,fns:[t.fn]})},enumerable:!1,configurable:!0}),t.prototype.change=function(t,e,n){var i;null===(i=this._fnChanges.find((function(n){return n.eventType==t&&n.eventKey==e})))||void 0===i||i.fns.forEach((function(t){return t(n)}))},t}()),Ro=function(t){Po.change(t.type,t.keyCode||t.which||t.charCode||0,t)},Bo=function(){var t={stroke:yr.attribute.stroke,strokeWidth:yr.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},e=Fi(Math.ceil(1e9*Math.random()),{attribute:t}),n=e.nodeId,i=e.element,o=e.attribute,r=e.size;Hi(i,o);var a="",s="";return{start:function(t){a="M ".concat(t.x," ").concat(t.y," L ").concat(t.x," ").concat(t.y)},move:function(t,e){var n,o;n=t.x,o=t.y,a+=" ".concat(n," ").concat(o),i.setAttribute("d",a)},end:function(t,e){var l;if(e.length>=3){var u=An().x((function(t){return t[0]})).y((function(t){return t[1]})).curve(Rn);s=null!==(l=u(e))&&void 0!==l?l:"",i.setAttribute("d",s)}else i.setAttribute("d",a);var d=Zn(s||a),c=ti(d),h=c.minX,f=c.minY,v=c.maxX,p=c.maxY;r.x=h,r.y=f,r.width=v-h||1,r.height=p-f||1,r.ratioMaps=ei(r,d),yr.data.node=Object.assign({id:n,type:8,name:"Path"},{size:r,attribute:o})}}},Lo=function(){var t={stroke:yr.attribute.stroke,strokeOpacity:.4,strokeWidth:yr.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},e=Fi(Math.ceil(1e9*Math.random()),{attribute:t}),n=e.nodeId,i=e.element,o=e.attribute,r=e.size;Hi(i,o);var a="";return{start:function(t){a="M ".concat(t.x," ").concat(t.y," L ").concat(t.x," ").concat(t.y)},move:function(t,e){var n,o;n=t.x,o=t.y,a+=" ".concat(n," ").concat(o),i.setAttribute("d",a)},end:function(t,e){var i=Zn(a),s=ti(i),l=s.minX,u=s.minY,d=s.maxX,c=s.maxY;r.x=l,r.y=u,r.width=d-l||1,r.height=c-u||1,r.ratioMaps=ei(r,i),yr.data.node=Object.assign({id:n,type:8,name:"Path"},{size:r,attribute:o})}}},Fo=function(t,e){var n,i,o={stroke:"#FF0000",strokeWidth:Yn(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:Yn(8)},r=Fi(Math.ceil(1e9*Math.random()),{size:e}).element;window.document.getElementById(Kn.INTERACTIVE_GROUP).querySelectorAll("path").forEach((function(t){return null==t?void 0:t.remove()})),window.document.getElementById(Kn.INTERACTIVE_GROUP).querySelectorAll("circle").forEach((function(t){return null==t?void 0:t.remove()})),null===(n=window.document.getElementById(Kn.INTERACTIVE_GROUP))||void 0===n||n.appendChild(r);var a=function(e){var n;if(e.length){var i=[];if(1==e.length){var o=(null!==(n=null!=t?t:yr.dataSelect.nodes[0])&&void 0!==n?n:{}).size;if(!o)return;i=[[o.x+o.width/2,o.y+o.height/2],e[0]]}else i=pi([],e,!0);l(i),s(i[0],"start"),s(i[i.length-1],"end")}},s=function(e,n){e&&(function(){var t,i=li(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==n?"#FF0000":"#00BA00",strokeWidth:Yn(1)},size:{x:e[0]-5,y:e[1]-5,width:10,height:10}}).element;null===(t=window.document.getElementById(Kn.INTERACTIVE_GROUP))||void 0===t||t.prepend(i)}(),function(){var n,i,o=(null!==(n=null!=t?t:yr.dataSelect.nodes[0])&&void 0!==n?n:{}).size;if(o){var r=[[e[0]-o.width/2,e[1]-o.height/2],[e[0]+o.width/2,e[1]-o.height/2],[e[0]+o.width/2,e[1]+o.height/2],[e[0]-o.width/2,e[1]+o.height/2],[e[0]-o.width/2,e[1]-o.height/2]],a=Fi(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:Yn(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:Yn(8)},size:{x:0,y:0,width:10,height:10,points:r}}).element;null===(i=window.document.getElementById(Kn.INTERACTIVE_GROUP))||void 0===i||i.prepend(a)}}())},l=function(t){var e=An().x((function(t){return t[0]})).y((function(t){return t[1]})).curve(Rn),n=e(t);r.setAttribute("d",n)};Hi(r,o),a(null!==(i=null==e?void 0:e.points)&&void 0!==i?i:[]);var u="";return{start:function(t){u="M ".concat(t.x," ").concat(t.y," L ").concat(t.x," ").concat(t.y)},move:function(t,e){u+=" ".concat(t.x," ").concat(t.y),r.setAttribute("d",u)},end:function(t,e){a(e),e.length&&(window.interactivePoints=e)}}};function Ko(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))}function Do(t,e,n,i,o){return Ko(t,e,n,i)<o?1:0}function Qo(t,e,n,i,o,r,a){var s=[];return s.push(Do(t,e,n,i,a)),s.push(Do(t,e,o,r,a)),s.push(function(t,e,n,i,o,r,a){var s=[o-n,r-i],l=[t-n,e-i],u=[-s[1],s[0]],d=Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2)),c=[u[0]/d,u[1]/d],h=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)),f=[s[0]/h,s[1]/h],v=l[0]*f[0]+l[1]*f[1];if(v<=0||v>=h)return 0;var p=l[0]*c[0]+l[1]*c[1];return p>=a||p<=-a?0:1}(t,e,n,i,o,r,a)),s}function $o(t,e,n,i,o){var r=[n-t,i-e],a=[-r[1],r[0]],s=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)),l=[a[0]/s,a[1]/s];return[[t+o*l[0],e+o*l[1]],[t-o*l[0],e-o*l[1]],[n-o*l[0],i-o*l[1]],[n+o*l[0],i+o*l[1]]]}function Go(t,e,n,i,o,r,a){var s,l=[o-t,r-e],u=[n-t,i-e],d=Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2)),c=[u[0]/d,u[1]/d],h=l[0]*c[0]+l[1]*c[1],f=[t+h*c[0],e+h*c[1]],v=Math.sqrt(Math.pow(o-f[0],2)+Math.pow(r-f[1],2));s=0===v?a:Math.sqrt(Math.pow(a,2)-Math.pow(v,2));var p=[t+h*c[0]+s*c[0],e+h*c[1]+s*c[1]];return p[0]===t&&p[1]===e?null:p}function Uo(t,e,n,i,o,r,a){var s=[o-t,r-e],l=[n-t,i-e],u=[-l[1],l[0]],d=Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2)),c=[u[0]/d,u[1]/d],h=s[0]*c[0]+s[1]*c[1],f=Ho([t,e],[n,i],[o,r]);if(Xo([f[0]-o,f[1]-r])>=a)return null;var v=Math.sqrt(Math.pow(a,2)-Math.pow(h,2)),p=[o-h*c[0],r-h*c[1]],y=Math.sqrt(Math.pow(l[0],2)+Math.pow(l[1],2)),g=[l[0]/y,l[1]/y],m=[[p[0]-g[0]*v,p[1]-g[1]*v],[p[0]+g[0]*v,p[1]+g[1]*v]];return m[0][0]===t&&m[0][1]===e?null:m}function Wo(t,e,n,i,o,r,a,s){var l,u,d,c,h,f;return-(d=a-o)*(u=i-e)+(l=n-t)*(c=s-r)==0?null:(f=(d*(e-r)-c*(t-o))/(-d*u+l*c),(h=(-u*(t-o)+l*(e-r))/(-d*u+l*c))>=0&&h<=1&&f>=0&&f<=1?[t+f*l,e+f*u]:null)}function Vo(t,e,n,i,o,r,a,s,l,u){var d=$o(r,a,s,l,u),c=[];if(n[0]&&!n[1])c.push(Go(t,e,i,o,r,a,u)),c.push(Wo(t,e,i,o,d[0][0],d[0][1],d[3][0],d[3][1])),c.push(Wo(t,e,i,o,d[1][0],d[1][1],d[2][0],d[2][1])),(h=Uo(t,e,i,o,s,l,u))&&c.push(h[0],h[1]);else if(!n[0]&&n[1])c.push(Go(t,e,i,o,s,l,u)),c.push(Wo(t,e,i,o,d[0][0],d[0][1],d[3][0],d[3][1])),c.push(Wo(t,e,i,o,d[1][0],d[1][1],d[2][0],d[2][1])),(h=Uo(t,e,i,o,r,a,u))&&c.push(h[0],h[1]);else if(n[0]&&n[1])c.push(Go(t,e,i,o,r,a,u)),c.push(Wo(t,e,i,o,d[0][0],d[0][1],d[3][0],d[3][1])),c.push(Wo(t,e,i,o,d[1][0],d[1][1],d[2][0],d[2][1])),c.push(Go(t,e,i,o,s,l,u));else{var h=Uo(t,e,i,o,s,l,u),f=Uo(t,e,i,o,r,a,u);h&&c.push(h[0],h[1]),f&&c.push(f[0],f[1]),c.push(Wo(t,e,i,o,d[0][0],d[0][1],d[3][0],d[3][1])),c.push(Wo(t,e,i,o,d[1][0],d[1][1],d[2][0],d[2][1]))}for(var v=[t,e],p=0;p<c.length;p++)c[p]&&Ko(c[p][0],c[p][1],i,o)<Ko(v[0],v[1],i,o)&&(v=c[p]);return v[0]===t&&v[1]===e?null:v}function qo(t,e,n,i,o,r,a,s,l){var u=$o(o,r,a,s,l),d=[],c=Uo(t,e,n,i,o,r,l);c&&d.push(c[0],c[1]),(c=Uo(t,e,n,i,a,s,l))&&d.push(c[0],c[1]),d.push(Wo(t,e,n,i,u[0][0],u[0][1],u[3][0],u[3][1])),d.push(Wo(t,e,n,i,u[1][0],u[1][1],u[2][0],u[2][1]));for(var h=[n,i],f=[t,e],v=0;v<d.length;v++)d[v]&&Ko(d[v][0],d[v][1],t,e)<Ko(h[0],h[1],t,e)&&(h=d[v]);for(var p=0;p<d.length;p++)d[p]&&Ko(d[p][0],d[p][1],n,i)<Ko(f[0],f[1],n,i)&&(f=d[p]);return h[0]===n&&h[1]===i||f[0]===t&&f[1]===e?null:[h,f]}var Xo=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},Ho=function(t,e,n){var i=[e[0]-t[0],e[1]-t[1]],o=Xo(i);if(o<1e-6)return t;var r=[n[0]-t[0],n[1]-t[1]],a=(i[0]*r[0]+i[1]*r[1])/o;return a<0?t:a>o?e:[t[0]+i[0]*a/o,t[1]+i[1]*a/o]},Jo=function(){var t=Fi(Math.ceil(1e9*Math.random())).element;Hi(t,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});var e="";return{start:function(t){e="M ".concat(t.x," ").concat(t.y," L ").concat(t.x," ").concat(t.y)},move:function(n,i){var o,r;o=n.x,r=n.y,e+=" ".concat(o," ").concat(r),t.setAttribute("d",e)},end:function(e,n){t.remove(),function(t){var e=9999,n=9999,i=-9999,o=-9999;t.forEach((function(t){e=Math.min(e,t[0]),n=Math.min(n,t[1]),i=Math.max(i,t[0]),o=Math.max(o,t[1])})),oi(e,n,i,o,{points:t}),yr.data.getNodeInArea(0,0,1920,1920,8).forEach((function(e){var n=function(t,e,n){n=n||20;var i=[],o=function(t){var o=e[0][0],r=e[0][1],a=0,s=0;if(1!==t.length||Do(t[0][0],t[0][1],o,r,n)){for(var l;a<t.length-1;){var u=t[a],d=t[a+1],c=Do(u[0],u[1],o,r,n),h=Do(d[0],d[1],o,r,n);if(c&&h)s=++a;else if(c&&!h)(f=Go(u[0],u[1],d[0],d[1],o,r,n))?(t[a]=f,s=a):a++;else if(!c&&h){var f;(f=Go(d[0],d[1],u[0],u[1],o,r,n))&&((l=t.slice(s,a+1)).push(f),i.push(l)),s=++a}else{var v=Uo(u[0],u[1],d[0],d[1],o,r,n);v?((l=t.slice(s,a+1))[l.length-1][0]===v[0][0]&&l[l.length-1][1]===v[0][1]||l.push(v[0]),l.length>1&&i.push(l),t[a]=v[1],t[a+1]&&t[a+1][0]==v[1][0]&&t[a+1][1]==v[1][1]&&a++,s=a):a++}}s!==a&&(l=t.slice(s,t.length))&&i.push(l)}else i.push(t)},r=function(t,o){var r,a=e[o],s=e[o+1],l=0,u=0;if(1!==t.length||-1!==(h=Qo(t[0][0],t[0][1],a[0],a[1],s[0],s[1],n)).indexOf(1)){for(;l<t.length-1;){var d=t[l],c=t[l+1],h=Qo(d[0],d[1],a[0],a[1],s[0],s[1],n),f=Qo(c[0],c[1],a[0],a[1],s[0],s[1],n);if(-1!==h.indexOf(1)&&-1!==f.indexOf(1))u=++l;else if(-1!==h.indexOf(1)&&-1===f.indexOf(1))(v=Vo(d[0],d[1],h,c[0],c[1],a[0],a[1],s[0],s[1],n))?(t[l]=v,u=l):l++;else if(-1===h.indexOf(1)&&-1!==f.indexOf(1)){var v;(v=Vo(c[0],c[1],f,d[0],d[1],a[0],a[1],s[0],s[1],n))?((r=t.slice(u,l+1)).push(v),i.push(r),u=++l):l++}else{var p=qo(d[0],d[1],c[0],c[1],a[0],a[1],s[0],s[1],n);p?((r=t.slice(u,l+1))[r.length-1][0]===p[0][0]&&r[r.length-1][1]===p[0][1]||r.push(p[0]),r.length>1&&i.push(r),t[l]=p[1],t[l+1]&&t[l+1][0]==p[1][0]&&t[l+1][1]==p[1][1]&&l++,u=l):l++}}u!==l&&(r=t.slice(u,t.length))&&i.push(r)}else i.push(t)};if(1===(e=function(t){var e=[];if(1===t.length)e=t;else{for(var n=0;n<t.length-1;)t[n][0]===t[n+1][0]&&t[n][1]===t[n+1][1]||e.push(t[n]),n++;0!==t.length&&0===e.length&&e.push(t[0]),t[t.length-1][0]===t[e.length-1][0]&&t[t.length-1][1]===t[e.length-1][1]||e.push(t[n])}return e}(e)).length){for(var a=0;a<t.length;a++)o(t[a]);t=i}else for(var s=0;s<e.length-1;s++){for(a=0;a<t.length;a++)r(t[a],s);t=i,i=[]}for(var l=0;l<t.length;l++)for(var u=0;u<t[l].length;u++)t[l][u][0]=Math.round(t[l][u][0]),t[l][u][1]=Math.round(t[l][u][1]);return t}(yr.data.getNode(e).size.points,t,2);console.log(n)}))}(n)}}},Yo=function(){var t=Zi(Kn.CREATE_GROUP,"g"),e=xi(Math.ceil(1e9*Math.random())),n=e.nodeId,i=e.element,o=e.attribute,r=e.size,a=e.source,s=function(e,n,a,s){(r=oi(e,n,a,s)).x=Jn(r.x),r.y=Jn(r.y),r.width=Jn(r.width),r.height=Jn(r.height),Object.assign(o,ri(7,r,o)),Hi(i,o),to(t,r)};return{start:function(t){s(t.x,t.y,t.x+r.width,t.y+r.height)},move:function(t,e){s(e[0][0],e[0][1],t.x,t.y)},end:function(e,s){r.width<100&&(r.width=100),r.height<20&&(r.height=20),r.width+r.height<8&&(r.width=100,r.height=20,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(o,ri(7,r,o)),Hi(i,o)),yr.data.node=Object.assign({id:n,type:7,name:"Text"},{size:r,attribute:o,source:a}),null==t||t.remove()}}},Zo=function(t){var e,n,i,o,r,a,s,l=(null===(e=t.mouseEvent)||void 0===e?void 0:e.target)||(null===(n=t.touchEvent)||void 0===n?void 0:n.target),u=(null==l?void 0:l.getAttribute("id"))||"",d=null==l?void 0:l.nodeName,c=jQuery(l).parents("g[id]").attr("id")||"";if(![Kn.INDEX_GROUP].includes(c))if((null===(i=t.mouseEvent)||void 0===i?void 0:i.altKey)||(null===(o=t.touchEvent)||void 0===o?void 0:o.altKey)||!u||u.match(/[^0-9]/)||!yr.dataSelect.nodeName.includes(d))yr.dataSelect.ids.length&&(yr.dataSelect.ids=[]),(0==(null===(r=t.mouseEvent)||void 0===r?void 0:r.button)||t.touchEvent)&&function(t,e){var n=Zi(Kn.SCAN_GROUP,"g"),i=oi(0,0,1,1);io(n,i),function(t,e,n,i){uo(t,{start:function(t){},move:function(t,i){var o,r,a,s;o=i[0][0],r=i[0][1],a=t.x,s=t.y,e=oi(o,r,a,s),io(n,e)},end:function(t,e){null==n||n.remove(),yr.dataSelect.ids=yr.data.getNodeInArea(Math.min(e[0][0],t.x),Math.min(e[0][1],t.y),Math.max(e[0][0],t.x),Math.max(e[0][1],t.y));var o=yr.dataSelect.nodes;i(o)}})}(t,i,n,e)}(t,tr);else{var h=parseFloat(u||"0");(null===(a=t.mouseEvent)||void 0===a?void 0:a.shiftKey)||(null===(s=t.touchEvent)||void 0===s?void 0:s.shiftKey)?yr.dataSelect.ids=[h].concat(yr.dataSelect.ids).filter((function(t,e,n){return n.indexOf(t)==e})):yr.dataSelect.ids=[h];var f=yr.dataSelect.nodes;tr(f)}},tr=function(t){var e,n,i,o,r,a,s=1;if(t.length&&(s=Math.max.apply(null,null!==(i=null===(n=null===(e=yr.data.slide)||void 0===e?void 0:e.svg)||void 0===n?void 0:n.nodes.map((function(t){var e;return null!==(e=t.idx)&&void 0!==e?e:0})))&&void 0!==i?i:[0])+1),1==t.length)t[0].idx||(t[0].idx=s,t[0].time=0);else if(t.length>=0){var l=t.map((function(t){var e;return null!==(e=t.idx)&&void 0!==e?e:0})).filter((function(t){return t>0})),u=l.length?Math.min.apply(null,l):s;t.forEach((function(t){var e;t.idx=u,t.time=null!==(e=t.time)&&void 0!==e?e:0}))}var d=Zi(Kn.INDEX_GROUP,"g");oo(d,null!==(a=null===(r=null===(o=yr.data.slide)||void 0===o?void 0:o.svg)||void 0===r?void 0:r.nodes)&&void 0!==a?a:[])},er=function(t){new Vi(t.container,t.target);var e=function(e,n,i,o){switch(e){case Ln.POINTER:jQuery(t.target).css({cursor:"auto"});break;case Ln.HAND:o?jQuery(t.target).css({cursor:"grabbing"}):jQuery(t.target).css({cursor:"grab"});break;case Ln.PEN:switch(n){case 1:jQuery(t.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case 2:jQuery(t.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case Ln.ERASER:jQuery(t.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case Ln.SHAPE:jQuery(t.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case Ln.TEXT:case Ln.FOREIGNOBJECT:jQuery(t.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};yr.pointer.onchange=function(t,n,i){e(t,n)},jQuery(t.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",(function(t){e(yr.pointer.pointer_type,void 0,0,!0)})).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",(function(t){e(yr.pointer.pointer_type,void 0,0,!1)})),document.addEventListener("wheel",(function(t){t.ctrlKey&&t.preventDefault()}),{passive:!1}),jQuery(t.container).off("wheel.icdt-init").on("wheel.icdt-init",(function(t){var e;t.preventDefault();var n=null!==(e=t.originalEvent)&&void 0!==e?e:t;if(!n.deltaX&&n.deltaY!=Math.floor(n.deltaY)||n.ctrlKey){var i=yr.screen.scale,o=.04*i*(n.deltaY>0?1:-1);yr.screen.scaleTo(i-o,lo({x:t.clientX,y:t.clientY},1,{x:0,y:0},yr.screen.offset))}else yr.screen.move(yr.screen.dislocation,{x:-n.deltaX,y:-n.deltaY})})),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",(function(t){yr.screen.actived=!!jQuery(t.target).parents(yr.container).length})),jQuery(t.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",(function(t){})),jQuery(t.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",(function(t){yr.pointer.pointer_type_temp==Ln.HAND&&(yr.pointer.pointer_type_temp=Ln.POINTER)})),jQuery(t.container).off("mousedown.icdt-init").on("mousedown.icdt-init",(function(e){0==e.button&&(t.container.includes("#")&&t.container.includes(e.target.getAttribute("id"))||t.container.includes(".")&&t.container.includes(e.target.getAttribute("class"))||t.container.includes(e.target.nodeName))&&(yr.pointer.pointer_type_temp||yr.pointer.pointer_type)===Ln.POINTER&&(yr.dataSelect.ids=[])})),jQuery(t.container).off("touchmove.icdt-init").on("touchmove.icdt-init",(function(t){t.preventDefault()}));var n=function(t){switch(yr.pointer.pointer_type_temp||yr.pointer.pointer_type){case Ln.POINTER:go(t);break;case Ln.HAND:!function(t){uo(t,new mo,1,{x:0,y:0})}(t);break;case Ln.PEN:!function(t){switch(yr.pointer.pen_type){case 1:uo(t,new Bo);break;case 2:uo(t,new Lo);break;case 3:!function(t){var e,n,i;!function(t,e){Yn(-1),Yn(1),Yn(8);var n={fill:"transparent"};Zi("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:e.x,y:e.y,width:e.width,height:e.height,class:"cursor-draw"},n)},t)}(Zi(Kn.INTERACTIVE_GROUP,"g"),null!==(i=null===(n=null===(e=yr.data.slide)||void 0===e?void 0:e.svg)||void 0===n?void 0:n.viewBox)&&void 0!==i?i:function(){var t=yr.screen.get;return{x:0,y:0,width:t.width,height:t.height}}()),t&&uo(t,new Fo)}(t)}}(t);break;case Ln.SHAPE:!function(t){var e,n=null;switch(yr.pointer.shape_type){case 1:n=new wo;break;case 2:n=new _o;break;case 5:n=new ko;break;case 3:n=new xo;break;case 4:n=new So(null===(e=bo.find((function(t){return t.type==yr.pointer.polygon_type})))||void 0===e?void 0:e.ratios);break;case 6:n=new Oo;break;case 9:n=new jo;break;case 7:case 8:n=new Eo}n&&uo(t,n)}(t);break;case Ln.FOREIGNOBJECT:!function(t){uo(t,new Oo)}(t);break;case Ln.IMAGE:!function(t){uo(t,new jo)}(t);break;case Ln.TEXT:!function(t){uo(t,new Yo)}(t);break;case Ln.ERASER:!function(t){uo(t,new Jo)}(t);break;case Ln.INDEX:Zo(t)}},i=!1;jQuery(t.target).off("touchstart.icdt-init").on("touchstart.icdt-init",(function(t){i=!0,n({touchEvent:t})})),jQuery(t.target).off("mousedown.icdt-init").on("mousedown.icdt-init",(function(t){1!=t.button&&(i?i=!1:n({mouseEvent:t}))})),t.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",(function(t){t.keyCode||t.which||t.charCode,yr.screen.actived&&((t.ctrlKey||t.altKey)&&(t.stopPropagation(),t.preventDefault()),Ro(t))})),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",(function(t){t.keyCode||t.which||t.charCode,yr.screen.actived&&((t.ctrlKey||t.altKey)&&(t.stopPropagation(),t.preventDefault()),Ro(t))})))},nr=function(){function t(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this._nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ids",{get:function(){return this._selected_Ids},set:function(t){this._selected_Ids=t,this.change(this.ids)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._selected_Ids.map((function(t){return yr.data.getNode(t)})).filter((function(t){return!t.isfake}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onchange",{set:function(t){this._fnChanges.push(t)},enumerable:!1,configurable:!0}),t.prototype.change=function(t){var e,n,i,o,r;null===(e=window.document.getElementById(Kn.RESIZE_GROUP))||void 0===e||e.remove(),null===(n=window.document.getElementById(Kn.SELECT_GROUP))||void 0===n||n.remove(),null===(i=window.document.getElementById(Kn.SCAN_GROUP))||void 0===i||i.remove(),null===(o=window.document.getElementById(Kn.CREATE_GROUP))||void 0===o||o.remove(),null===(r=window.document.getElementById(Kn.INTERACTIVE_GROUP))||void 0===r||r.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach((function(e){return e(t)}))},t.prototype.deleteNode=function(){for(var t=0,e=this._selected_Ids;t<e.length;t++){var n=e[t],i=yr.data.deleteNode(n);yr.history.push([{type:"delete",from:{id:i},to:{id:i}}])}yr.dataSelect.ids=[]},t.prototype.groupNode=function(){var t=[];if(yr.dataSelect.ids.length>=2){var e=yr.data.getNode(yr.dataSelect.ids[0]),n=Si(Math.ceil(1e9*Math.random()),void 0,e.pid?window.document.getElementById(e.pid):null),i=n.nodeId,o=n.attribute,r=n.size;yr.data.node=Object.assign({id:i,type:0,name:"G"},{size:r,attribute:o});for(var a=0,s=yr.dataSelect.ids;a<s.length;a++){var l=s[a];t.push(yr.data.addGroup(l,i))}}t.length&&(yr.dataSelect.ids=t,yo(yr.dataSelect.nodes))},t.prototype.ungroupNode=function(){for(var t=[],e=0,n=yr.dataSelect.ids;e<n.length;e++){var i=n[e];t.push(yr.data.unGroup(i))}t.length&&(yr.dataSelect.ids=t,yo(yr.dataSelect.nodes))},t}(),ir=function(){function t(){}return t.prototype.createNodeImage=function(t,e){var n,i,o,r,a=si(Math.ceil(1e9*Math.random()),{size:{x:(null!==(n=null==e?void 0:e.x)&&void 0!==n?n:50)-50,y:(null!==(i=null==e?void 0:e.y)&&void 0!==i?i:50)-50,width:100,height:100},source:{type:"image",image:Ii(t)}}),s=a.nodeId,l=a.element,u=a.size,d=a.attribute,c=a.source;!function(t){if(t){var e=new Image;e.onload=function(){var t=Jn(e.naturalWidth/e.naturalHeight,100);t>=1?(u.width=Math.min(e.naturalWidth,512),u.height=Jn(u.width/t,100)):(u.height=Math.min(e.naturalHeight,512),u.width=Jn(u.height*t,100)),u.x=Jn(u.x+50-u.width/2,100),u.y=Jn(u.y+50-u.height/2,100),Object.assign(d,ri(9,u,d)),Hi(l,d),yr.data.node=Object.assign({id:s,type:9,name:"Image"},{size:u,attribute:d,source:c})},e.onerror=function(e){console.error("ImgSrc load failed -> ".concat(t),e),null==l||l.remove()},e.src=t}}(null!==(r=null===(o=c.image)||void 0===o?void 0:o.url)&&void 0!==r?r:"")},t.prototype.createNodeIframe=function(t,e){var n,i,o=Li(Math.ceil(1e9*Math.random()),{size:{x:(null!==(n=null==e?void 0:e.x)&&void 0!==n?n:50)-50,y:(null!==(i=null==e?void 0:e.y)&&void 0!==i?i:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:Ii(t)}}),r=o.nodeId,a=o.element,s=o.size,l=o.attribute,u=o.style,d=o.source;!function(){var t,e,n=(null===(e=null===(t=yr.data.slide)||void 0===t?void 0:t.svg)||void 0===e?void 0:e.viewBox)||{x:0,y:0,width:100,height:100},i=Jn(n.width/n.height,100);i>=1?(s.width=Math.min(n.width,512),s.height=Jn(s.width/i,100)):(s.height=Math.min(n.height,512),s.width=Jn(s.height*i,100)),s.x=Jn(s.x+50-s.width/2,100),s.y=Jn(s.y+50-s.height/2,100),Object.assign(l,ri(9,s,l)),Hi(a,l),yr.data.node=Object.assign({id:r,type:6,name:"ForeignObject"},{size:s,attribute:l,style:u,source:d})}()},t.prototype.createNodeEmbed=function(t,e){var n,i,o={x:50,y:50,width:640,height:360};902==t.type&&(o.width=480,o.height=80);var r,a=Li(Math.ceil(1e9*Math.random()),{size:{x:(null!==(n=null==e?void 0:e.x)&&void 0!==n?n:o.x)-o.x,y:(null!==(i=null==e?void 0:e.y)&&void 0!==i?i:o.y)-o.y,width:o.width,height:o.height},style:{},source:{type:"embed",embed:Object.assign(t,Ii(t))}}),s=a.nodeId,l=a.element,u=a.size,d=a.attribute,c=a.style,h=a.source;(r=Jn(o.width/o.height,100))>=1?(u.width=Math.min(u.width,o.width),u.height=Jn(u.width/r,1)):(u.height=Math.min(u.height,o.height),u.width=Jn(u.height*r,1)),u.x=Jn(u.x+o.x-u.width/2,1),u.y=Jn(u.y+o.y-u.height/2,1),Object.assign(d,ri(6,u,d)),Hi(l,d),yr.data.node=Object.assign({id:s,type:6,name:"ForeignObject"},{size:u,attribute:d,style:c,source:h})},t.prototype.createNodeMedia=function(t,e){var n,i,o,r,a=si(Math.ceil(1e9*Math.random()),{size:{x:(null!==(n=null==e?void 0:e.x)&&void 0!==n?n:50)-50,y:(null!==(i=null==e?void 0:e.y)&&void 0!==i?i:50)-50,width:100,height:100},source:{type:"image",image:Ii(t.cover)}}),s=a.nodeId,l=a.element,u=a.size,d=a.attribute,c=a.source,h={click:{media:t.media}};!function(t){if(t){var e=new Image;e.onload=function(){var t=Jn(e.naturalWidth/e.naturalHeight,100);t>=1?(u.width=Math.min(e.naturalWidth,512),u.height=Jn(u.width/t,100)):(u.height=Math.min(e.naturalHeight,512),u.width=Jn(u.height*t,100)),u.x=Jn(u.x+50-u.width/2,100),u.y=Jn(u.y+50-u.height/2,100),Object.assign(d,ri(9,u,d)),Hi(l,d),yr.data.node=Object.assign({id:s,type:9,name:"Image"},{size:u,attribute:d,source:c,interactive:h})},e.onerror=function(e){console.error("ImgSrc load failed -> ".concat(t),e),null==l||l.remove()},e.src=t}}(null!==(r=null===(o=c.image)||void 0===o?void 0:o.url)&&void 0!==r?r:"")},t.prototype.createNodeText=function(t,e){var n,i,o,r=Li(Math.ceil(1e9*Math.random()),{size:{x:(null!==(n=null==e?void 0:e.x)&&void 0!==n?n:0)-0,y:(null!==(i=null==e?void 0:e.y)&&void 0!==i?i:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">'.concat(t.content,"</span>")}}}),a=r.nodeId,s=r.element,l=r.size,u=r.attribute,d=r.style,c=r.source;(o=Jn(4,100))>=1?(l.width=Math.min(l.width,320),l.height=Jn(l.width/o,1)):(l.height=Math.min(l.height,80),l.width=Jn(l.height*o,1)),l.x=Jn(l.x+0-l.width/2,1),l.y=Jn(l.y+0-l.height/2,1),Object.assign(u,ri(6,l,u)),Hi(s,u),yr.data.node=Object.assign({id:a,type:6,name:"ForeignObject"},{size:l,attribute:u,style:d,source:c})},t.prototype.insert=function(t){var e;if(yr.data.insertSlide(yr.data.slideId,1),t.title){var n=Li(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:'<span style="font-size: 40px;">'.concat(t.title,"</span>")}}}),i=n.nodeId,o=n.size,r=n.attribute,a=n.style,s=n.source;yr.data.node=Object.assign({id:i,type:6,name:"ForeignObject"},{size:o,attribute:r,style:a,source:s})}if(t.description){var l=Li(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:'<span style="font-size: 24px;">'.concat(t.description.replace(/\n/g,"<br/>"),"</span>")}}});i=l.nodeId,o=l.size,r=l.attribute,a=l.style,s=l.source,yr.data.node=Object.assign({id:i,type:6,name:"ForeignObject"},{size:o,attribute:r,style:a,source:s})}(null===(e=t.media)||void 0===e?void 0:e.prompt)&&(function(){var t=ai(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}}),e=t.nodeId,n=t.size,i=t.attribute;yr.data.node=Object.assign({id:e,type:3,name:"Rect"},{size:n,attribute:i})}(),function(){var e,n=Li(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:'<span style="font-size: 18px; color: #6633cc"><i>'.concat(null===(e=t.media)||void 0===e?void 0:e.prompt,"</i></span>")}}}),i=n.nodeId,o=n.size,r=n.attribute,a=n.style,s=n.source;yr.data.node=Object.assign({id:i,type:6,name:"ForeignObject"},{size:o,attribute:r,style:a,source:s})}())},t}(),or=function(){function t(){var t=this;this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=function(){var e,n=null===(e=t._dataSource.slides)||void 0===e?void 0:e.find((function(e,n){return n==t._slideIdx})),i=null==n?void 0:n.svg,o=function(t){var e=[];return t.filter((function(t){return!t.isdeleted})).forEach((function(t){0==t.type?e=e.concat(o(t.nodes||[])):e.push(t.id)})),e};return o((null==i?void 0:i.nodes)||[])}}return Object.defineProperty(t.prototype,"newSlideId",{get:function(){return Math.ceil(1e9*Math.random())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_defaultSlide",{get:function(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang mới",svg:{viewBox:yr.screen.frameSize,nodes:[]}}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"get",{get:function(){var t,e=function(t){return null==t||t.filter((function(t){return 0==t.type})).forEach((function(t){var n;t.nodes=e(null===(n=t.nodes)||void 0===n?void 0:n.filter((function(t){return!t.isdeleted})))})),t=null==t?void 0:t.filter((function(t){var e,n;return 0!=t.type||(null!==(n=null===(e=t.nodes)||void 0===e?void 0:e.length)&&void 0!==n?n:0)>0})),t||[]};return null===(t=this._dataSource.slides)||void 0===t||t.forEach((function(t){var n,i;t.svg&&(t.svg.nodes=e(null===(i=null===(n=t.svg)||void 0===n?void 0:n.nodes)||void 0===i?void 0:i.filter((function(t){return!t.isdeleted}))))})),this._dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getResource",{get:function(){var t,e=[];return null===(t=this._dataSource.slides)||void 0===t||t.forEach((function(t){var n,i,o,r,a,s,l,u,d,c,h,f,v,p,y;e.push(null===(i=null===(n=t.svg)||void 0===n?void 0:n.background)||void 0===i?void 0:i.path),null===(o=t.svg)||void 0===o||o.nodes.forEach((function(t){var n,i,o,r,a,s,l,u,d,c,h,f,v,p,y,g,m,b,w,_,x,S,k,E,O,j,z,I;e.push(null===(i=null===(n=t.source)||void 0===n?void 0:n.image)||void 0===i?void 0:i.path),e.push(null===(r=null===(o=t.source)||void 0===o?void 0:o.audio)||void 0===r?void 0:r.path),e.push(null===(s=null===(a=t.source)||void 0===a?void 0:a.video)||void 0===s?void 0:s.path),e.push(null===(u=null===(l=t.source)||void 0===l?void 0:l.file)||void 0===u?void 0:u.path),e.push(null===(c=null===(d=t.source)||void 0===d?void 0:d.iframe)||void 0===c?void 0:c.path),e.push(null===(f=null===(h=t.source)||void 0===h?void 0:h.track)||void 0===f?void 0:f.path),e.push(null===(g=null===(y=null===(p=null===(v=t.interactive)||void 0===v?void 0:v.show)||void 0===p?void 0:p.audio)||void 0===y?void 0:y.source)||void 0===g?void 0:g.path),e.push(null===(_=null===(w=null===(b=null===(m=t.interactive)||void 0===m?void 0:m.click)||void 0===b?void 0:b.audio)||void 0===w?void 0:w.source)||void 0===_?void 0:_.path),e.push(null===(E=null===(k=null===(S=null===(x=t.interactive)||void 0===x?void 0:x.click)||void 0===S?void 0:S.image)||void 0===k?void 0:k.source)||void 0===E?void 0:E.path),e.push(null===(I=null===(z=null===(j=null===(O=t.interactive)||void 0===O?void 0:O.click)||void 0===j?void 0:j.video)||void 0===z?void 0:z.source)||void 0===I?void 0:I.path)})),e.push(null===(a=null===(r=t.test)||void 0===r?void 0:r.audiotrue)||void 0===a?void 0:a.path),e.push(null===(l=null===(s=t.test)||void 0===s?void 0:s.audiofalse)||void 0===l?void 0:l.path),e.push(null===(d=null===(u=t.test)||void 0===u?void 0:u.effecttrue)||void 0===d?void 0:d.path),e.push(null===(h=null===(c=t.test)||void 0===c?void 0:c.effectfalse)||void 0===h?void 0:h.path),e.push(null===(v=null===(f=t.test)||void 0===f?void 0:f.icontrue)||void 0===v?void 0:v.path),e.push(null===(y=null===(p=t.test)||void 0===p?void 0:p.iconfalse)||void 0===y?void 0:y.path)})),e.filter((function(t){return t})).map((function(t){return t.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()})).filter((function(t,e,n){return n.indexOf(t)==e}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getFonts",{get:function(){var t,e,n;return e=JSON.stringify(null!==(t=this._dataSource.slides)&&void 0!==t?t:[]),n=[],[/font-family\s*:\s*([^;]+);/g,/"fontFamily":"([a-zA-Z0-9\-\_\'\s]+)"/g].forEach((function(t){var i,o;n=pi(pi([],n,!0),null!==(o=null===(i=e.replace(/&quot;/g,"'").match(t))||void 0===i?void 0:i.filter((function(t,e,n){return n.indexOf(t)==e})).map((function(e){return e.replace(t,"$1").replace(/[^a-zA-Z0-9\-\_\s\,]/g,"").trim()})).filter((function(t,e,n){return t&&n.indexOf(t)==e})))&&void 0!==o?o:[],!0)})),n.filter((function(t,e,n){return n.indexOf(t)==e})).map((function(t){return(e=t,r={},a=/Italic$/,s=/Thin$/,l=/ExtraLight|UltraLight$/i,u=/Light$/,d=/Regular|Normal$/,c=/Medium$/,h=/SemiBold|DemiBold$/i,f=/Bold$/,v=/ExtraBold|UltraBold$/i,p=/Black|Heavy$/,(e=null!==(o=null===(i=null===(n=e.split(","))||void 0===n?void 0:n.shift())||void 0===i?void 0:i.trim().replace(/[^a-zA-Z_-\s]/g,""))&&void 0!==o?o:"").match(a)&&(r.fontStyle="italic",e=e.replace(a,"").trim()),e.match(s)?(r.fontWeight=100,e=e.replace(s,"").trim()):e.match(l)?(r.fontWeight=200,e=e.replace(l,"").trim()):e.match(u)?(r.fontWeight=300,e=e.replace(u,"").trim()):e.match(d)?(r.fontWeight=400,e=e.replace(d,"").trim()):e.match(c)?(r.fontWeight=500,e=e.replace(c,"").trim()):e.match(h)?(r.fontWeight=600,e=e.replace(h,"").trim()):e.match(f)?(r.fontWeight=700,e=e.replace(f,"").trim()):e.match(v)?(r.fontWeight=800,e=e.replace(v,"").trim()):e.match(p)&&(r.fontWeight=900,e=e.replace(p,"").trim()),r.fontFamily=e.replace(/[\-\_\s]+$/,""),r).fontFamily;var e,n,i,o,r,a,s,l,u,d,c,h,f,v,p})).filter((function(t){return!!t})).filter((function(t,e,n){return n.indexOf(t)==e}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"set",{set:function(t){this._dataSource=t,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),qi(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){var t,e=function(t){return null==t||t.filter((function(t){return 0==t.type})).forEach((function(t){var n;t.nodes=e(null===(n=t.nodes)||void 0===n?void 0:n.filter((function(t){return!t.isdeleted})))})),t=null==t?void 0:t.filter((function(t){var e,n;return 0!=t.type||(null!==(n=null===(e=t.nodes)||void 0===e?void 0:e.length)&&void 0!==n?n:0)>0})),t||[]};return null===(t=this._dataSource.slides)||void 0===t||t.forEach((function(t){var n,i;t.svg&&(t.svg.nodes=e(null===(i=null===(n=t.svg)||void 0===n?void 0:n.nodes)||void 0===i?void 0:i.filter((function(t){return!t.isdeleted}))))})),this._dataSource.resources=this.getResource,this._dataSource},set:function(t){this._dataSource=t,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),qi(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slideId",{get:function(){var t,e;return null!==(e=null===(t=this.slide)||void 0===t?void 0:t.id)&&void 0!==e?e:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slideIdx",{get:function(){return this._slideIdx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slide",{get:function(){var t,e=this;return null===(t=this._dataSource.slides)||void 0===t?void 0:t.find((function(t,n){return n==e._slideIdx}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slides",{get:function(){return this._dataSource.slides||[]},enumerable:!1,configurable:!0}),t.prototype.backSlide=function(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))},t.prototype.nextSlide=function(){var t,e;this._slideIdx<(null!==(e=null===(t=this._dataSource.slides)||void 0===t?void 0:t.length)&&void 0!==e?e:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))},t.prototype.refreshSlide=function(){qi(),To(this.slide)},t.prototype.openSlide=function(t,e){var n,i,o,r,a,s,l,u,d,c;if(t){for(var h=0,f=null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0;h<f;h++)if((null!==(o=this._dataSource.slides)&&void 0!==o?o:[])[h].id==t){this._slideIdx=h;break}}else e&&e>=0&&e<(null!==(a=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==a?a:0)?this._slideIdx=null!=e?e:0:(this._slideIdx=0,(null===(s=this._dataSource.slides)||void 0===s?void 0:s.length)||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))]));qi(),(null===(u=null===(l=this.slide)||void 0===l?void 0:l.svg)||void 0===u?void 0:u.viewBox)&&(yr.screen.frameSize=this.slide.svg.viewBox),To(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(c=null===(d=this._dataSource.slides)||void 0===d?void 0:d.length)&&void 0!==c?c:0,this.slide)},t.prototype.addSlide=function(){var t,e,n;null===(t=this._dataSource.slides)||void 0===t||t.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(e=this._dataSource.slides)||void 0===e?void 0:e.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)},t.prototype.tryMergeSlide=function(t,e,n){var i,o,r,a=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((function(e){return e.id==t}));return a?(null===(o=a.test)||void 0===o?void 0:o.type)&&(null===(r=e.test)||void 0===r?void 0:r.type)?"boolean"!=typeof n?-1:n?this.mergeSlide(t,a,e):this.insertSlide(t,1,e):this.mergeSlide(t,a,e):this.insertSlide(t,1,e)},t.prototype.tryReplaceSlide=function(t,e){var n,i,o,r,a,s=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((function(e){return e.id==t}));if(!s||(null===(i=null==s?void 0:s.svg)||void 0===i?void 0:i.nodes.filter((function(t){return!t.isdeleted})).length))return this.insertSlide(t,1,e);var l=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(s))&&void 0!==r?r:0;return null===(a=this._dataSource.slides)||void 0===a||a.splice(l,1,e),this._slideIdx=l,this.openSlide(void 0,this._slideIdx),1},t.prototype.mergeSlide=function(t,e,n){var i,o,r,a;return e.test=null!==(i=n.test)&&void 0!==i?i:e.test,e.audio=null!==(o=n.audio)&&void 0!==o?o:e.audio,e.svg?e.svg.nodes=e.svg.nodes.concat(null!==(a=null===(r=n.svg)||void 0===r?void 0:r.nodes)&&void 0!==a?a:[]):e.svg=n.svg,this.openSlide(t),1},t.prototype.insertSlide=function(t,e,n){var i,o,r,a,s,l,u=null!==(o=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((function(e){return e.id==t})))&&void 0!==o?o:this._defaultSlide,d=(null!==(a=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(u))&&void 0!==a?a:0)+e;return n?(n.id=this.newSlideId,n.code=void 0,n.name||(n.name="Trang mới"),(null===(s=n.svg)||void 0===s?void 0:s.viewBox)||n.svg&&(n.svg.viewBox=yr.screen.frameSize)):n=this._defaultSlide,null===(l=this._dataSource.slides)||void 0===l||l.splice(d,0,n),this._slideIdx=d,this.openSlide(void 0,this._slideIdx),1},t.prototype.copySlide=function(t){var e,n,i,o,r,a,s,l=null!==(n=null===(e=this._dataSource.slides)||void 0===e?void 0:e.find((function(e){return e.id==t})))&&void 0!==n?n:this._defaultSlide,u=(null!==(o=null===(i=this._dataSource.slides)||void 0===i?void 0:i.indexOf(l))&&void 0!==o?o:0)+1,d=Object.assign(JSON.parse(JSON.stringify(l)),{id:this.newSlideId,code:void 0,name:"".concat(l.name," + (Copy)")});null===(r=this._dataSource.slides)||void 0===r||r.splice(u,0,d),this.changeSlide(this.slides,this.slideIdx,null!==(s=null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)&&void 0!==s?s:0,this.slide)},t.prototype.moveSlide=function(t,e){var n,i,o,r,a,s,l=null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((function(e){return e.id==t})))&&void 0!==i?i:this._defaultSlide,u=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.indexOf(l))&&void 0!==r?r:0;null===(a=this._dataSource.slides)||void 0===a||a.splice(u+e,0,null===(s=this._dataSource.slides)||void 0===s?void 0:s.splice(u,1)[0])},t.prototype.deleteSlide=function(t){var e,n,i,o,r,a,s,l,u=null!==(n=null===(e=this._dataSource.slides)||void 0===e?void 0:e.find((function(e){return e.id==t})))&&void 0!==n?n:this._defaultSlide,d=null!==(o=null===(i=this._dataSource.slides)||void 0===i?void 0:i.indexOf(u))&&void 0!==o?o:0;null===(r=this._dataSource.slides)||void 0===r||r.splice(d,1),(null===(a=this._dataSource.slides)||void 0===a?void 0:a.length)?d<this._slideIdx?(--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(l=null===(s=this._dataSource.slides)||void 0===s?void 0:s.length)&&void 0!==l?l:0,this.slide)):d==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx)):this.addSlide()},t.prototype.deleteSlide1=function(t){var e,n,i,o,r,a,s=null!==(n=null===(e=this._dataSource.slides)||void 0===e?void 0:e.find((function(e){return e.id==t})))&&void 0!==n?n:this._defaultSlide,l=null!==(o=null===(i=this._dataSource.slides)||void 0===i?void 0:i.indexOf(s))&&void 0!==o?o:0;if(s.isdeleted=!0,null===(a=null===(r=this._dataSource.slides)||void 0===r?void 0:r.filter((function(t){return!t.isdeleted})))||void 0===a?void 0:a.length){for(var u=!0;s.isdeleted;)u?l++:l--,this._dataSource.slides[l]?s=this._dataSource.slides[l]:u=!u;this.openSlide(s.id)}else this.addSlide()},Object.defineProperty(t.prototype,"onChangeSlide",{set:function(t){this._fnChangeSlides.push(t)},enumerable:!1,configurable:!0}),t.prototype.changeSlide=function(t,e,n,i){this._fnChangeSlides.forEach((function(o){return o(t,e,n,i)}))},Object.defineProperty(t.prototype,"node",{set:function(t){var e,n,i=this,o=null===(e=this._dataSource.slides)||void 0===e?void 0:e.find((function(t,e){return e==i._slideIdx}));(null===(n=null==o?void 0:o.svg)||void 0===n?void 0:n.nodes)&&o.svg.nodes.push(t),yr.history.push([{type:"add",from:{id:t.id},to:{id:t.id}}]),To(o),To(o,null==o?void 0:o.id)},enumerable:!1,configurable:!0}),t.prototype.findNode=function(t){var e,n,i,o,r,a,s=this,l=null===(e=this._dataSource.slides)||void 0===e?void 0:e.find((function(t,e){return e==s._slideIdx})),u=null==l?void 0:l.svg,d=function(e,n){var i=null==e?void 0:e.find((function(e){return e.id==t}));if(i)return i.pid=n,i;for(var o=0,r=e.length||0;o<r&&!i&&!(i=d(e[o].nodes||[],e[o].id));)o++;return i},c=d((null==u?void 0:u.nodes)||[]);return c?(c.style=null!==(n=c.style)&&void 0!==n?n:{},c.source=null!==(i=c.source)&&void 0!==i?i:{},c.animate=null!==(o=c.animate)&&void 0!==o?o:{},c.interactive=null!==(r=c.interactive)&&void 0!==r?r:{},c.variable=null!==(a=c.variable)&&void 0!==a?a:{},c):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}},t.prototype.getNode=function(t){var e,n=this,i=null===(e=this._dataSource.slides)||void 0===e?void 0:e.find((function(t,e){return e==n._slideIdx})),o=null==i?void 0:i.svg,r=function(e){var n,i,o,a,s,l=(null==e?void 0:e.find((function(e){return e.id==t})))||function(t){for(var e,n,i,o,a,s=null,l=0,u=t.length||0;l<u&&!s;){if(s=r(t[l].nodes)){s.pid=t[l].id;break}l++}return s&&(s.style=null!==(e=s.style)&&void 0!==e?e:{},s.source=null!==(n=s.source)&&void 0!==n?n:{},s.animate=null!==(i=s.animate)&&void 0!==i?i:{},s.interactive=null!==(o=s.interactive)&&void 0!==o?o:{},s.variable=null!==(a=s.variable)&&void 0!==a?a:{}),s}((null==e?void 0:e.filter((function(t){return 0==t.type})))||[]);return l&&(l.style=null!==(n=l.style)&&void 0!==n?n:{},l.source=null!==(i=l.source)&&void 0!==i?i:{},l.animate=null!==(o=l.animate)&&void 0!==o?o:{},l.interactive=null!==(a=l.interactive)&&void 0!==a?a:{},l.variable=null!==(s=l.variable)&&void 0!==s?s:{}),l};return r((null==o?void 0:o.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}},t.prototype.getNodeInArea=function(t,e,n,i,o){var r,a=this,s=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((function(t,e){return e==a._slideIdx})),l=null==s?void 0:s.svg,u=function(r){var a=[];return r.filter((function(t){return!t.isdeleted})).forEach((function(r){0==r.type?a=a.concat(u(r.nodes||[])):t>r.size.x||e>r.size.y||n<r.size.x+r.size.width||i<r.size.y+r.size.height||(o?r.type==o&&a.push(r.id):a.push(r.id))})),a};return u((null==l?void 0:l.nodes)||[])},t.prototype.getNodeOnArea=function(t,e,n,i,o){var r,a=this,s=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((function(t,e){return e==a._slideIdx})),l=null==s?void 0:s.svg,u=function(r){var a=[];return r.filter((function(t){return!t.isdeleted})).forEach((function(r){0==r.type?a=a.concat(u(r.nodes||[])):r.size.x+r.size.width<t||r.size.y+r.size.height<e||r.size.x>n||r.size.y>i||(o?r.type==o&&a.push(r.id):a.push(r.id))})),a};return u((null==l?void 0:l.nodes)||[])},t.prototype.deleteNode=function(t,e){var n;return this.getNode(t).isdeleted=null==e||e,To(this.slide),To(this.slide,null===(n=this.slide)||void 0===n?void 0:n.id),t},t.prototype.unGroup=function(t){var e,n,i,o=this.getNode(t),r=Math.ceil(1e9*Math.random());return null===(n=null===(e=this.slide)||void 0===e?void 0:e.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(o)),{id:r})),Object.assign(o,{isdeleted:!0}),To(this.slide),To(this.slide,null===(i=this.slide)||void 0===i?void 0:i.id),r},t.prototype.addGroup=function(t,e){var n,i=this.getNode(t),o=this.getNode(e);o.nodes=o.nodes||[];var r=Math.ceil(1e9*Math.random());return o.nodes.push(Object.assign(JSON.parse(JSON.stringify(i)),{id:r})),Object.assign(i,{isdeleted:!0}),To(this.slide),To(this.slide,null===(n=this.slide)||void 0===n?void 0:n.id),r},t.prototype.setNodeP=function(t,e){var n,i,o=null===(i=null===(n=this.slide)||void 0===n?void 0:n.svg)||void 0===i?void 0:i.nodes.find((function(e){return e.id==t}));o&&(o.pid=e||null)},t.prototype.bringToFront=function(t){this.bringToFrontStep(t,0)},t.prototype.sendToBack=function(t){this.sendToBackStep(t,0)},t.prototype.bringToFrontStep=function(t,e){var n,i,o,r,a,s,l,u,d,c=this;null===(i=null===(n=this.slide)||void 0===n?void 0:n.svg)||void 0===i||i.nodes.forEach((function(t,e){t.index=e+1}));var h=(null!==(a=null===(r=null===(o=this.slide)||void 0===o?void 0:o.svg)||void 0===r?void 0:r.nodes.length)&&void 0!==a?a:0)+1;t.map((function(t){var e,n,i,o;return{id:t,index:null!==(o=null===(i=null===(n=null===(e=c.slide)||void 0===e?void 0:e.svg)||void 0===n?void 0:n.nodes.find((function(e){return e.id==t})))||void 0===i?void 0:i.index)&&void 0!==o?o:0}})).sort((function(t,e){return t.index-e.index})).forEach((function(t){var n,i,o,r;e?null===(r=null===(o=c.slide)||void 0===o?void 0:o.svg)||void 0===r||r.nodes.filter((function(e,n){return e.id==t.id})).forEach((function(n){n.index=e+t.index+t.index/1e3})):null===(i=null===(n=c.slide)||void 0===n?void 0:n.svg)||void 0===i||i.nodes.filter((function(e){return e.id==t.id})).forEach((function(e){e.index=h+t.index}))})),null===(l=null===(s=this.slide)||void 0===s?void 0:s.svg)||void 0===l||l.nodes.sort((function(t,e){var n,i;return(null!==(n=t.index)&&void 0!==n?n:0)-(null!==(i=e.index)&&void 0!==i?i:0)})),Mo(this.slide),null===(u=window.document.getElementById(Kn.RESIZE_GROUP))||void 0===u||u.remove(),null===(d=window.document.getElementById(Kn.SELECT_GROUP))||void 0===d||d.remove(),yo(yr.dataSelect.nodes)},t.prototype.sendToBackStep=function(t,e){var n,i,o,r,a,s,l=this;null===(i=null===(n=this.slide)||void 0===n?void 0:n.svg)||void 0===i||i.nodes.forEach((function(t,e){t.index=e+1})),t.map((function(t){var e,n,i,o;return{id:t,index:null!==(o=null===(i=null===(n=null===(e=l.slide)||void 0===e?void 0:e.svg)||void 0===n?void 0:n.nodes.find((function(e){return e.id==t})))||void 0===i?void 0:i.index)&&void 0!==o?o:0}})).sort((function(t,e){return t.index-e.index})).forEach((function(t){var n,i,o,r;e?null===(r=null===(o=l.slide)||void 0===o?void 0:o.svg)||void 0===r||r.nodes.filter((function(e){return e.id==t.id})).forEach((function(n){n.index=e+t.index+t.index/1e3})):null===(i=null===(n=l.slide)||void 0===n?void 0:n.svg)||void 0===i||i.nodes.filter((function(e){return e.id==t.id})).forEach((function(e){e.index=t.index/100-1}))})),null===(r=null===(o=this.slide)||void 0===o?void 0:o.svg)||void 0===r||r.nodes.sort((function(t,e){var n,i;return(null!==(n=t.index)&&void 0!==n?n:0)-(null!==(i=e.index)&&void 0!==i?i:0)})),Mo(this.slide),null===(a=window.document.getElementById(Kn.RESIZE_GROUP))||void 0===a||a.remove(),null===(s=window.document.getElementById(Kn.SELECT_GROUP))||void 0===s||s.remove(),yo(yr.dataSelect.nodes)},t.prototype.bringToFrontArea=function(t){var e,n,i,o,r,a,s=this,l=t.map((function(t){return yr.data.getNode(t)})).filter((function(t){return!t.isfake})),u=rr(l),d=u.x1,c=u.y1,h=u.x2,f=u.y2,v=this.getNodeOnArea(d,c,h,f);null===(n=null===(e=this.slide)||void 0===e?void 0:e.svg)||void 0===n||n.nodes.forEach((function(t,e){t.index=e+1}));var p=v.map((function(t){var e,n,i,o;return null!==(o=null===(i=null===(n=null===(e=s.slide)||void 0===e?void 0:e.svg)||void 0===n?void 0:n.nodes.find((function(e){return e.id==t})))||void 0===i?void 0:i.index)&&void 0!==o?o:0})),y=Math.max.apply(null,p);t.forEach((function(t,e){var n,i;null===(i=null===(n=s.slide)||void 0===n?void 0:n.svg)||void 0===i||i.nodes.filter((function(e){return e.id==t})).forEach((function(t){t.index=y+(e+1)/100}))})),null===(o=null===(i=this.slide)||void 0===i?void 0:i.svg)||void 0===o||o.nodes.sort((function(t,e){var n,i;return(null!==(n=t.index)&&void 0!==n?n:0)-(null!==(i=e.index)&&void 0!==i?i:0)})),Mo(this.slide),null===(r=window.document.getElementById(Kn.RESIZE_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(Kn.SELECT_GROUP))||void 0===a||a.remove(),yo(yr.dataSelect.nodes)},t.prototype.sendToBackArea=function(t){var e,n,i,o,r,a,s=this,l=t.map((function(t){return yr.data.getNode(t)})).filter((function(t){return!t.isfake})),u=rr(l),d=u.x1,c=u.y1,h=u.x2,f=u.y2,v=this.getNodeOnArea(d,c,h,f);null===(n=null===(e=this.slide)||void 0===e?void 0:e.svg)||void 0===n||n.nodes.forEach((function(t,e){t.index=e+1}));var p=v.map((function(t){var e,n,i,o;return null!==(o=null===(i=null===(n=null===(e=s.slide)||void 0===e?void 0:e.svg)||void 0===n?void 0:n.nodes.find((function(e){return e.id==t})))||void 0===i?void 0:i.index)&&void 0!==o?o:0})),y=Math.min.apply(null,p)-1;t.forEach((function(t,e){var n,i;null===(i=null===(n=s.slide)||void 0===n?void 0:n.svg)||void 0===i||i.nodes.filter((function(e){return e.id==t})).forEach((function(t){t.index=y+(e+1)/100}))})),null===(o=null===(i=this.slide)||void 0===i?void 0:i.svg)||void 0===o||o.nodes.sort((function(t,e){var n,i;return(null!==(n=t.index)&&void 0!==n?n:0)-(null!==(i=e.index)&&void 0!==i?i:0)})),Mo(this.slide),null===(r=window.document.getElementById(Kn.RESIZE_GROUP))||void 0===r||r.remove(),null===(a=window.document.getElementById(Kn.SELECT_GROUP))||void 0===a||a.remove(),yo(yr.dataSelect.nodes)},t}(),rr=function(t){var e=999999,n=999999,i=-999999,o=-999999;return t.forEach((function(t){e=Math.min(e,t.size.x),n=Math.min(n,t.size.y),i=Math.max(i,t.size.x+t.size.width),o=Math.max(o,t.size.y+t.size.height)})),{x1:e,y1:n,x2:i,y2:o}},ar=function(){function t(){this._index=-1,this._dataSource=[],this.undoExecute=function(t){t.forEach((function(t){switch(t.type){case"add":yr.data.deleteNode(t.from.id);break;case"edit":break;case"delete":yr.data.deleteNode(t.from.id,!1);break;case"size":var e=yr.data.getNode(t.from.id),n=e.id,i=e.type,o=e.size,r=e.attribute;Object.assign(o,t.from.size),Object.assign(r,ri(i,o,r)),Hi(window.document.getElementById(n),r);break;case"attribute":var a=yr.data.getNode(t.from.id);n=a.id,r=a.attribute,Object.assign(r,t.from.attribute),Hi(window.document.getElementById(n),r);break;case"style":var s=yr.data.getNode(t.from.id),l=(n=s.id,s.style);Object.assign(null!=l?l:{},t.from.style),Ji(window.document.getElementById(n),l);break;case"source":var u=yr.data.getNode(t.from.id),d=(n=u.id,i=u.type,u.source);Object.assign(null!=d?d:{},t.from.source),Yi(window.document.getElementById(n),i,null!=d?d:{});break;case"animate":var c=yr.data.getNode(t.from.id).animate;Object.assign(null!=c?c:{},t.from.animate);break;case"interactive":var h=yr.data.getNode(t.from.id).interactive;Object.assign(null!=h?h:{},t.from.interactive);break;case"variable":var f=yr.data.getNode(t.from.id).variable;Object.assign(null!=f?f:{},t.from.variable)}})),yr.dataSelect.ids=[]},this.redoExecute=function(t){t.forEach((function(t){switch(t.type){case"add":yr.data.deleteNode(t.to.id,!1);break;case"edit":break;case"delete":yr.data.deleteNode(t.to.id,!0);break;case"size":var e=yr.data.getNode(t.to.id),n=e.id,i=e.type,o=e.size,r=e.attribute;Object.assign(o,t.to.size),Object.assign(r,ri(i,o,r)),Hi(window.document.getElementById(n),r);break;case"attribute":var a=yr.data.getNode(t.to.id);n=a.id,r=a.attribute,Object.assign(r,t.to.attribute),Hi(window.document.getElementById(n),r);break;case"style":var s=yr.data.getNode(t.to.id),l=(n=s.id,s.style);Object.assign(null!=l?l:{},t.to.style),Ji(window.document.getElementById(n),l);break;case"source":var u=yr.data.getNode(t.to.id),d=(n=u.id,i=u.type,u.source);Object.assign(null!=d?d:{},t.to.source),Yi(window.document.getElementById(n),i,null!=d?d:{});break;case"animate":var c=yr.data.getNode(t.to.id).animate;Object.assign(null!=c?c:{},t.to.animate);break;case"interactive":var h=yr.data.getNode(t.to.id).interactive;Object.assign(null!=h?h:{},t.to.interactive);break;case"variable":var f=yr.data.getNode(t.to.id).variable;Object.assign(null!=f?f:{},t.to.variable)}})),yr.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}return Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._dataSource.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!1,configurable:!0}),t.prototype.renew=function(){this._index=-1,this._dataSource=[],this.change()},t.prototype.push=function(t){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:t}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:t})),this.change()},t.prototype.undo=function(){if(!(this._index<0)){var t=this._dataSource[this._index];this.undoExecute(t.data),this._index--,this.change()}},t.prototype.redo=function(){if(!(this._index>=this._dataSource.length-1)){this._index++;var t=this._dataSource[this._index];this.redoExecute(t.data),this.change()}},Object.defineProperty(t.prototype,"onchange",{set:function(t){this._fnChanges.push(t)},enumerable:!1,configurable:!0}),t.prototype.change=function(){var t=this;this._fnChanges.forEach((function(e){return e(t.index,t.total)}))},t}(),sr=function(){function t(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}return Object.defineProperty(t.prototype,"actived",{get:function(){return this._actived},set:function(t){this._actived=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"get",{get:function(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"set",{set:function(t){var e,n;this._frameSize.width=null!==(e=null==t?void 0:t.width)&&void 0!==e?e:1080,this._frameSize.height=null!==(n=null==t?void 0:t.height)&&void 0!==n?n:1080,this.zoomTo="fit"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dislocation",{get:function(){return this._dislocation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"svgSize",{get:function(){return this._svgSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"svgViewBox",{get:function(){return this._svgViewBox},set:function(t){this._svgViewBox=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameSize",{get:function(){return this._frameSize},set:function(t){this._frameSize.x=t.x,this._frameSize.y=t.y,this._frameSize.width=t.width,this._frameSize.height=t.height,this.reset()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{set:function(t){this._offset=t.offset,this._width=t.width,this._height=t.height,this.reset()},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.scaleTo(this._scale,void 0,!0)},t.prototype.scaleTo=function(t,e,n){if(!(t<.01||t>100)){if(e=null!=e?e:{x:this._width/2,y:this._height/2},n)this._dislocation.x=this._width/t/2-e.x,this._dislocation.y=this._height/t/2-e.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var i={x:Math.max(0,Math.min(Jn(e.x/this._width,1e3),1)),y:Math.max(0,Math.min(Jn(e.y/this._height,1e3),1))},o={x:(this._width/t-this._width/this._scale)*i.x,y:(this._height/t-this._height/this._scale)*i.y};this._dislocation.x+=o.x,this._dislocation.y+=o.y}this._scale=t,this.change(),this.zoomChange(this.scale)}},Object.defineProperty(t.prototype,"zoomTo",{set:function(t){"fit"==t?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof t&&this.scaleTo(t/100,void 0,!0)},enumerable:!1,configurable:!0}),t.prototype.zoomIn=function(){this.scaleTo(this._scale+.04*this._scale)},t.prototype.zoomOut=function(){this.scaleTo(this._scale-.04*this._scale)},t.prototype.init=function(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}},t.prototype.move=function(t,e){this._dislocation.x=t.x+e.x/this._scale,this._dislocation.y=t.y+e.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()},t.prototype.change=function(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()},t.prototype.refScreen=function(){var t,e;t=yr.screen.svgViewBox,e=yr.screen.svgSize,yr.target&&(yr.target.setAttributeNS(null,"viewBox","".concat(t.x," ").concat(t.y," ").concat(t.width," ").concat(t.height)),yr.target.style.left="".concat(e.x,"px"),yr.target.style.top="".concat(e.y,"px"),yr.target.style.width="".concat(e.width,"px"),yr.target.style.height="".concat(e.height,"px"))},Object.defineProperty(t.prototype,"onZoomChange",{set:function(t){this._fnZoomChanges.push(t)},enumerable:!1,configurable:!0}),t.prototype.zoomChange=function(t){this._fnZoomChanges.forEach((function(e){return e(t)}))},t}(),lr=function(){function t(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}return t.prototype.loadConfig=function(){var t,e=this;t={callback:function(t){e._fill=(null==t?void 0:t.fill)||e._fill,e._stroke=(null==t?void 0:t.stroke)||e._stroke,e._strokeWidth=(null==t?void 0:t.strokeWidth)||e._strokeWidth,e._strokeLinecap=(null==t?void 0:t.strokeLinecap)||e._strokeLinecap,e._strokeLinejoin=(null==t?void 0:t.strokeLinejoin)||e._strokeLinejoin,e.changeFill(e.fill),e.changeStroke(e.stroke),e.changeStrokeWidth(e.strokeWidth)}},fi(void 0,void 0,void 0,(function(){var e,n;return vi(this,(function(i){switch(i.label){case 0:return[4,zo()];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,Io("icdt-config")];case 3:return e=i.sent()||{},"function"==typeof t.callback&&t.callback(e),[3,5];case 4:return n=i.sent(),"function"==typeof t.callback&&t.callback(null),console.error(n),[3,5];case 5:return[2]}}))}))},t.prototype.saveConfig=function(){var t;t={params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}},fi(void 0,void 0,void 0,(function(){var e;return vi(this,(function(n){switch(n.label){case 0:return[4,zo()];case 1:n.sent(),t.params=t.params||{},n.label=2;case 2:return n.trys.push([2,4,,5]),[4,No("icdt-config",t.params)];case 3:return n.sent(),"function"==typeof t.callback&&t.callback(t.params),[3,5];case 4:return e=n.sent(),"function"==typeof t.callback&&t.callback(null),console.error(e),[3,5];case 5:return[2]}}))}))},Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t,this.changeFill(this.fill)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t,this.changeStroke(this.stroke)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t,this.changeStrokeWidth(this.strokeWidth)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeLinecap",{get:function(){return this._strokeLinecap},set:function(t){this._strokeLinecap=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeLinejoin",{get:function(){return this._strokeLinejoin},set:function(t){this._strokeLinejoin=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textLength",{get:function(){return this._textLength},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onchangefill",{set:function(t){this._fnChangeFills.push(t)},enumerable:!1,configurable:!0}),t.prototype.changeFill=function(t){this._fnChangeFills.forEach((function(e){return e(t)})),this.saveConfig()},Object.defineProperty(t.prototype,"onchangestroke",{set:function(t){this._fnChangeStrokes.push(t)},enumerable:!1,configurable:!0}),t.prototype.changeStroke=function(t){this._fnChangeStrokes.forEach((function(e){return e(t)})),this.saveConfig()},Object.defineProperty(t.prototype,"onchangestrokewidth",{set:function(t){this._fnChangeStrokeWidths.push(t)},enumerable:!1,configurable:!0}),t.prototype.changeStrokeWidth=function(t){this._fnChangeStrokeWidths.forEach((function(e){return e(t)})),this.saveConfig()},t}(),ur=function(t){return t?JSON.parse(JSON.stringify(t)):t},dr=[{key:"FinishedTest",type:"boolean",value:!1,note:"Hoàn thành BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"Tổng số BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"Số BKT không vượt qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"Số BKT đã vượt qua",system:!0,readonly:!1}],cr=[],hr={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},fr={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]},vr=function(){function t(){var t=this;this._data_variables=ur(dr).concat(ur(cr)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=function(e){"function"==typeof e&&t.GetActionExecuteds.push(e)},this.OnGetActionExecuted=function(e){t.GetActionExecuteds.forEach((function(t){t(e)}))},this.SetActionExecutings=[],this.FuncSetExecutings=function(e){"function"==typeof e&&t.SetActionExecutings.push(e)},this.OnSetActionExecuting=function(e){t.SetActionExecutings.forEach((function(t){t(e)}))},this.SetActionExecuteds=[],this.FuncSetExecuteds=function(e){"function"==typeof e&&t.SetActionExecuteds.push(e)},this.OnSetActionExecuted=function(e){t.SetActionExecuteds.forEach((function(t){t(e)}));for(var n=0,i=t.getCondition(e.key)||[];n<i.length;n++){var o=i[n];o.if&&o.if.length>0&&(t.checkValueConditions(o.if)?t.setValueOperators(o.then||[]):t.setValueOperators(o.else||[]))}}}return t.prototype.renew=function(){this._data_variables=ur(dr).concat(ur(cr)),this._data_conditions=[]},Object.defineProperty(t.prototype,"totalVariable",{get:function(){return this._data_variables.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalCondition",{get:function(){return this._data_conditions.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"get",{get:function(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"set",{set:function(t){var e=this;if(t){var n,i={};"string"==typeof t?i=JSON.parse(t):"object"==typeof t&&(i=t),this._data_variables=i.variables||[],this._data_conditions=i.conditions||(n=[],e._data_variables.map((function(t){return t.change||[]})).forEach((function(t){n=n.concat(t)})),n),dr.forEach((function(t){var n=e._data_variables.filter((function(e){return e.key==t.key}));n.length?n.forEach((function(e,n,i){e.type=t.type,e.readonly=t.readonly,e.system=t.system})):e._data_variables.push(t)}))}},enumerable:!1,configurable:!0}),t.prototype.getVariableTemp=function(){return ur(hr)},t.prototype.getConditionTemp=function(){return ur(fr)},t.prototype.getKeys=function(){return this._data_variables.map((function(t){return t.key})).sort((function(t,e){return t.localeCompare(e)}))},t.prototype.getVariableAll=function(){return this._data_variables.length?ur((t=this._data_variables,e="key",function(n){for(var i=0,o=t.map((function(t){return t[e]})).sort();i<o.length;i++){var r=o[i];t.filter((function(t){return t[e]==r})).forEach((function(t){n.push(t)})),t=t.filter((function(t){return t[e]!=r}))}return n}([]))):ur(dr).concat(ur(cr));var t,e},t.prototype.setVariableAll=function(t){var e=this;t&&("string"==typeof t&&(t=JSON.parse(t)),"object"==typeof t&&(this._data_variables=t),dr.forEach((function(t){var n=e._data_variables.filter((function(e){return e.key==t.key}));n.length?n.forEach((function(e,n,i){e.type=t.type,e.readonly=t.readonly,e.system=t.system})):e._data_variables.push(t)})))},t.prototype.getVariable=function(t){return t?ur(this._data_variables.filter((function(e){return e.key==t}))[0]||{}):{}},t.prototype.setVariable=function(t,e,n){if(t){switch([null,void 0,NaN,1/0].indexOf(e)>=0&&(e=""),n||(n=(this._data_variables.filter((function(e){return e.key==t}))[0]||{}).type||null),n){case"string":"string"!=typeof e&&(e=e.toString().trim());break;case"number":"number"!=typeof e&&(e=parseFloat(e)||0);break;case"boolean":"string"==typeof e&&(e=e.toLowerCase()),"boolean"!=typeof e&&(e="1"==e||"true"==e||"yes"==e||"dung"==e)}var i=this._data_variables.filter((function(e){return e.key==t}));i.length?i.forEach((function(t,i,o){t.value=e,t.type=n})):this._data_variables.push({key:t,value:e,type:n})}},t.prototype.getValue=function(t,e){if(!t)return"";var n=this._data_variables.filter((function(e){return e.key==t}));if(n.length){var i,o=n[0]||{};switch(this.OnGetActionExecuting(o),e||(e=o.type||null),e){case"string":i=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":"string"==typeof o.value?o.value||"":o.value.toString().trim();break;case"number":i=[null,void 0,NaN,1/0].indexOf(o.value)>=0?0:"number"==typeof o.value?o.value||0:parseFloat(o.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(o.value)>=0?i=!1:"boolean"==typeof o.value?i=o.value:(i=(o.value+"").toLowerCase(),i="1"==o.value||"true"==o.value||"yes"==o.value||"dung"==o.value);break;case"audio-src":i=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value?'<audio controls style="width:280px;vertical-align:middle;"><source src="'.concat(o.value,'"></source></audio>'):"";break;case"video-src":i=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value?'<video controls style="width:280px;vertical-align:middle;"><source src="'.concat(o.value,'"></source></video>'):"";break;case"img-src":i=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value?'<img style="width:100%;vertical-align:middle;" src="'.concat(o.value,'"/>'):"";break;default:i=[null,void 0,NaN,1/0].indexOf(o.value)>=0?"":o.value}return this.OnGetActionExecuted(o),i}return null},t.prototype.setValue=function(t,e,n){if(t){switch([null,void 0,NaN,1/0].indexOf(e)>=0&&(e=""),n||(n=(this._data_variables.filter((function(e){return e.key==t}))[0]||{}).type||null),n){case"string":"string"!=typeof e&&(e=e.toString().trim());break;case"number":"number"!=typeof e&&(e=parseFloat(e)||0);break;case"boolean":"string"==typeof e&&(e=e.toLowerCase()),"boolean"!=typeof e&&(e="1"==e||"true"==e||"yes"==e||"dung"==e)}var i=this._data_variables.filter((function(e){return e.key==t}));if(i.length){var o=i[0];this.OnSetActionExecuting(o),o&&(o.value=e),this.OnSetActionExecuted(o)}}},t.prototype.getConditionAll=function(){return ur(this._data_conditions.sort((function(t,e){return t.idx-e.idx})))},t.prototype.setConditionAll=function(t){t&&("string"==typeof t&&(t=JSON.parse(t)),"object"==typeof t&&(this._data_conditions=t))},t.prototype.getCondition=function(t){return t?ur(this._data_conditions.filter((function(e){return e.variable==t||(e.variables||[]).indexOf(t)>=0})).sort((function(t,e){return t.idx-e.idx}))):{}},t.prototype.switchCondition=function(t,e,n){switch(t){case"==":return"string"==typeof n?(n=n.toLowerCase().trim(),"string"==typeof e&&(e=e.toLowerCase().trim()),n.split(";").map((function(t){return e==t.trim()?1:0})).reduce((function(t,e){return t+e}))>0):e==n;case"!=":return"string"==typeof n?(n=n.toLowerCase().trim(),"string"==typeof e&&(e=e.toLowerCase().trim()),0==n.split(";").map((function(t){return e==t.trim()?1:0})).reduce((function(t,e){return t+e}))):e!=n;case">=":return e>=n;case"<=":return e<=n;case">":return e>n;case"<":return e<n;case"∈":return n=(n+"").toLowerCase().trim(),e=(e+"").toLowerCase().trim(),n.split(";").map((function(t){return e.indexOf(t.trim())>=0?1:0})).reduce((function(t,e){return t+e}))>0;case"∉":return n=(n+"").toLowerCase().trim(),e=(e+"").toLowerCase().trim(),0==n.split(";").map((function(t){return e.indexOf(t.trim())>=0?1:0})).reduce((function(t,e){return t+e}));default:return!1}},t.prototype.switchOperator=function(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"=":return n;case"=!":return!n;case"==":return e==n;case"!=":return e!=n}},t.prototype.switchFormula=function(t,e){switch(t){case"sum":return e.reduce((function(t,e){return t+e}));case"sub":return e.reduce((function(t,e){return t-e}));case"pro":return e.reduce((function(t,e){return t*e}));case"div":return e.reduce((function(t,e){return t/e}));case"avg":var n=e.reduce((function(t,e){return t+e}))/(e.length||1);return Math.round(1e4*(n+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,e);case"max":return Math.max.apply(null,e);case"and":return e.reduce((function(t,e){return t&&e}));case"or":return e.reduce((function(t,e){return t||e}));default:return 0}},t.prototype.switchValueType_Condition=function(t){switch(t.valuetype){case"value":return this.switchCondition(t.condition,this.getValue(t.variable),t.value);case"variable":return this.switchCondition(t.condition,this.getValue(t.variable),this.getValue(t.value));default:return 0}},t.prototype.switchValueType_Operator=function(t){var e=this;switch(t.valuetype){case"value":return this.switchOperator(t.operator,this.getValue(t.variable),t.value);case"variable":return this.switchOperator(t.operator,this.getValue(t.variable),this.getValue(t.value));case"variables":var n=this.switchFormula(t.valueformula,t.value.map((function(t){return e.getValue(t)})));return this.switchOperator(t.operator,this.getValue(t.variable),n)}},t.prototype.checkValueCondition=function(t){return this.switchValueType_Condition(t)},t.prototype.getValueOperator=function(t){return this.switchValueType_Operator(t)},t.prototype.setValueOperator=function(t){(null==t?void 0:t.variable)&&this.setValue(t.variable,this.getValueOperator(t))},t.prototype.checkValueConditions=function(t){var e=this;return 0==t.map((function(t){switch(t.type){case"variable":return e.switchValueType_Condition(t)?0:1;case"variables":return 0==t.variables.map((function(n){return e.switchValueType_Condition(Object.assign(ur(t),{variable:n}))?0:1})).reduce((function(t,e){return t+e}))?0:1;default:return 0}})).reduce((function(t,e){return(null!=t?t:0)+(null!=e?e:0)}))},t.prototype.setValueOperators=function(t){for(var e,n=0,i=t;n<i.length;n++){var o=i[n];switch(o.type){case"variable":this.setValue(o.variable,this.getValueOperator(o));break;case"variables":for(var r=0,a=o.variables;r<a.length;r++){var s=a[r];this.setValue(s,this.getValueOperator(Object.assign(ur(o),{variable:s})))}break;case"slide":Ui.runSlide(void 0,void 0,o.slide);break;case"node":mi({id:o.node,nodeStatus:Ui.nodeStatus,slideStatus:Ui.slideStatus});var l=Ui.findNode(o.node);(null===(e=null==l?void 0:l.interactive)||void 0===e?void 0:e.click)&&_i(l,Ui.nodeStatus,Ui.slideStatus)}}},t.prototype.FuncGetExecutings=function(t){"function"==typeof t&&this.GetActionExecutings.push(t)},t.prototype.OnGetActionExecuting=function(t){this.GetActionExecutings.forEach((function(e){e(t)}))},t}(),pr=function(){function t(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}return t.prototype.setPointer_nochange=function(t,e,n){if(this._pointer_type=t,e)switch(t){case Ln.PEN:this._pen_type=e;break;case Ln.SHAPE:this._shape_type=e,n&&4===e&&(this._polygon_type=n)}},Object.defineProperty(t.prototype,"pointer_type",{get:function(){return this._pointer_type},set:function(t){switch(this._pointer_type=t,t){case Ln.PEN:this._pen_type||(this._pen_type=1);break;case Ln.SHAPE:this._shape_type||(this._shape_type=3)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointer_type_temp",{get:function(){return this._pointer_type_temp},set:function(t){this._pointer_type_temp=t,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pen_type",{get:function(){return this._pen_type},set:function(t){this._pen_type=t,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shape_type",{get:function(){return this._shape_type},set:function(t){this._shape_type=t,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygon_type",{get:function(){return this._polygon_type},set:function(t){this._polygon_type=t,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onchangePointerType",{set:function(t){this._fnChangePointerTypes.push(t)},enumerable:!1,configurable:!0}),t.prototype.changePointerType=function(t,e,n){this._fnChangePointerTypes.forEach((function(i){return i(t,e,n)}))},Object.defineProperty(t.prototype,"onchangePointerTypeTemp",{set:function(t){this._fnChangePointerTypeTemps.push(t)},enumerable:!1,configurable:!0}),t.prototype.changePointerTypeTemp=function(t,e,n){this._fnChangePointerTypeTemps.forEach((function(i){return i(t,e,n)}))},Object.defineProperty(t.prototype,"onchangePenType",{set:function(t){this._fnChangePenTypes.push(t)},enumerable:!1,configurable:!0}),t.prototype.changePenType=function(t,e,n){this._fnChangePenTypes.forEach((function(i){return i(t,e,n)}))},Object.defineProperty(t.prototype,"onchangeShapeType",{set:function(t){this._fnChangeShapeTypes.push(t)},enumerable:!1,configurable:!0}),t.prototype.changeShapeType=function(t,e,n){this._fnChangeShapeTypes.forEach((function(i){return i(t,e,n)}))},Object.defineProperty(t.prototype,"onchangePolygonType",{set:function(t){this._fnChangePolygonTypes.push(t)},enumerable:!1,configurable:!0}),t.prototype.changePolygonType=function(t,e,n){this._fnChangePolygonTypes.forEach((function(i){return i(t,e,n)}))},Object.defineProperty(t.prototype,"onchange",{set:function(t){this._fnChanges.push(t)},enumerable:!1,configurable:!0}),t.prototype.change=function(t,e,n){this._fnChanges.forEach((function(i){return i(t,e,n)}))},t}(),yr=new(function(){function t(){var t=this;this._container="",this._svg="",this._screen=sr.prototype,this._data=or.prototype,this._dataSelect=nr.prototype,this._slide=ir.prototype,this._history=ar.prototype,this._attribute=lr.prototype,this._pointer=pr.prototype,this._variable=vr.prototype,this._data=new or,this._dataSelect=new nr,this._slide=new ir,this._history=new ar,this._attribute=new lr,this._pointer=new pr,this._variable=new vr,this._pointer.onchangePointerType=function(){t._dataSelect.ids.length&&(t._dataSelect.ids=[])},this._data.onChangeSlide=function(){t._dataSelect.ids.length&&(t._dataSelect.ids=[])}}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}},set:function(t){this._screen.set=t.screen||{width:1080,height:1080},this._data.set=t.data||{},this._variable.set=t.variable||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"svg",{get:function(){return this._svg},set:function(t){this._svg=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return window.document.querySelector(this._svg)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this._screen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataSelect",{get:function(){return this._dataSelect},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slide",{get:function(){return this._slide},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"history",{get:function(){return this._history},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attribute",{get:function(){return this._attribute},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pointer",{get:function(){return this._pointer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variable",{get:function(){return this._variable},enumerable:!1,configurable:!0}),t.prototype.reloadView=function(){var t,e,n,i,o;this._screen.screen=(t=jQuery(this._container).offset(),e=jQuery(this._container).width(),n=jQuery(this._container).height(),{offset:{x:null!==(i=null==t?void 0:t.left)&&void 0!==i?i:0,y:null!==(o=null==t?void 0:t.top)&&void 0!==o?o:0},width:null!=e?e:0,height:null!=n?n:0})},t.prototype.init=function(t){this._container=t.container,this._svg=t.target,this._screen=new sr,er({container:t.container,target:t.target,iskeyboard:t.iskeyboard})},t}())}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return n[t](r,r.exports,o),r.exports}e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,o.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var r=Object.create(null);o.r(r);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&n;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>n[t]));return a.default=()=>n,o.d(r,a),r},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=o(160);window.addEventListener("load",(function(){var e;t.icdt.container="#mainContainer",t.icdt.svg="#mainSvg";var n,i,o,r=document.getElementById("mainActionList"),a=0,s=1;(null===_board_setting||void 0===_board_setting?void 0:_board_setting.buttons.paging)&&(i=document.createElement("button"),(o=new Image).height=40,o.title="Fullscreen",o.src="public/icon/Back.png",i.append(o),r.append(i),i.onclick=function(){a>0&&(a--,t.icdt_Run.runSlide(a))},(n=document.createElement("div")).className="page-info",n.textContent="".concat(a+1,"/").concat(s),r.append(n),t.icdt_Run.onChangeSlide=function(t,e,i,o,r){a=i,s=o,n.textContent="".concat(a+1,"/").concat(s)},function(){var e=document.createElement("button"),n=new Image;n.height=40,n.title="Fullscreen",n.src="public/icon/Next.png",e.append(n),r.append(e),e.onclick=function(){a<s-1&&(a++,t.icdt_Run.runSlide(a))}}()),(null===_board_setting||void 0===_board_setting?void 0:_board_setting.buttons.refresh)&&function(){var e=document.createElement("button"),n=new Image;n.height=40,n.title="Fullscreen",n.src="public/icon/Refresh.png",e.append(n),r.append(e),e.onclick=function(){t.icdt_Run.runSlide(a)}}(),(null===(e=null===_board_setting||void 0===_board_setting?void 0:_board_setting.buttons)||void 0===e?void 0:e.fullscreen)&&function(){var t=function(){return!!((t=document).fullscreen||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement);var t},e=document.createElement("button"),n=new Image;n.height=40,n.title="Fullscreen",n.src=t()?"public/icon/Fullscreen_on.png":"public/icon/Fullscreen_off.png",e.append(n),r.append(e),e.onclick=function(){var e;t()?(e=document).exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen():function(){var t;(t=document.body).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}(),setTimeout((function(){n.src=t()?"public/icon/Fullscreen_on.png":"public/icon/Fullscreen_off.png"}),600)}}();t.icdt.config={fileuploadurl:"/",readfileuploadurl:"files/"},t.icdt_Run.data=_board_content,t.icdt_Run.runSlide();var l=_board_content.fonts||[];(0,t.APP_FONT_Content)(l.filter((function(t){return"Roboto"!=t})),"https://www.tabca.vn/fonts")}))})()})();